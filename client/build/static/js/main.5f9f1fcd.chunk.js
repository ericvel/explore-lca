(this["webpackJsonplca-tool-gui"]=this["webpackJsonplca-tool-gui"]||[]).push([[0],{297:function(e,t,n){e.exports=n(462)},302:function(e,t,n){},312:function(e,t,n){},462:function(e,t,n){"use strict";n.r(t);var a,l,r=n(0),i=n.n(r),o=n(22),c=n.n(o),u=(n(302),n(12)),m=n(51),s=(n(204),n(205),n(544)),d=n(271),E=Object(d.a)({palette:{simulated:{main:"#ef6c00",light:"#ff9d3f",dark:"#b53d00"}}}),g=(n(305),n(136)),b=n(526),f=n(554),p=n(530),h=n(99),v=n(10),y={buildingActions:{setBuildings:function(e){return{type:"SET_BUILDINGS",payload:e}},selectBuildings:function(e){return{type:"SELECT_BUILDINGS",payload:e}},deselectAllBuildings:function(){return{type:"DESELECT_ALL_BUILDINGS"}}},uiActions:{setMaterialsGroupBy:function(e){return{type:"SET_CONTENT_TYPE",payload:e}},setDisplayMode:function(e){return{type:"SET_DISPLAY_MODE",payload:e}},toggleCanSelectMultiple:function(){return{type:"TOGGLE_CAN_SELECT_MULTIPLE"}},toggleSimulationMode:function(){return{type:"TOGGLE_SIMULATION_MODE"}}},elementAndMaterialActions:{setBuildingElements:function(e){return{type:"SET_BUILDING_ELEMENTS",payload:e}},setMaterialInventory:function(e){return{type:"SET_MATERIAL_INVENTORY",payload:e}},selectBuildingElement:function(e){return{type:"SELECT_BUILDING_ELEMENT",payload:e}},addToElementRoute:function(e){return{type:"ADD_TO_ELEMENT_ROUTE",payload:e}},setElementRoute:function(e){return{type:"SET_BUILDING_ELEMENT_ROUTE",payload:e}},hoverBuildingElement:function(e){return{type:"HOVER_BUILDING_ELEMENT",payload:e}},stopHoverBuildingElement:function(e){return{type:"STOP_HOVER_BUILDING_ELEMENT",payload:e}},setSimulatedData:function(e){return{type:"SET_SIMULATED_DATA",payload:e}},setMaterialProducts:function(e){return{type:"SET_MATERIAL_PRODUCTS",payload:e}},setSimulatedMaterialProducts:function(e){return{type:"SET_SIMULATED_MATERIAL_PRODUCTS",payload:e}}},settingsActions:{setEEMetric:function(e){return{type:"SET_EE_METRIC",name:e.name,checked:e.checked}}},userActions:{setCurrentUser:function(e){return{type:"SET_CURRENT_USER",payload:e}}}},O=n(466),A=n(528),j=n(529),S=n(9),C=n(19),_=n(2),w=n(119),N=n.n(w),B=n(39);!function(e){e.Category="category",e.BuildingElement="buildingElement",e.Product="product"}(a||(a={})),function(e){e.A1A3="Material production",e.A4="Transportation to building site",e.B4="Replacement",e.B4m="Material replacements",e.B4t="Transportation of material replacements",e.B6="Operational energy use",e.B7="Operational water use"}(l||(l={}));Object(b.a)((function(){return Object(f.a)({simulatedField:{color:E.palette.simulated.main}})}));var T=function(e){var t=e.value;return t?parseFloat(t).toLocaleString():0},I=function(e){return i.a.createElement(S.c,Object.assign({formatterComponent:T},e))},M=function(e){var t=e.value;return i.a.createElement("b",null,t)},L=function(e){return i.a.createElement(S.c,Object.assign({formatterComponent:M},e))},x=function(e){e.getMessage;var t=e.column,n=Object(B.a)(e,["getMessage","column"]),a="";switch(t.name){case"A1A3":a=l.A1A3;break;case"A4":a=l.A4;break;case"B4":a=l.B4;break;case"B4_m":a=l.B4m;break;case"B4_t":a=l.B4t;break;case"GWP_B6":a=l.B6;break;case"GWP_B7":a=l.B7;break;case"FU":a="Functional unit";break;case"RSL_mi":case"RSL":a="Reference service life";break;default:a="Sort by ".concat(t.name)}return i.a.createElement(C.i.SortLabel,Object.assign({column:t,getMessage:function(){return a}},n))},k=n(35),R=function e(){Object(k.a)(this,e)};R.columns=[{name:"building_identifier",title:"ID"},{name:"building_name",title:"Building name"},{name:"project",title:"Project"},{name:"country",title:"Country"},{name:"city",title:"City"},{name:"typology",title:"Typology"},{name:"construction_type",title:"Construction type"},{name:"built_status",title:"Built status"},{name:"energy_ambition_level",title:"Energy ambition level"},{name:"calculation_method",title:"Calculation method"},{name:"main_data_source",title:"Data source"},{name:"study_type",title:"Study type"},{name:"study_year",title:"Study year"},{name:"floor_area",title:"Floor area (m\xb2)"},{name:"lifetime",title:"Lifetime"},{name:"A1A3",title:"A1-A3"},{name:"A4",title:"A4"},{name:"B4_m",title:"B4 (m)"},{name:"B4_t",title:"B4 (t)"},{name:"GWP_B6",title:"B6"},{name:"GWP_B7",title:"B7"},{name:"heated_volume",title:"Heated volume"},{name:"area_footprint",title:"Area footprint"},{name:"area_roof",title:"Area roof"},{name:"area_wall",title:"Area wall"},{name:"area_windowAndDoor",title:"Area window and door"},{name:"heatloss_number",title:"Heatloss number"},{name:"comments",title:"Comments"}],R.columnExtensions=[{columnName:"building_identifier",width:80},{columnName:"building_name",width:200,wordWrapEnabled:!0},{columnName:"project",width:120},{columnName:"country",width:110},{columnName:"city",width:120},{columnName:"typology",width:130},{columnName:"construction_type",width:160},{columnName:"built_status",width:120},{columnName:"energy_ambition_level",width:180},{columnName:"calculation_method",width:170},{columnName:"main_data_source",width:120},{columnName:"study_type",width:160},{columnName:"study_year",width:110},{columnName:"lifetime",width:100},{columnName:"floor_area",width:150},{columnName:"heated_volume",width:150},{columnName:"area_footprint",width:150},{columnName:"area_roof",width:150},{columnName:"area_wall",width:150},{columnName:"area_windowAndDoor",width:150},{columnName:"heatloss_number",width:150},{columnName:"comments",width:400,wordWrapEnabled:!0}],R.defaultHiddenColumnNames=["country","built_status","energy_ambition_level","main_data_source","calculation_method","heated_volume","area_footprint","area_roof","area_wall","area_windowAndDoor","heatloss_number","comments"],R.tableColumnVisibilityColumnExtensions=[{columnName:"building_identifier",togglingEnabled:!1},{columnName:"building_name",togglingEnabled:!1}];var P=R,D=n(527),F=(n(312),function(){return r.createElement("div",{className:"loading-shading-mui"},r.createElement(D.a,{className:"loading-icon-mui",size:50,thickness:5}))}),U=n(551),G=n(546);function z(e){var t=i.a.useState(!0),n=Object(u.a)(t,2),a=n[0],l=n[1],r=function(e,t){"clickaway"!==t&&l(!1)};return i.a.createElement(U.a,{open:a,autoHideDuration:6e3,onClose:r},i.a.createElement(G.a,{onClose:r,severity:e.severity,elevation:6,variant:"filled"},e.message))}var W=function(e){return e[Object.keys(e)[0]]},V=function(e){return i.a.createElement(C.b.Root,Object.assign({},e,{style:{height:"100%"}}))},q=function(e){return e.map((function(e){return{columnName:e,predicate:function(){return!1}}}))};var H=function(){var e=Object(v.b)(),t=Object(v.c)((function(e){return e.buildings})),n=Object(r.useState)(P.columns),a=Object(u.a)(n,1)[0],l=Object(r.useState)(P.columnExtensions),o=Object(u.a)(l,1)[0],c=Object(r.useState)(!1),m=Object(u.a)(c,2),s=m[0],d=m[1],E=Object(r.useState)(null),g=Object(u.a)(E,2),b=g[0],f=g[1],p=Object(r.useState)(),h=Object(u.a)(p,2),w=(h[0],h[1]),B=Object(r.useState)(P.defaultHiddenColumnNames),T=Object(u.a)(B,1)[0],M=Object(r.useState)(P.tableColumnVisibilityColumnExtensions),L=Object(u.a)(M,1)[0],k=Object(r.useState)([C.j.COLUMN_TYPE,"building_name"]),R=Object(u.a)(k,1)[0],D=Object(v.c)((function(e){return e.canSelectMultipleBuildings})),U=Object(r.useState)(["A1A3","A4","B4_t","B4_m","GWP_B6","GWP_B7"]),G=Object(u.a)(U,1)[0];function H(e){if(!e.ok)throw Error(e.statusText);return e}Object(r.useEffect)((function(){Y()}),[]);var Y=function(){if(!s){d(!0);var n="https://us-central1-blcad-gui.cloudfunctions.net/api/buildings";console.log("URL: ",n),fetch(n).then(H).then((function(e){return e.json()})).then((function(n){e(y.buildingActions.setBuildings(n)),d(!1),console.log("Fetched rows: ",t)})).catch((function(e){console.log("Error getting building data:",e),f(e),d(!1)}))}},K=Object(r.useCallback)(N.a.debounce((function(e){console.log("Changed search term: ",e),w(e)}),300),[]),X=Object(r.useState)(q(T)),$=Object(u.a)(X,2),Q=$[0],J=$[1],Z=Object(r.useState)([]),ee=Object(u.a)(Z,2),te=ee[0],ne=ee[1];return i.a.createElement(O.a,{style:{height:"100%"}},i.a.createElement(C.b,{rows:t,columns:a,getRowId:W,rootComponent:V},i.a.createElement(I,{for:G}),i.a.createElement(S.q,{onValueChange:K}),i.a.createElement(S.k,{columnExtensions:Q}),i.a.createElement(S.s,null),i.a.createElement(S.m,null),i.a.createElement(S.r,{selection:te,onSelectionChange:function(n){if(D){ne(n);var a=t.filter((function(e){return n.includes(e.idbuildings)}));e(y.buildingActions.selectBuildings(a))}else{var l=n.find((function(e){return-1===te.indexOf(e)}));if(void 0!==l){ne([l]);var r=n[n.length-1];console.log("Selected row: ",r);var i=t.find((function(e){return e.idbuildings===r}));void 0!==i&&e(y.buildingActions.selectBuildings([i]))}else ne([]),e(y.buildingActions.deselectAllBuildings())}}}),i.a.createElement(C.n,{height:"auto",columnExtensions:o}),i.a.createElement(C.i,{showSortingControls:!0,sortLabelComponent:x}),i.a.createElement(C.j,{selectByRowClick:!0,highlightRow:!0,showSelectionColumn:D}),i.a.createElement(C.g,{leftColumns:R}),i.a.createElement(C.e,{defaultHiddenColumnNames:T,columnExtensions:L,onHiddenColumnNamesChange:function(e){return J(q(e))}}),i.a.createElement(C.m,null),i.a.createElement(_.k,{name:"toolbarContent"},i.a.createElement(_.m,null),i.a.createElement(A.a,{control:i.a.createElement(j.a,{checked:D,onChange:function(){e(y.uiActions.toggleCanSelectMultiple()),e(y.buildingActions.deselectAllBuildings()),ne([])},name:"checkedB",color:"primary"}),label:"Select multiple"})),i.a.createElement(C.d,null),i.a.createElement(C.a,null)),s&&i.a.createElement(F,null),b&&i.a.createElement(z,{message:"Couldn't load data, the server may be down.",severity:"error"}))},Y=n(540),K=n(556),X={apiKey:"AIzaSyBb6VK_mu8s1T2gxWYg0HWvoOY_bSARrKc",authDomain:"blcad-gui.firebaseapp.com",projectId:"blcad-gui",storageBucket:"blcad-gui.appspot.com",messagingSenderId:"904167128860",appId:"1:904167128860:web:53f89c35f19b3dc64104d9",measurementId:"G-5Y4F1X620N"};n(463),n(313),n(464);m.a.initializeApp(X);m.a.auth(),m.a.firestore();var $=m.a.firestore();function Q(e){var t="anonymous",n=m.a.auth().currentUser;return n&&null!==n.email&&(t=n.email),$.collection("users").doc(t).collection("simulatedData").doc(e).get()}var J=n(534),Z=n(522),ee=n(548),te=n(536),ne=n(533),ae=n(470),le=n(547),re=n(552),ie=n(537),oe=n(7),ce=n(15),ue=n(549),me=n(558),se=n(191),de=n.n(se),Ee=n(266),ge=n.n(Ee),be=n(467),fe=n(160),pe=n.n(fe),he=n(265),ve=n.n(he),ye=n(81),Oe=n.n(ye),Ae=function e(){Object(k.a)(this,e)};Ae.columns=[{name:"idlevels",title:"Code"},{name:"name",title:"Name"},{name:"A1A3",title:"A1-A3"},{name:"A4",title:"A4"},{name:"B4_m",title:"B4 (m)"},{name:"B4_t",title:"B4 (t)"}],Ae.columnExtensions=[{columnName:"idlevels",width:80},{columnName:"name",width:180,wordWrapEnabled:!0},{columnName:"A1A3",width:130},{columnName:"A4",width:130},{columnName:"B4_m",width:130},{columnName:"B4_t",width:130}],Ae.defaultHiddenColumnNames=[],Ae.tableColumnVisibilityColumnExtensions=[{columnName:"name",togglingEnabled:!1}];var je=Ae,Se=n(40),Ce=function(e,t){var n=e.filter((function(e){return e.idparent===t.idlevels}));return void 0!==n?n:[]},_e=function(e,t){var n=e.filter((function(e){return e.idbuilding_elements===t.idbuilding_elements}));return void 0!==n?n:[]},we=function(e){if(e.value.length>15){var t=e.value.split(" ");if(t.length>2){var n=Math.ceil(t.length/2);return t.slice(0,n).join(" ")+"\n"+t.slice(n).join(" ")}return t.join("\n")}return e.value},Ne=function(e){return e.sort((function(e,t){return e.A1A3+e.A4+e.B4_m+e.B4_t-(t.A1A3+t.A4+t.B4_m+t.B4_t)})),e},Be=function(e){return e.map((function(e){e.idmaterials,e.sourceType,e.RSL_mi,e.source,e.dataType,e.dataYear,e.density,e.EEf_A1A3,e.RSL,e.comments,e.parentId;return Object(B.a)(e,["idmaterials","sourceType","RSL_mi","source","dataType","dataYear","density","EEf_A1A3","RSL","comments","parentId"])}))},Te=function(e){var t=[];return e.reduce((function(e,n){return e[n.name]||(e[n.name]=Object(Se.a)(Object(Se.a)({},n),{},{idmaterialInventory:n.parentId,quantity:0,A1A3:0,A4:0,B4_m:0,B4_t:0,parentId:null,buildingElementName:n.buildingElementName}),t.push(e[n.name])),e[n.name].quantity+=n.quantity,e[n.name].A1A3+=n.A1A3,e[n.name].A4+=n.A4,e[n.name].B4_m+=n.B4_m,e[n.name].B4_t+=n.B4_t,e[n.name].buildingElementName!==n.buildingElementName&&(e[n.name].buildingElementName="..."),e}),{}),t},Ie=function(e,t){var n=[];return t&&(n=e.map((function(e){return t[e.idmaterialInventory]?Object(Se.a)(Object(Se.a)({},e),t[e.idmaterialInventory]):e}))),n},Me=Object(b.a)((function(e){return Object(f.a)({customRow:{"&:hover":{backgroundColor:"#F5F5F5",cursor:"pointer"}}})})),Le=function(e){var t=Object(v.b)(),n=Object(v.c)((function(e){return e.buildingElements})),a=Object(v.c)((function(e){return e.selectedBuildingElement})),l=Object(r.useState)(je.columns),o=Object(u.a)(l,1)[0],c=Object(r.useState)(je.columnExtensions),m=Object(u.a)(c,1)[0],s=Object(r.useState)(["A1A3","A4","B4_t","B4_m"]),d=Object(u.a)(s,1)[0],E=Object(r.useState)(["name"]),g=(Object(u.a)(E,1)[0],Object(r.useState)(["name"])),b=Object(u.a)(g,1)[0],f=function(e){t(y.elementAndMaterialActions.selectBuildingElement(e)),t(y.elementAndMaterialActions.addToElementRoute(e))},p={edit:function(e){var t=e.onExecute;return i.a.createElement(re.a,{title:"Go to sub-elements"},i.a.createElement(be.a,{onClick:t},i.a.createElement(Oe.a,null)))}},h=Ce(n,a);return i.a.createElement(C.b,{rows:h,columns:o},i.a.createElement(L,{for:b}),i.a.createElement(I,{for:d}),i.a.createElement(S.s,null),i.a.createElement(S.m,null),i.a.createElement(S.e,{onCommitChanges:function(){}}),i.a.createElement(C.n,{columnExtensions:m,rowComponent:function(e){var t=e.row,n=(e.style,Object(B.a)(e,["row","style"]));return i.a.createElement(C.n.Row,Object.assign({},n,{id:"tableRow"+t.idbuilding_elements,className:Me().customRow,onClick:function(){return f(t)}}))},height:500}),i.a.createElement(C.i,{showSortingControls:!0,sortLabelComponent:x}),i.a.createElement(C.f,{showEditCommand:!0,commandComponent:function(e){var t=e.id,n=e.onExecute,a=p[t];return i.a.createElement(a,{onExecute:n})},width:80}))},xe=n(14),ke=function(e){switch(e.seriesName){case"A1-A3":return l.A1A3;case"A4":return l.A4;case"B4":return l.B4;case"B4 (m)":return l.B4m;case"B4 (t)":return l.B4t}},Re=Object(b.a)((function(e){return Object(f.a)({chart:{padding:e.spacing(2)},argumentAxisLabel:{fill:"#767676"}})})),Pe=function(){var e=Object(r.useRef)(null),t={force:!0,animate:!0},n=Object(r.useRef)(new ResizeObserver((function(n){var a;console.log("Size changed"),null===e||void 0===e||null===(a=e.current)||void 0===a||a.instance.render(t)}))),a=Object(r.useCallback)((function(e){null!==e?n.current.observe(e):n.current&&n.current.disconnect()}),[n.current]),l=Object(v.b)(),o=Object(v.c)((function(e){return e.buildingElements})),c=Object(v.c)((function(e){return e.selectedBuildingElement})),m=Object(r.useState)([]),s=Object(u.a)(m,2),d=s[0],E=s[1];Object(r.useEffect)((function(){var e=g(c),t=[];e.forEach((function(e){var n={name:e.idlevels+" - "+e.name,id:String(e.idbuilding_elements),A1A3:Number(e.A1A3)||0,A4:Number(e.A4)||0,B4_m:Number(e.B4_m)||0,B4_t:Number(e.B4_t)||0};t.push(n)}));var n=Ne(t);E(n)}),[c]);var g=function(e){var t=o.filter((function(t){return t.idparent===e.idlevels}));return void 0!==t?t:[]},b=Re();return i.a.createElement(O.a,{ref:a},i.a.createElement(xe.Chart,{className:b.chart,dataSource:d,palette:"Material",rotated:!0,onPointClick:function(e){var t=e.target,n=Number(t.data.id),a=o.find((function(e){return e.idbuilding_elements===n}));void 0!==a&&(l(y.elementAndMaterialActions.selectBuildingElement(a)),l(y.elementAndMaterialActions.addToElementRoute(a)))},onDrawn:function(e){e.element.querySelectorAll(".dxc-markers rect").forEach((function(e){e.style.cursor="pointer"})),e.element.querySelector(".dxc-arg-elements").childNodes.forEach((function(e){e.style.cursor="pointer"}))},ref:e},i.a.createElement(xe.Size,{height:500}),i.a.createElement(xe.CommonSeriesSettings,{argumentField:"name",type:"stackedBar",barWidth:40,hoverMode:"allArgumentPoints"}),i.a.createElement(xe.Series,{valueField:"A1A3",name:"A1-A3"}),i.a.createElement(xe.Series,{valueField:"A4",name:"A4"}),i.a.createElement(xe.Series,{valueField:"B4_m",name:"B4 (m)"}),i.a.createElement(xe.Series,{valueField:"B4_t",name:"B4 (t)"}),i.a.createElement(xe.ValueAxis,null,i.a.createElement(xe.Title,{text:"kgCO2e",font:{size:14}})),i.a.createElement(xe.ArgumentAxis,null,i.a.createElement(xe.Label,{customizeText:we})),i.a.createElement(xe.Legend,{verticalAlignment:"bottom",horizontalAlignment:"center",itemTextPosition:"top",customizeHint:ke}),i.a.createElement(xe.Tooltip,{enabled:!0,location:"edge",customizeTooltip:function(e){return{text:"<b>".concat(e.seriesName,"</b>\n ").concat(e.valueText)}},zIndex:1200,arrowLength:6,format:{format:function(e){return parseFloat(e).toLocaleString()}},interactive:!0})))},De=n(159),Fe=n(264),Ue=n.n(Fe),Ge=function e(){Object(k.a)(this,e)};Ge.columns=[{name:"name",title:"Name"},{name:"quantity",title:"Quantity"},{name:"FU",title:"FU"},{name:"sourceType",title:"Source type"},{name:"A1A3",title:"A1-A3"},{name:"A4",title:"A4"},{name:"B4_m",title:"B4 (m)"},{name:"B4_t",title:"B4 (t)"},{name:"RSL_mi",title:"RSL"},{name:"materialCat",title:"Category"},{name:"buildingElementName",title:"Building element"},{name:"source",title:"Source"},{name:"dataType",title:"Data type"},{name:"dataYear",title:"Data year"},{name:"density",title:"Density"},{name:"EEf_A1A3",title:"EEf_A1A3"},{name:"country",title:"Country"},{name:"city",title:"City"},{name:"comments",title:"Comments"}],Ge.columnExtensions=[{columnName:"idmaterialInventory",width:80},{columnName:"name",width:270,wordWrapEnabled:!0},{columnName:"dataType",width:120},{columnName:"sourceType",width:120},{columnName:"source",width:200,wordWrapEnabled:!0},{columnName:"dataYear",width:100},{columnName:"FU",width:70},{columnName:"EEf_A1A3",width:110},{columnName:"comments",width:400},{columnName:"materialCat",width:150},{columnName:"quantity",width:110},{columnName:"RSL_mi",width:80},{columnName:"A1A3",width:130},{columnName:"A4",width:130},{columnName:"B4_m",width:130},{columnName:"B4_t",width:130},{columnName:"buildingElementName",width:160,wordWrapEnabled:!0}],Ge.defaultHiddenColumnNames=["source","dataType","dataYear","comments","EEf_A1A3","density","country","city"],Ge.tableColumnVisibilityColumnExtensions=[{columnName:"name",togglingEnabled:!1}],Ge.decimalColumns=["quantity","EEf_A1A3","A1A3","A4","B4_t","B4_m","RSL_mi"],Ge.groupSummaryItems=[{columnName:"quantity",type:"sum",showInGroupFooter:!1,alignByColumn:!0},{columnName:"FU",type:"staticValue",showInGroupFooter:!1,alignByColumn:!0},{columnName:"sourceType",type:"staticValue",showInGroupFooter:!1,alignByColumn:!0},{columnName:"materialCat",type:"staticValue",showInGroupFooter:!1,alignByColumn:!0},{columnName:"RSL_mi",type:"avg",showInGroupFooter:!1,alignByColumn:!0},{columnName:"A1A3",type:"sum",showInGroupFooter:!1,alignByColumn:!0},{columnName:"A4",type:"sum",showInGroupFooter:!1,alignByColumn:!0},{columnName:"B4_m",type:"sum",showInGroupFooter:!1,alignByColumn:!0},{columnName:"B4_t",type:"sum",showInGroupFooter:!1,alignByColumn:!0}],Ge.editingStateColumnExtensions=[{columnName:"idmaterialInventory",editingEnabled:!1},{columnName:"name",editingEnabled:!1},{columnName:"buildingElementName",editingEnabled:!1},{columnName:"FU",editingEnabled:!1},{columnName:"materialCat",editingEnabled:!1},{columnName:"RSL_mi",editingEnabled:!1},{columnName:"dataType",editingEnabled:!1},{columnName:"dataYear",editingEnabled:!1},{columnName:"comments",editingEnabled:!1}];var ze=Ge,We=n(97),Ve=n.n(We),qe=n(524),He=(n(520),Object(b.a)((function(){return Object(f.a)({cell:{padding:E.spacing(1)},indentCell:{padding:0},groupButton:{height:E.spacing(4),width:E.spacing(4)},lookupEditCell:{padding:E.spacing(1)},inputRoot:{width:"100%"},selectMenu:{position:"absolute !important"},editCell:{paddingTop:E.spacing(0),paddingBottom:E.spacing(0)},simulatedField:{color:E.palette.simulated.main}})})),function(e){var t=e.children,n=e.style,a=Object(B.a)(e,["children","style"]);return i.a.createElement(C.n.Cell,Object.assign({},a,{children:null===a.row.parentId?t:null,style:Object(Se.a)({paddingTop:"0px",paddingBottom:"0px"},n)}))}),Ye=function(e){var t=e.value,n=e.style,a=Object(B.a)(e,["value","style"]);return i.a.createElement(C.n.Cell,Object.assign({},a,{style:Object(Se.a)({},n)}),i.a.createElement(re.a,{title:"Simulated value"},i.a.createElement("span",{style:{color:E.palette.simulated.main,fontWeight:"bold"}},"number"===typeof t?t.toLocaleString():t)))},Ke=n(469),Xe=n(523),$e=n(550),Qe=n(535),Je=n(532),Ze=n(531),et=n(525);var tt=function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n},nt=Object(b.a)((function(){return Object(f.a)({labelAsterisk:{color:E.palette.simulated.main,fontWeight:"bolder",fontSize:"large"},subtitleAsterisk:{color:E.palette.simulated.main,fontWeight:"bolder"}})})),at=["TestSource","EPD","Ecoinvent","Other","Custom","na","Klimatre","PEP"],lt=function(e){var t=e.row,n=e.onChange,a=e.onApplyChanges,o=e.onCancelChanges,c=e.open,m=Object(r.useState)(t),s=Object(u.a)(m,2),d=s[0],E=s[1],g=Object(r.useState)(t.sourceType),b=Object(u.a)(g,2),f=b[0],y=b[1],O=Object(r.useState)(t.A1A3),A=Object(u.a)(O,2),j=A[0],S=A[1],C=Object(v.c)((function(e){return e.materialProducts}));Object(v.c)((function(e){return e.simulatedMaterialProducts}));Object(r.useEffect)((function(){var e=C.find((function(e){return e.idmaterialInventory===t.idmaterialInventory}));void 0!==e&&(E(e),y(t.sourceType),S(t.A1A3))}),[t.idmaterialInventory]);var _=nt();return i.a.createElement($e.a,{open:c,onClose:o},i.a.createElement(Ze.a,{disableTypography:!0},i.a.createElement(h.a,{variant:"h6",component:"h2"},"Simulate material details"),i.a.createElement(h.a,{noWrap:!0,variant:"subtitle2",component:"h3"},t.name)),i.a.createElement(Je.a,null,i.a.createElement(p.a,{container:!0,spacing:3},i.a.createElement(p.a,{item:!0,xs:6},i.a.createElement(Ke.a,null,i.a.createElement(K.a,{select:!0,required:f!==d.sourceType,margin:"normal",name:"sourceType",label:"Source type",value:f||" ",onChange:function(e){if(y(e.target.value),"TestSource"===e.target.value){var t=(l=d.A1A3,tt(.7*l,3));S(t),n({target:{name:"A1A3",value:t}})}else if(e.target.value===d.sourceType){S(d.A1A3);var a={target:{name:"A1A3",value:d.A1A3}};n(a)}var l;n(e)},InputLabelProps:{classes:{asterisk:_.labelAsterisk}}},at.map((function(e){return i.a.createElement(Z.a,{key:e,value:e,disabled:!(e===d.sourceType||"TestSource"===e)},e)}))),i.a.createElement(K.a,{margin:"normal",name:"materialCat",label:"Category",value:t.materialCat||" ",onChange:n,disabled:!0}),i.a.createElement(K.a,{margin:"normal",name:"quantity",label:"Quantity",value:t.quantity||"0",onChange:n,disabled:!0,InputProps:{startAdornment:i.a.createElement(et.a,{position:"start"},t.FU||"")}}),i.a.createElement(K.a,{margin:"normal",name:"RSL_mi",label:"RSL",value:t.RSL_mi||"0",onChange:n,disabled:!0}))),i.a.createElement(p.a,{item:!0,xs:6},i.a.createElement(Ke.a,null,i.a.createElement(re.a,{enterDelay:500,placement:"bottom",title:l.A1A3},i.a.createElement(K.a,{required:j!==d.A1A3,margin:"normal",name:"A1A3",label:"A1-A3",value:j||"0",onChange:n,disabled:!0,InputLabelProps:{classes:{asterisk:_.labelAsterisk}}})),i.a.createElement(re.a,{enterDelay:500,placement:"bottom",title:l.A4},i.a.createElement(K.a,{margin:"normal",name:"A4",label:"A4",value:t.A4||"0",onChange:n,disabled:!0})),i.a.createElement(re.a,{enterDelay:500,placement:"bottom",title:l.B4m},i.a.createElement(K.a,{margin:"normal",name:"B4_m",label:"B4 (m)",value:t.B4_m||"0",onChange:n,disabled:!0})),i.a.createElement(re.a,{enterDelay:500,placement:"bottom",title:l.B4t},i.a.createElement(K.a,{margin:"normal",name:"B4_t",label:"B4 (t)",value:t.B4_t||"0",onChange:n,disabled:!0})))))),i.a.createElement(Qe.a,null,i.a.createElement(Xe.a,{onClick:o,color:"primary"},"Cancel"),i.a.createElement(Xe.a,{onClick:a,color:"primary"},"Save")))},rt=i.a.memo((function(e){var t=e.popupComponent;return i.a.createElement(_.g,null,i.a.createElement(_.k,{name:"popupEditing"},i.a.createElement(_.l,null,(function(e,n){var a,l,r=e.rows,o=e.getRowId,c=e.editingRowIds,m=e.createRowChange,s=e.rowChanges,d=n.changeRow,E=n.commitChangedRows,g=n.stopEditRows,b=n.cancelChangedRows,f=Object(u.a)(c,1);l=f[0];var p=r.filter((function(e){return o(e)===l}))[0];a=Object(Se.a)(Object(Se.a)({},p),s[l]);var h=c,v=c.length>0;return i.a.createElement(t,{open:v,row:a,onChange:function(e){var t=e.target,n=t.name,r=t.value,i={rowId:l,change:m(a,r,n)};d(i)},onApplyChanges:function(){g({rowIds:h}),E({rowIds:h})},onCancelChanges:function(){g({rowIds:h}),b({rowIds:h})}})}))),i.a.createElement(_.k,{name:"root"},i.a.createElement(_.m,null),i.a.createElement(_.m,{name:"popupEditing"})))})),it=function(e){return e.idmaterialInventory},ot=function(e){return e.map((function(e){return{columnName:e,predicate:function(){return!1}}}))},ct={edit:function(e){var t=e.onExecute;return i.a.createElement(re.a,{title:"Edit material"},i.a.createElement(be.a,{onClick:t},i.a.createElement(Ue.a,null)))}},ut=function(e){var t=e.id,n=e.onExecute,a=ct[t];return i.a.createElement(a,{onExecute:n})},mt=function(e){var t=e.row,n=e.style,a=Object(B.a)(e,["row","style"]);return i.a.createElement(C.l.Cell,Object.assign({},a,{style:Object(Se.a)({fontWeight:null===t.parentId?"bold":void 0},n)}))},st=function(e){var t=Object(v.b)(),n=Object(v.c)((function(e){return e.selectedBuildings})),a=Object(v.c)((function(e){return e.materialProducts})),l=(Object(v.c)((function(e){return e.simulatedMaterialProducts})),Object(v.c)((function(e){return e.simulatedData}))),o=Object(v.c)((function(e){return e.isSimulationModeActive})),c=Object(r.useState)([]),s=Object(u.a)(c,2),d=s[0],E=s[1],g=Object(r.useState)(ze.columns),b=Object(u.a)(g,1)[0],f=Object(r.useState)(ze.columnExtensions),p=Object(u.a)(f,1)[0],h=Object(r.useState)(ze.defaultHiddenColumnNames),O=Object(u.a)(h,1)[0],A=Object(r.useState)(ze.tableColumnVisibilityColumnExtensions),j=Object(u.a)(A,1)[0],_=Object(r.useState)(ze.decimalColumns),w=Object(u.a)(_,1)[0];Object(r.useEffect)((function(){E(e.data)}),[e.data]);var B=Object(r.useState)(),T=Object(u.a)(B,2),M=(T[0],T[1]),L=Object(r.useCallback)(N.a.debounce((function(e){console.log("Changed search term: ",e),M(e)}),300),[]),k=Object(r.useState)(ot(O)),R=Object(u.a)(k,2),P=R[0],D=R[1],F=Object(r.useState)([]),U=Object(u.a)(F,2),G=U[0],z=U[1],W=Object(r.useState)([C.f.COLUMN_TYPE,"name"]),V=Object(u.a)(W,1)[0];return i.a.createElement(C.b,{rows:d,columns:b,getRowId:it},i.a.createElement(S.N,{expandedRowIds:G,onExpandedRowIdsChange:z}),i.a.createElement(S.b,{getChildRows:function(e,t){var n=t.filter((function(t){return t.parentId===(e?e.idmaterialInventory:null)}));return n.length?n:null}}),i.a.createElement(S.q,{onValueChange:L}),i.a.createElement(S.k,{columnExtensions:P}),i.a.createElement(S.s,null),i.a.createElement(S.m,null),i.a.createElement(S.e,{onCommitChanges:function(e){var r=e.changed;console.log("Changed: ",r);var i=Object.keys(r)[0],o=a.find((function(e){return String(e.idmaterialInventory)===i}));if(void 0!==Object.values(r)[0]&&void 0!==o){for(var c=Object(Se.a)(Object(Se.a)({},l),r),s=0,d=Object.entries(c[i]);s<d.length;s++){var g=Object(u.a)(d[s],2),b=g[0];g[1]===Object(De.getKeyValue)(b,o)&&delete c[i][b]}0===Object.keys(c[i]).length&&delete c[i];var f=Ie(a,c);!function(e,t){var n="anonymous",a=m.a.auth().currentUser;a&&null!==a.email&&(n=a.email),$.collection("users").doc(n).collection("simulatedData").doc(e).set(t).then((function(){console.log("Document successfully written!")})).catch((function(e){console.error("Error writing document: ",e)}))}(String(n[0].idbuildings),c),t(y.elementAndMaterialActions.setSimulatedData(c)),t(y.elementAndMaterialActions.setSimulatedMaterialProducts(f)),E(f)}}}),i.a.createElement(C.n,{columnExtensions:p,cellComponent:o?function(e){return function(e,t){var n=e.column,a=e.row;return a.idmaterialInventory in t&&n.name in t[a.idmaterialInventory]?i.a.createElement(Ye,e):i.a.createElement(C.n.Cell,e)}(e,l)}:function(e){return i.a.createElement(C.n.Cell,e)}}),i.a.createElement(I,{for:w}),i.a.createElement(C.i,{showSortingControls:!0,sortLabelComponent:x}),i.a.createElement(C.l,{for:"name",cellComponent:mt}),i.a.createElement(C.f,{showEditCommand:o,commandComponent:ut,cellComponent:He,width:o?70:.1}),i.a.createElement(C.g,{leftColumns:V}),i.a.createElement(rt,{popupComponent:lt}),i.a.createElement(C.e,{defaultHiddenColumnNames:O,columnExtensions:j,onHiddenColumnNamesChange:function(e){return D(ot(e))}}),i.a.createElement(C.m,null),i.a.createElement(C.d,null),i.a.createElement(C.a,null))},dt=Object(b.a)((function(e){return Object(f.a)({chart:{padding:e.spacing(2)},argumentAxisLabel:{fill:"#767676"}})})),Et=function(e){var t=Object(r.useRef)(null),n={force:!0,animate:!0},a=Object(r.useRef)(new ResizeObserver((function(e){var a;console.log("Size changed"),null===t||void 0===t||null===(a=t.current)||void 0===a||a.instance.render(n)}))),l=Object(r.useCallback)((function(e){null!==e?a.current.observe(e):a.current&&a.current.disconnect()}),[a.current]),o=Object(r.useState)([]),c=Object(u.a)(o,2),m=c[0],s=c[1],d=Object(v.c)((function(e){return e.isSimulationModeActive})),g=Object(v.c)((function(e){return e.simulatedData})),b=Object(v.c)((function(e){return e.simulatedMaterialProducts}));Object(r.useEffect)((function(){var t=Ne(e.data);s(t)}),[e.data]);var f=200+30*m.length,p=dt();return i.a.createElement(O.a,{ref:l},i.a.createElement(xe.Chart,{className:p.chart,dataSource:m,palette:"Material",rotated:!0,onDrawn:function(e){d&&e.element.querySelector(".dxc-arg-elements").childNodes.forEach((function(e){var t="";if(e.childNodes.length>1){var n=[];e.childNodes.forEach((function(e){n.push(e.innerHTML)})),t=n.join(" ")}else t=e.innerHTML;(function(e){var t;return(null===(t=b.find((function(t){return t.name===e})))||void 0===t?void 0:t.idmaterialInventory)||0})(t)in g&&(e.style.fill=E.palette.simulated.main,e.style.fontWeight=500)}))},ref:t},i.a.createElement(xe.Size,{height:f>500?f:500}),i.a.createElement(xe.CommonSeriesSettings,{argumentField:"name",type:"stackedBar",barWidth:40,hoverMode:"allArgumentPoints"}),i.a.createElement(xe.Series,{valueField:"A1A3",name:"A1-A3"}),i.a.createElement(xe.Series,{valueField:"A4",name:"A4"}),i.a.createElement(xe.Series,{valueField:"B4_m",name:"B4 (m)"}),i.a.createElement(xe.Series,{valueField:"B4_t",name:"B4 (t)"}),i.a.createElement(xe.ValueAxis,null,i.a.createElement(xe.Title,{text:"kgCO2e",font:{size:14}})),i.a.createElement(xe.ArgumentAxis,null,i.a.createElement(xe.Label,{customizeText:we})),i.a.createElement(xe.Legend,{verticalAlignment:"bottom",horizontalAlignment:"center",itemTextPosition:"top",customizeHint:ke}),i.a.createElement(xe.Tooltip,{enabled:!0,location:"edge",customizeTooltip:function(e){return{text:"<b>".concat(e.seriesName,"</b>\n ").concat(e.valueText)}},zIndex:1200,arrowLength:6,format:{format:function(e){return parseFloat(e).toLocaleString()}},interactive:!0})))},gt=function(e){Object(v.b)();var t=Object(v.c)((function(e){return e.displayMode})),n=Object(v.c)((function(e){return e.materialInventory})),a=Object(v.c)((function(e){return e.materialProducts})),l=Object(v.c)((function(e){return e.simulatedMaterialProducts})),o=Object(v.c)((function(e){return e.isSimulationModeActive})),c=Object(v.c)((function(e){return e.simulatedData})),m=Object(r.useState)([]),s=Object(u.a)(m,2),d=s[0],E=s[1],g=Object(r.useState)([]),b=Object(u.a)(g,2),f=b[0],h=b[1];return Object(r.useEffect)((function(){var t,r;r=o?l:e.materials?Te(e.materials):a;var i=(null!==(t=e.materials)&&void 0!==t?t:n).map((function(e){return{idmaterialInventory:e.idmaterialInventory,name:"ID: "+String(e.idmaterialInventory),buildingElementName:e.buildingElementName,quantity:e.quantity,FU:e.FU,A1A3:e.A1A3||0,A4:e.A4||0,B4_m:e.B4_m||0,B4_t:e.B4_t||0,RSL_mi:e.RSL_mi,parentId:e.parentId}})),c=r.concat(i),u=Be(r);E(c),h(u)}),[o,c]),i.a.createElement("div",null,i.a.createElement(p.a,{container:!0,spacing:3},i.a.createElement(p.a,{item:!0,xs:!0},"table"==t?i.a.createElement(O.a,null,i.a.createElement(st,{data:d})):i.a.createElement(Et,{data:f}))))},bt=Object(b.a)((function(e){return Object(f.a)({breadCrumbs:{marginTop:"3px"},infoIcon:{color:e.palette.text.secondary},infoContainer:{marginBottom:e.spacing(1)},infoIconGridItem:{height:"28px"}})})),ft=Object(oe.a)((function(e){return{root:{backgroundColor:e.palette.grey[100],height:e.spacing(3),color:e.palette.grey[800],fontWeight:e.typography.fontWeightRegular,"&:hover, &:focus":{backgroundColor:e.palette.grey[300]},"&:active":{boxShadow:e.shadows[1],backgroundColor:Object(ce.b)(e.palette.grey[300],.12)}}}}))(me.a),pt=Object(oe.a)((function(e){return{root:{backgroundColor:e.palette.secondary.light,height:e.spacing(3),fontWeight:e.typography.fontWeightRegular,"&:hover, &:focus":{},"&:active":{boxShadow:e.shadows[1]}}}}))(me.a),ht=function(e){var t=Object(v.b)(),n=Object(v.c)((function(e){return e.buildingElements})),a=Object(v.c)((function(e){return e.materialInventory})),l=Object(v.c)((function(e){return e.selectedBuildingElement})),o=Object(v.c)((function(e){return e.buildingElementRoute})),c=Object(v.c)((function(e){return e.displayMode}));Object(r.useEffect)((function(){var e=n.find((function(e){return 0===e.hierarchy}));void 0!==e&&(t(y.elementAndMaterialActions.selectBuildingElement(e)),t(y.elementAndMaterialActions.setElementRoute([e])))}),[]);var m=Object(r.useState)(),s=Object(u.a)(m,2),d=s[0],E=s[1],g=Ce(n,l),b=bt();return i.a.createElement("div",null,i.a.createElement(p.a,{container:!0,spacing:3,alignItems:"center"},i.a.createElement(p.a,{item:!0},i.a.createElement(re.a,{title:"Back"},i.a.createElement("span",null,i.a.createElement(be.a,{size:"small",onClick:function(){var e=o;E(e.pop()),t(y.elementAndMaterialActions.selectBuildingElement(e[e.length-1])),t(y.elementAndMaterialActions.setElementRoute(e))},disabled:o.length<2},i.a.createElement(pe.a,null)))),i.a.createElement(re.a,{title:"Forward"},i.a.createElement("span",null,i.a.createElement(be.a,{size:"small",onClick:function(){var e=o;void 0!==d&&e.push(d),t(y.elementAndMaterialActions.selectBuildingElement(e[e.length-1])),t(y.elementAndMaterialActions.setElementRoute(e))},disabled:!0},i.a.createElement(ve.a,null))))),i.a.createElement(p.a,{item:!0,xs:10},i.a.createElement(ue.a,null,o.map((function(e,n){return n!==o.length-1?i.a.createElement(ft,{className:b.breadCrumbs,key:n,label:e.idlevels+" - "+e.name,variant:"default",icon:0===e.idlevels?i.a.createElement(de.a,{fontSize:"small"}):void 0,color:n===o.length-1?"secondary":"default",onClick:function(){return function(e){var n=o.slice(0,e+1);t(y.elementAndMaterialActions.selectBuildingElement(n[n.length-1])),t(y.elementAndMaterialActions.setElementRoute(n))}(n)}}):i.a.createElement(pt,{className:b.breadCrumbs,key:n,label:e.idlevels+" - "+e.name,variant:"default",icon:0===e.idlevels?i.a.createElement(de.a,{fontSize:"small"}):void 0,color:"secondary"})})))),i.a.createElement(p.a,{item:!0,xs:12},(null===g||void 0===g?void 0:g.length)?"table"===c?i.a.createElement(i.a.Fragment,null,i.a.createElement(p.a,{container:!0,alignItems:"center",justify:"center",spacing:1,className:b.infoContainer},i.a.createElement(p.a,{item:!0,className:b.infoIconGridItem},i.a.createElement(ge.a,{className:b.infoIcon,fontSize:"small"})),i.a.createElement(p.a,{item:!0},i.a.createElement(h.a,{variant:"body2",color:"textSecondary",align:"center"},"Click on a building element to see its sub-elements"))),i.a.createElement(O.a,null,i.a.createElement(Le,null))):i.a.createElement(Pe,null):i.a.createElement(gt,{materials:_e(a,l)}))))},vt=function e(){Object(k.a)(this,e)};vt.columns=[{name:"name",title:"Name"},{name:"quantity",title:"Quantity"},{name:"FU",title:"FU"},{name:"materialCat",title:"Category"},{name:"sourceType",title:"Source type"},{name:"RSL_mi",title:"RSL"},{name:"A1A3",title:"A1-A3"},{name:"A4",title:"A4"},{name:"B4_m",title:"B4 (m)"},{name:"B4_t",title:"B4 (t)"},{name:"source",title:"Source"},{name:"dataType",title:"Data type"},{name:"dataYear",title:"Data year"},{name:"density",title:"Density"},{name:"EEf_A1A3",title:"EEf_A1A3"},{name:"country",title:"Country"},{name:"city",title:"City"},{name:"comments",title:"Comments"}],vt.columnExtensions=[{columnName:"idmaterialInventory",width:80},{columnName:"name",width:270,wordWrapEnabled:!0},{columnName:"dataType",width:120},{columnName:"sourceType",width:120},{columnName:"source",width:200,wordWrapEnabled:!0},{columnName:"dataYear",width:100},{columnName:"FU",width:70},{columnName:"EEf_A1A3",width:110},{columnName:"comments",width:400},{columnName:"materialCat",width:150},{columnName:"quantity",width:130},{columnName:"RSL_mi",width:80},{columnName:"A1A3",width:130},{columnName:"A4",width:130},{columnName:"B4_m",width:130},{columnName:"B4_t",width:130},{columnName:"buildingElementName",width:160,wordWrapEnabled:!0}],vt.defaultHiddenColumnNames=["source","dataType","dataYear","comments","EEf_A1A3","density","country","city"],vt.tableColumnVisibilityColumnExtensions=[{columnName:"name",togglingEnabled:!1}],vt.decimalColumns=["quantity","EEf_A1A3","A1A3","A4","B4_t","B4_m","RSL_mi"],vt.groupSummaryItems=[{columnName:"quantity",type:"sum",showInGroupFooter:!1,alignByColumn:!0},{columnName:"FU",type:"staticValue",showInGroupFooter:!1,alignByColumn:!0},{columnName:"sourceType",type:"staticValue",showInGroupFooter:!1,alignByColumn:!0},{columnName:"RSL_mi",type:"avg",showInGroupFooter:!1,alignByColumn:!0},{columnName:"A1A3",type:"sum",showInGroupFooter:!1,alignByColumn:!0},{columnName:"A4",type:"sum",showInGroupFooter:!1,alignByColumn:!0},{columnName:"B4_m",type:"sum",showInGroupFooter:!1,alignByColumn:!0},{columnName:"B4_t",type:"sum",showInGroupFooter:!1,alignByColumn:!0}],vt.editingStateColumnExtensions=[{columnName:"idmaterialInventory",editingEnabled:!1},{columnName:"name",editingEnabled:!1},{columnName:"buildingElementName",editingEnabled:!1},{columnName:"FU",editingEnabled:!1},{columnName:"materialCat",editingEnabled:!1},{columnName:"RSL_mi",editingEnabled:!1},{columnName:"dataType",editingEnabled:!1},{columnName:"dataYear",editingEnabled:!1},{columnName:"comments",editingEnabled:!1}];var yt=vt,Ot=Object(b.a)((function(e){return Object(f.a)({cell:{padding:e.spacing(1)},indentCell:{padding:0},groupButton:{height:e.spacing(4),width:e.spacing(4)},lookupEditCell:{padding:e.spacing(1)},inputRoot:{width:"100%"},selectMenu:{position:"absolute !important"}})})),At=function(e){var t=e.style,n=e.colSpan,a=e.row,l=(e.column,e.expanded),r=e.onToggle,o=(e.classes,e.children),c=(e.className,e.tableRow,e.tableColumn,e.contentComponent,e.iconComponent,e.indentCellComponent,e.inlineSummaryComponent,e.inlineSummaryItemComponent,e.summaryCellComponent,e.summaryItemComponent,e.containerComponent,e.inlineSummaries,e.getMessage,Object(B.a)(e,["style","colSpan","row","column","expanded","onToggle","classes","children","className","tableRow","tableColumn","contentComponent","iconComponent","indentCellComponent","inlineSummaryComponent","inlineSummaryItemComponent","summaryCellComponent","summaryItemComponent","containerComponent","inlineSummaries","getMessage"])),u=Ot();return i.a.createElement(qe.a,Object.assign({colSpan:n,style:t,className:u.cell,onClick:function(){return r()}},c),i.a.createElement(p.a,{container:!0,alignItems:"center",justify:"space-around"},i.a.createElement(p.a,{item:!0,xs:2},i.a.createElement(be.a,{className:u.groupButton},l?i.a.createElement(Ve.a,null):i.a.createElement(Oe.a,null))),i.a.createElement(p.a,{item:!0,xs:10},i.a.createElement("span",null,i.a.createElement("strong",null,o||a.value)))))},jt=function(e){e.style;var t=e.colSpan,n=(e.row,e.column,e.expanded,e.onToggle),a=(e.classes,e.children),l=(e.className,e.tableRow,e.tableColumn,e.contentComponent,e.iconComponent,e.indentCellComponent,e.inlineSummaryComponent,e.inlineSummaryItemComponent,e.summaryCellComponent,e.summaryItemComponent,e.containerComponent,e.inlineSummaries,e.getMessage,Object(B.a)(e,["style","colSpan","row","column","expanded","onToggle","classes","children","className","tableRow","tableColumn","contentComponent","iconComponent","indentCellComponent","inlineSummaryComponent","inlineSummaryItemComponent","summaryCellComponent","summaryItemComponent","containerComponent","inlineSummaries","getMessage"])),r=Ot(),o="";switch(a.props.columnSummaries[0].type){case"sum":o="Sum";break;case"avg":o="Average";break;case"staticValue":o="Static"}return i.a.createElement(qe.a,Object.assign({colSpan:t,onClick:function(){return n()},className:r.cell},l),"Static"===o?i.a.createElement("span",null,a):i.a.createElement(re.a,{title:o},i.a.createElement("span",null,a)))},St=function(e){return e.idmaterialInventory},Ct=function(e){return e.map((function(e){return{columnName:e,predicate:function(){return!1}}}))},_t=function(e){Object(v.b)();var t=Object(r.useState)(yt.columns),n=Object(u.a)(t,1)[0],a=Object(r.useState)(yt.columnExtensions),l=Object(u.a)(a,1)[0],o=Object(r.useState)(yt.defaultHiddenColumnNames),c=Object(u.a)(o,1)[0],m=Object(r.useState)(yt.tableColumnVisibilityColumnExtensions),s=Object(u.a)(m,1)[0],d=Object(r.useState)(yt.decimalColumns),E=Object(u.a)(d,1)[0],g=Object(r.useState)(),b=Object(u.a)(g,2),f=(b[0],b[1]),p=Object(r.useCallback)(N.a.debounce((function(e){console.log("Changed search term: ",e),f(e)}),300),[]),h=Object(r.useState)(Ct(c)),y=Object(u.a)(h,2),O=y[0],A=y[1],j=Object(r.useState)([]),_=Object(u.a)(j,2),w=(_[0],_[1],Object(r.useState)(["name"])),B=Object(u.a)(w,1)[0],T=Object(r.useState)([{columnName:"materialCat"}]),M=Object(u.a)(T,1)[0],L=Object(r.useState)(yt.groupSummaryItems),k=Object(u.a)(L,1)[0];return i.a.createElement(C.b,{rows:e.materials,columns:n,getRowId:St},i.a.createElement(I,{for:E}),i.a.createElement(S.q,{onValueChange:p}),i.a.createElement(S.k,{columnExtensions:O}),i.a.createElement(S.s,null),i.a.createElement(S.m,null),i.a.createElement(S.i,{grouping:M}),i.a.createElement(S.u,{groupItems:k}),i.a.createElement(S.l,null),i.a.createElement(S.n,{calculator:function(e,t,n){if("staticValue"===e){if(!t.length)return null;var a=n(t[0]);return t.every((function(e){return n(e)===a}))?a:"..."}return S.n.defaultCalculator(e,t,n)}}),i.a.createElement(C.n,{columnExtensions:l}),i.a.createElement(C.i,{showSortingControls:!0,sortLabelComponent:x}),i.a.createElement(C.h,{cellComponent:At,summaryCellComponent:jt,summaryItemComponent:function(e){var t,n=e.value;return t="string"===typeof n?n:n&&n>0?parseFloat(n).toLocaleString():"0",i.a.createElement("strong",null,t)}}),i.a.createElement(C.k,null),i.a.createElement(C.g,{leftColumns:B}),i.a.createElement(C.e,{defaultHiddenColumnNames:c,columnExtensions:s,onHiddenColumnNamesChange:function(e){return A(Ct(e))}}),i.a.createElement(C.m,null),i.a.createElement(C.c,{showSortingControls:!0}),i.a.createElement(C.d,null),i.a.createElement(C.a,null))},wt=n(162),Nt=Object(b.a)((function(e){return Object(f.a)({container:{position:"relative"},chart:{overflowX:"hidden"},argumentAxisLabel:{fill:"#767676"},button:{position:"absolute",top:"12px",left:"18px"}})})),Bt=function(e){var t=Object(r.useRef)(null),n={force:!0,animate:!0},a=Object(r.useRef)(new ResizeObserver((function(e){var a;console.log("Size changed"),null===t||void 0===t||null===(a=t.current)||void 0===a||a.instance.render(n)}))),l=Object(r.useCallback)((function(e){null!==e?a.current.observe(e):a.current&&a.current.disconnect()}),[a.current]),o=Object(r.useState)([]),c=Object(u.a)(o,2),m=c[0],s=c[1],d=Object(r.useState)(!0),E=Object(u.a)(d,2),g=E[0],b=E[1],f=Object(r.useState)(""),p=Object(u.a)(f,2),h=p[0],v=p[1],y=Object(r.useState)(0),A=Object(u.a)(y,2),j=A[0],S=A[1];Object(r.useEffect)((function(){var e=C("");s(e),S(30*e.length+200)}),[e.data]);var C=function(t){return e.data.filter((function(e){return e.materialCat===t}))},_=Nt();return i.a.createElement(O.a,{className:_.container,ref:l},i.a.createElement(re.a,{title:"Back"},i.a.createElement("span",null,i.a.createElement(be.a,{className:_.button,onClick:function(){g||(b(!0),v(""),s(C("")))},disabled:g},i.a.createElement(pe.a,null)))),i.a.createElement(xe.Chart,{className:_.chart,dataSource:m,palette:"Material",rotated:!0,onPointClick:function(e){g&&(b(!1),v(e.target.originalArgument),s(C(e.target.originalArgument)))},onDrawn:function(e){g&&(e.element.querySelectorAll(".dxc-markers rect").forEach((function(e){e.style.cursor="pointer"})),e.element.querySelector(".dxc-arg-elements").childNodes.forEach((function(e){e.style.cursor="pointer"})))},ref:t},""===h?i.a.createElement(xe.Title,{text:"Click on a bar to see materials",horizontalAlignment:"center",font:{size:16,color:wt.a[500],weight:400}}):i.a.createElement(xe.Title,{text:h,horizontalAlignment:"center",font:{size:18,color:"black",weight:500,family:'Roboto, "Segoe UI Light", "Helvetica Neue Light", "Segoe UI", "Helvetica Neue", "Trebuchet MS", Verdana, sans-serif'}}),i.a.createElement(xe.Size,{height:j>600?j:600}),i.a.createElement(xe.Margin,{top:10,bottom:10,left:30,right:30}),i.a.createElement(xe.CommonSeriesSettings,{argumentField:"name",type:"stackedBar",barWidth:50,hoverMode:"allArgumentPoints"}),i.a.createElement(xe.Series,{valueField:"A1A3",name:"A1-A3"}),i.a.createElement(xe.Series,{valueField:"A4",name:"A4"}),i.a.createElement(xe.Series,{valueField:"B4_m",name:"B4 (m)"}),i.a.createElement(xe.Series,{valueField:"B4_t",name:"B4 (t)"}),i.a.createElement(xe.ValueAxis,null,i.a.createElement(xe.Title,{text:"kgCO2e",font:{size:14}})),i.a.createElement(xe.ArgumentAxis,null,i.a.createElement(xe.Label,{customizeText:we})),i.a.createElement(xe.Legend,{verticalAlignment:"bottom",horizontalAlignment:"center",itemTextPosition:"top",customizeHint:ke}),i.a.createElement(xe.Tooltip,{enabled:!0,location:"edge",customizeTooltip:function(e){return{text:"<b>".concat(e.seriesName,"</b>\n ").concat(e.valueText)}},zIndex:1200,arrowLength:6,format:{format:function(e){return parseFloat(e).toLocaleString()}},interactive:!0})))},Tt=(Object(b.a)((function(e){return Object(f.a)({breadCrumbs:{marginBottom:e.spacing(2)},chart:{padding:e.spacing(2)},elementTable:{padding:e.spacing(2)}})})),function(e){Object(v.b)();var t=Object(v.c)((function(e){return e.displayMode})),n=(Object(v.c)((function(e){return e.materialInventory})),Object(r.useState)([])),a=Object(u.a)(n,2),l=a[0],o=a[1],c=Object(r.useState)([]),m=Object(u.a)(c,2),s=m[0],d=m[1];return Object(r.useEffect)((function(){var t=Te(e.materials),n=Be(t),a=function(e){var t=[];return e.reduce((function(e,n){return e[n.materialCat]||(e[n.materialCat]={name:n.materialCat,A1A3:0,A4:0,B4_m:0,B4_t:0,materialCat:""},t.push(e[n.materialCat])),e[n.materialCat].A1A3+=n.A1A3,e[n.materialCat].A4+=n.A4,e[n.materialCat].B4_m+=n.B4_m,e[n.materialCat].B4_t+=n.B4_t,e}),{}),t}(n),l=n.concat(a),r=Ne(l);o(t),d(r)}),[]),i.a.createElement("div",null,i.a.createElement(p.a,{container:!0,spacing:3},i.a.createElement(p.a,{item:!0,xs:!0},"table"===t?i.a.createElement(O.a,null,i.a.createElement(_t,{materials:l})):i.a.createElement(Bt,{data:s}))))}),It=Object(b.a)((function(e){return Object(f.a)({formControl:{marginRight:e.spacing(2),minWidth:180}})})),Mt=function(e){var t=Object(v.b)(),n=Object(v.c)((function(e){return e.selectedBuildings})),l=Object(v.c)((function(e){return e.materialInventory})),o=Object(v.c)((function(e){return e.isSimulationModeActive})),m=Object(v.c)((function(e){return e.materialsGroupBy})),s=Object(v.c)((function(e){return e.displayMode})),d=Object(r.useState)(!1),E=Object(u.a)(d,2),g=E[0],b=E[1],f=Object(r.useState)(!1),O=Object(u.a)(f,2),j=(O[0],O[1]),S=function(e){j(e)};Object(r.useEffect)((function(){n.length&&C()}),[n]);var C=function(){var e=n[0].idbuildings,a="https://us-central1-blcad-gui.cloudfunctions.net/api",l="".concat(a,"/building_elements/").concat(e),r="".concat(a,"/material_inventory/").concat(e);g||(b(!0),Promise.all([fetch(l),fetch(r)]).then((function(e){return Promise.all(e.map((function(e){return e.json()})))})).then((function(n){Q(String(e)).then((function(e){var a,l={};e.exists&&(l=null!==(a=e.data())&&void 0!==a?a:{});var r=n[0],i=n[1],o=Te(i),u=Ie(o,l);c.a.unstable_batchedUpdates((function(){t(y.elementAndMaterialActions.setBuildingElements(r)),t(y.elementAndMaterialActions.setMaterialInventory(i)),t(y.elementAndMaterialActions.setMaterialProducts(o)),t(y.elementAndMaterialActions.setSimulatedData(l)),t(y.elementAndMaterialActions.setSimulatedMaterialProducts(u)),b(!1)}))})).catch((function(e){console.log("Error getting simulation data:",e),b(!1)}))})).catch((function(){return b(!1)}))),Q(String(e))},_=It();return i.a.createElement("div",null,i.a.createElement(p.a,{container:!0,spacing:3,alignItems:"center",justify:"space-between"},i.a.createElement(p.a,{item:!0},i.a.createElement(h.a,{variant:"h5",color:"textSecondary",gutterBottom:!0},"Materials")),i.a.createElement(p.a,{item:!0},i.a.createElement(re.a,{title:"Disable simulation mode to select different grouping",disableFocusListener:!o,disableHoverListener:!o,disableTouchListener:!o},i.a.createElement(ne.a,{className:_.formControl,variant:"outlined"},i.a.createElement(J.a,null,"Group by"),i.a.createElement(le.a,{displayEmpty:!0,value:m,label:"Group by",onChange:function(e){t(y.uiActions.setMaterialsGroupBy(e.target.value))},onMouseEnter:function(){return S(!0)},onMouseLeave:function(){return S(!1)},onOpen:function(){return S(!1)}},i.a.createElement(Z.a,{value:a.Product},"Product"),i.a.createElement(Z.a,{value:a.BuildingElement,disabled:o},"Building element"),i.a.createElement(Z.a,{value:a.Category,disabled:o},"Category")))),i.a.createElement(ne.a,{component:"fieldset"},i.a.createElement(ae.a,{component:"legend",color:"secondary"},"Display mode"),i.a.createElement(te.a,{value:s,onChange:function(e){t(y.uiActions.setDisplayMode(e.target.value))},row:!0},i.a.createElement(A.a,{value:"table",control:i.a.createElement(ee.a,null),label:"Table"}),i.a.createElement(A.a,{value:"chart",control:i.a.createElement(ee.a,null),label:"Chart"}))))),g||e.parentIsLoading?i.a.createElement(ie.a,{style:{marginTop:"65px"},variant:"rect",height:350}):m===a.BuildingElement?i.a.createElement(ht,null):m===a.Product?i.a.createElement(gt,{materials:l}):i.a.createElement(Tt,{materials:l}))},Lt=Object(b.a)((function(e){return Object(f.a)({chart:{height:200,padding:e.spacing(2)}})})),xt=function(){var e=Object(r.useRef)(null),t={force:!0,animate:!0},n=Object(r.useRef)(new ResizeObserver((function(n){var a;console.log("Size changed"),null===e||void 0===e||null===(a=e.current)||void 0===a||a.instance.render(t)}))),a=Object(r.useCallback)((function(e){null!==e?n.current.observe(e):n.current&&n.current.disconnect()}),[n.current]),l=Object(v.c)((function(e){return e.selectedBuildings})),o=Object(v.c)((function(e){return e.simulatedMaterialProducts})),c=Object(v.c)((function(e){return e.isSimulationModeActive})),m=Object(v.c)((function(e){return e.simulatedData})),s=Object(v.c)((function(e){return e.EEMetric})),d=Object(r.useState)([]),g=Object(u.a)(d,2),b=g[0],f=g[1];Object(r.useEffect)((function(){var e,t,n,a,r={A1A3:Number(l[0].A1A3)||0,A4:Number(l[0].A4)||0,B4_m:Number(l[0].B4_m)||0,B4_t:Number(l[0].B4_t)||0};c?(e=p("A1A3")?h("A1A3"):r.A1A3,t=p("A4")?h("A4"):r.A4,n=p("B4_m")?h("B4_m"):r.B4_m,a=p("B4_t")?h("B4_t"):r.B4_t):(e=Number(l[0].A1A3)||0,t=Number(l[0].A4)||0,n=Number(l[0].B4_m)||0,a=Number(l[0].B4_t)||0),s.perSqM&&(e/=l[0].floor_area,t/=l[0].floor_area,n/=l[0].floor_area,a/=l[0].floor_area),s.perYear&&(e/=l[0].lifetime,t/=l[0].lifetime,n/=l[0].lifetime,a/=l[0].lifetime),f([{lcaPhase:"A1-A3",gwp:e},{lcaPhase:"A4",gwp:t},{lcaPhase:"B4 (m)",gwp:n},{lcaPhase:"B4 (t)",gwp:a}])}),[l[0],c,m,s]);var p=function(e){return Object.values(m).some((function(t){return e in t}))},h=function(e){return o.reduce((function(t,n){return t+(Number(Object(De.getKeyValue)(e,n))||0)}),0)},y=function(e){switch(e){case"A1-A3":return"A1A3";case"A4":return"A4";case"B4 (m)":return"B4_m";case"B4 (t)":return"B4_t";default:return""}},A="kgCO2e";s.perSqM&&(A+="/m\xb2"),s.perYear&&(A+="/year");var j=Lt();return i.a.createElement(O.a,{ref:a},i.a.createElement(xe.Chart,{className:j.chart,dataSource:b,palette:"Material",onDrawn:function(e){c&&e.element.querySelector(".dxc-arg-elements").childNodes.forEach((function(e){var t=y(e.innerHTML);p(t)&&(e.style.fill=E.palette.simulated.main,e.style.fontWeight=500)}))},ref:e},i.a.createElement(xe.CommonSeriesSettings,{argumentField:"lcaPhase",valueField:"gwp",type:"bar",showInLegend:!1,ignoreEmptyPoints:!0}),i.a.createElement(xe.ValueAxis,null,i.a.createElement(xe.Title,{text:A,font:{size:12}})),i.a.createElement(xe.ArgumentAxis,null),i.a.createElement(xe.SeriesTemplate,{nameField:"lcaPhase"}),i.a.createElement(xe.Tooltip,{enabled:!0,zIndex:1200,arrowLength:6,format:{format:function(e){return parseFloat(e).toLocaleString()}},interactive:!0})))},kt=Object(oe.a)({switchBase:{"&$checked":{color:E.palette.simulated.main},"&$checked + $track":{backgroundColor:E.palette.simulated.main}},checked:{},track:{}})(j.a),Rt=function(){var e=Object(v.b)(),t=Object(v.c)((function(e){return e.isSimulationModeActive})),n=Object(v.c)((function(e){return e.materialsGroupBy}));return i.a.createElement(A.a,{control:i.a.createElement(kt,{checked:t,onChange:function(){e(y.uiActions.toggleSimulationMode()),n!==a.Product&&e(y.uiActions.setMaterialsGroupBy(a.Product))},name:"simulationChecked",color:"primary"}),label:"Simulation mode"})},Pt=n(267),Dt=n.n(Pt),Ft=n(272),Ut=n(468),Gt=n(539),zt=n(519),Wt=n(538),Vt=Object(b.a)((function(e){return Object(f.a)({root:{width:"100%",maxWidth:360,minWidth:220},content:{width:350,padding:e.spacing(2)},formControl:{marginTop:e.spacing(3)}})}));var qt=function(e){var t=Object(v.b)(),n=Object(v.c)((function(e){return e.EEMetric})),a=i.a.useState(null),l=Object(u.a)(a,2),r=l[0],o=l[1],c=function(e){t(y.settingsActions.setEEMetric({name:e.target.name,checked:e.target.checked}))},m=n.perSqM,s=n.perYear;return Vt(),i.a.createElement("div",null,i.a.createElement(re.a,{title:"Metric settings"},i.a.createElement(be.a,{"aria-label":"help",onClick:function(e){o(e.currentTarget)}},i.a.createElement(Dt.a,{fontSize:e.iconSize}))),i.a.createElement(Ft.a,{id:"simple-menu",anchorEl:r,keepMounted:!0,open:Boolean(r),onClose:function(){o(null)},PaperProps:{style:{width:170}}},i.a.createElement(Wt.a,null,"Metric settings"),i.a.createElement(Ut.a,null,i.a.createElement(zt.a,{id:"switch-list-label-sqm",primary:"Per m\xb2"}),i.a.createElement(Gt.a,null,i.a.createElement(j.a,{edge:"end",checked:m,onChange:c,name:"perSqM"}))),i.a.createElement(Ut.a,null,i.a.createElement(zt.a,{id:"switch-list-label-year",primary:"Per year"}),i.a.createElement(Gt.a,null,i.a.createElement(j.a,{edge:"end",checked:s,onChange:c,name:"perYear"})))))},Ht=Object(b.a)((function(e){return Object(f.a)({buildingSection:{marginBottom:e.spacing(2)},divider:{marginBottom:e.spacing(2)},materialSection:{marginTop:e.spacing(2)},buildingInfoLabels:{fontWeight:"bold"},heading:{marginBottom:e.spacing(1)},content:{padding:e.spacing(2)}})}));var Yt=function(){Object(v.b)();var e=Object(v.c)((function(e){return e.selectedBuildings})),t=(Object(v.c)((function(e){return e.isSimulationModeActive})),e[0]),n=t.building_identifier,a=t.building_name,l=t.project,r=t.typology,o=t.construction_type,c=t.floor_area,u=(t.A1A3,t.A4,t.B4_m,t.B4_t,Ht());return i.a.createElement("div",{className:u.content},i.a.createElement(p.a,{container:!0,spacing:3,className:u.buildingSection},i.a.createElement(p.a,{item:!0,container:!0,alignItems:"flex-start",justify:"space-between"},i.a.createElement(p.a,{item:!0,xs:8},i.a.createElement(h.a,{variant:"h4",color:"textPrimary"},a),i.a.createElement(h.a,{variant:"subtitle1",color:"textSecondary",gutterBottom:!0},n)),i.a.createElement(p.a,{item:!0},i.a.createElement(Rt,null))),i.a.createElement(p.a,{item:!0,xs:6},i.a.createElement(p.a,{container:!0,alignItems:"center",justify:"space-between",className:u.heading},i.a.createElement(p.a,{item:!0},i.a.createElement(h.a,{variant:"h5",color:"textSecondary"},"General info"))),i.a.createElement("div",null,i.a.createElement(K.a,{key:l||"project",inputProps:{readOnly:!0,disabled:!0},InputProps:{disableUnderline:!0},fullWidth:!0,label:"Project",name:"project",margin:"dense",defaultValue:l||"nil"}),i.a.createElement(K.a,{key:r||"typology",inputProps:{readOnly:!0,disabled:!0},InputProps:{disableUnderline:!0},fullWidth:!0,label:"Typology",name:"typology",margin:"dense",defaultValue:r||"nil"}),i.a.createElement(K.a,{key:o||"c_type",inputProps:{readOnly:!0,disabled:!0},InputProps:{disableUnderline:!0},fullWidth:!0,label:"Construction type",name:"construction_type",margin:"dense",defaultValue:o||"nil"}),i.a.createElement(K.a,{key:c||"f_area",inputProps:{readOnly:!0,disabled:!0},InputProps:{disableUnderline:!0},fullWidth:!0,label:"Floor area",name:"floor_area",margin:"dense",defaultValue:c+" m\xb2"||!1}))),i.a.createElement(p.a,{item:!0,xs:6},i.a.createElement(p.a,{container:!0,alignItems:"center",justify:"space-between",className:u.heading},i.a.createElement(p.a,{item:!0},i.a.createElement(h.a,{variant:"h5",color:"textSecondary"},"Embodied emissions")),i.a.createElement(p.a,{item:!0},i.a.createElement(qt,{iconSize:"default"}))),i.a.createElement(xt,null))),i.a.createElement(p.a,{container:!0,spacing:3},i.a.createElement(p.a,{item:!0,xs:!0},i.a.createElement(Y.a,{variant:"middle",light:!0,className:u.divider}),i.a.createElement(Mt,null))))},Kt=Object(b.a)((function(e){return Object(f.a)({chart:{padding:e.spacing(2)}})})),Xt=function(){var e=Object(r.useRef)(null),t={force:!0,animate:!0},n=Object(r.useRef)(new ResizeObserver((function(n){var a;console.log("Size changed"),null===e||void 0===e||null===(a=e.current)||void 0===a||a.instance.render(t)}))),a=Object(r.useCallback)((function(e){null!==e?n.current.observe(e):n.current&&n.current.disconnect()}),[n.current]),l=Object(v.c)((function(e){return e.selectedBuildings})),o=Object(v.c)((function(e){return e.EEMetric})),c=Object(r.useState)([]),m=Object(u.a)(c,2),s=m[0],d=m[1];Object(r.useEffect)((function(){var e=[];l.forEach((function(t){var n=Number(t.A1A3)||0,a=Number(t.A4)||0,l=Number(t.B4_m)||0,r=Number(t.B4_t)||0;o.perSqM&&(n/=t.floor_area,a/=t.floor_area,l/=t.floor_area,r/=t.floor_area),o.perYear&&(n/=t.lifetime,a/=t.lifetime,l/=t.lifetime,r/=t.lifetime);var i={name:t.building_name,identifier:t.building_identifier,a1a3:n,a4:a,b4m:l,b4t:r};e.push(i)})),d(e.reverse())}),[l,o]);var E="kgCO2e";o.perSqM&&(E+="/m\xb2"),o.perYear&&(E+="/year");var g=Kt();return i.a.createElement(O.a,{ref:a},i.a.createElement(xe.Chart,{className:g.chart,dataSource:s,palette:"Material",rotated:!0,ref:e},i.a.createElement(xe.Size,{height:500}),i.a.createElement(xe.CommonSeriesSettings,{argumentField:"name",type:"stackedBar",barWidth:60}),i.a.createElement(xe.Series,{valueField:"a1a3",name:"A1-A3"}),i.a.createElement(xe.Series,{valueField:"a4",name:"A4"}),i.a.createElement(xe.Series,{valueField:"b4m",name:"B4 (m)"}),i.a.createElement(xe.Series,{valueField:"b4t",name:"B4 (t)"}),i.a.createElement(xe.ValueAxis,null,i.a.createElement(xe.Title,{text:E,font:{size:14}})),i.a.createElement(xe.ArgumentAxis,null,i.a.createElement(xe.Label,{customizeText:function(e){if(e.value.length>17){var t=e.value.split(" ");return t.length>2?t.slice(0,2).join(" ")+"\n"+t.slice(2).join(" "):t.join("\n")}return e.value}})),i.a.createElement(xe.Legend,{verticalAlignment:"bottom",horizontalAlignment:"center",itemTextPosition:"top",customizeHint:ke}),i.a.createElement(xe.Tooltip,{enabled:!0,location:"edge",customizeTooltip:function(e){return{text:"<b>".concat(e.seriesName,"</b>\n ").concat(e.valueText)}},zIndex:1200,arrowLength:6,format:{format:function(e){return parseFloat(e).toLocaleString()}}})))},$t=Object(b.a)((function(e){return Object(f.a)({content:{padding:e.spacing(2)},heading:{marginBottom:e.spacing(1)}})})),Qt=function(){Object(v.b)(),Object(v.c)((function(e){return e.selectedBuildings}));var e=$t();return i.a.createElement("div",{className:e.content},i.a.createElement(p.a,{container:!0,alignItems:"center",justify:"space-between",className:e.heading},i.a.createElement(p.a,{item:!0},i.a.createElement(h.a,{variant:"h5",color:"textSecondary"},"Embodied emissions")),i.a.createElement(p.a,{item:!0},i.a.createElement(qt,{iconSize:"default"}))),i.a.createElement(Xt,null))},Jt=Object(b.a)((function(e){return Object(f.a)({buildingSection:{marginBottom:e.spacing(2)},divider:{marginBottom:e.spacing(2)},elementSection:{marginTop:e.spacing(2)},buildingInfoLabels:{fontWeight:"bold"},noSelectionContainer:{height:"100vh"},drawer:{width:"50vw",flexShrink:0},drawerPaper:{width:"50vw",overflowY:"scroll"},content:{padding:e.spacing(2)}})})),Zt=function(){Object(v.b)();var e=Object(v.c)((function(e){return e.selectedBuildings})),t=Object(v.c)((function(e){return e.canSelectMultipleBuildings})),n=Jt();return i.a.createElement("div",null,e.length?t?i.a.createElement(Qt,null):i.a.createElement(Yt,null):i.a.createElement(p.a,{container:!0,justify:"center",alignItems:"center",className:n.noSelectionContainer},i.a.createElement(p.a,{item:!0,xs:12},i.a.createElement(h.a,{variant:"h5",color:"textSecondary",align:"center"},"Select a building"))))},en=n(269),tn=n.n(en),nn=n(268),an=n.n(nn),ln=n(518),rn=Object(oe.a)((function(e){return Object(f.a)({root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}})}))((function(e){var t=e.children,n=e.classes,a=e.onClose,l=Object(B.a)(e,["children","classes","onClose"]);return i.a.createElement(Ze.a,Object.assign({disableTypography:!0,className:n.root},l),i.a.createElement(h.a,{variant:"h6"},t),a?i.a.createElement(be.a,{"aria-label":"close",className:n.closeButton,onClick:a},i.a.createElement(an.a,null)):null)})),on=Object(oe.a)((function(e){return{root:{padding:e.spacing(2)}}}))(Je.a),cn=Object(oe.a)((function(e){return{root:{margin:0,padding:e.spacing(1)}}}))(Qe.a),un=[{term:"A1-A3",definition:"Material production"},{term:"A4",definition:"Transportation of materials to the building site"},{term:"B4 (m)",definition:"Material replacements throughout the study lifetime period"},{term:"B4 (t)",definition:"Transportation of material replacements"}];var mn=function(){var e=i.a.useState(!1),t=Object(u.a)(e,2),n=t[0],a=t[1],l=function(){a(!1)};return i.a.createElement("div",null,i.a.createElement(re.a,{title:"Help"},i.a.createElement(be.a,{"aria-label":"help",onClick:function(){a(!0)}},i.a.createElement(tn.a,{fontSize:"large"}))),i.a.createElement($e.a,{onClose:l,open:n},i.a.createElement(rn,{id:"customized-dialog-title",onClose:l},"Help"),i.a.createElement(on,{dividers:!0},i.a.createElement(h.a,{variant:"h6"},"How to use"),i.a.createElement(h.a,null,i.a.createElement("ul",null,i.a.createElement("li",null,"Click on a row to see more details about the building, including its ",i.a.createElement("b",null,"materials")," and ",i.a.createElement("b",null,"building elements"),"."),i.a.createElement("li",null,"Turn on ",i.a.createElement("b",null,"simulation mode")," (",i.a.createElement("i",null,"top-right in building details"),") to edit a building's materials and see how the changes affect the rest of the building."),i.a.createElement("li",null,"Select multiple rows to ",i.a.createElement("b",null,"compare")," the emission values of different buildings."))),i.a.createElement(h.a,{variant:"h6"},"Terminology"),i.a.createElement(ln.a,null,un.map((function(e,t){return i.a.createElement(Ut.a,{key:t,divider:t<un.length-1},i.a.createElement(p.a,{container:!0,spacing:1,alignItems:"center"},i.a.createElement(p.a,{item:!0,xs:2},i.a.createElement(h.a,{variant:"body1",color:"textSecondary"},e.term)),i.a.createElement(p.a,{item:!0,xs:10},i.a.createElement(h.a,{variant:"body1"},e.definition))))})))),i.a.createElement(cn,null,i.a.createElement(Xe.a,{autoFocus:!0,onClick:l,color:"primary"},"OK"))))},sn=Object(b.a)((function(e){return Object(f.a)({container:{height:"100vh"},titleBar:{marginBottom:e.spacing(2)},content:{padding:e.spacing(2),boxSizing:"border-box"}})}));var dn=function(){var e=sn();return i.a.createElement(g.a,{className:e.container,orientation:"vertical"},i.a.createElement(g.b,{className:e.content,minSize:400},i.a.createElement(p.a,{container:!0,alignItems:"center",justify:"space-between",spacing:2,className:e.titleBar},i.a.createElement(p.a,{item:!0},i.a.createElement(h.a,{variant:"h2"},"bLCAd Tool - GUI")),i.a.createElement(p.a,{item:!0},i.a.createElement(mn,null))),i.a.createElement("div",{style:{height:"80vh"}},i.a.createElement(H,null))),i.a.createElement(g.c,null),i.a.createElement(g.b,{minSize:400},i.a.createElement("div",null,i.a.createElement(Zt,null))))},En=n(555),gn=n(543),bn=n(541),fn=n(545),pn=n(270),hn=n.n(pn),vn=n(542);function yn(){return i.a.createElement(h.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",i.a.createElement(bn.a,{color:"inherit",href:"https://github.com/ericvel"},"Eric Veliyulin")," ",(new Date).getFullYear(),".")}var On=Object(b.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));var An=function(){Object(v.b)();var e=Object(r.useState)(""),t=Object(u.a)(e,2),n=t[0],a=t[1],l=Object(r.useState)(""),o=Object(u.a)(l,2),c=o[0],s=o[1],d=Object(r.useState)(null),E=Object(u.a)(d,2),g=E[0],b=E[1],f=function(e){var t=e.currentTarget,n=t.name,l=t.value;"email"===n?a(l):"password"===n&&s(l)},p=On();return i.a.createElement(vn.a,{component:"main",maxWidth:"xs"},i.a.createElement(gn.a,null),i.a.createElement("div",{className:p.paper},i.a.createElement(En.a,{className:p.avatar},i.a.createElement(hn.a,null)),i.a.createElement(h.a,{component:"h1",variant:"h5"},"Sign in"),null!==g&&i.a.createElement(h.a,{color:"error"},"Error: ",g),i.a.createElement("form",{className:p.form,noValidate:!0,onSubmit:function(e){e.preventDefault()}},i.a.createElement(K.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,onChange:function(e){return f(e)}}),i.a.createElement(K.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:function(e){return f(e)}}),i.a.createElement(Xe.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:p.submit,onClick:function(e){!function(e,t,n){e.preventDefault(),m.a.auth().setPersistence(m.a.auth.Auth.Persistence.SESSION).then((function(){return m.a.auth().signInWithEmailAndPassword(t,n)})).catch((function(e){switch(e.code){case"auth/invalid-email":b("The email address is invalid");break;case"auth/wrong-password":b("The password is invalid");break;case"auth/user-not-found":b("The user does not exist")}console.error("Error signing in: ",e)}))}(e,n,c)}},"Sign In"))),i.a.createElement(fn.a,{mt:8},i.a.createElement(yn,null)))};var jn=function(){var e=Object(r.useState)(!1),t=Object(u.a)(e,2),n=t[0],a=t[1];return m.a.auth().onAuthStateChanged((function(e){a(!!e)})),n?i.a.createElement(s.a,{theme:E},i.a.createElement(dn,null)):i.a.createElement(An,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(457);var Sn=n(106),Cn=n(56),_n={idbuilding_elements:0,idlevels:0,name:"",hierarchy:0,A1A3:null,A4:null,B4_m:null,B4_t:null,idparent:null},wn=n(117),Nn={perSqM:!0,perYear:!1},Bn=Object(Sn.combineReducers)({buildings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BUILDINGS":return t.payload;default:return e}},selectedBuildings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_BUILDINGS":return t.payload;case"DESELECT_ALL_BUILDINGS":return[];default:return e}},isCompareDialogOpen:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_COMPARE_DIALOG_OPEN":return!e;default:return e}},buildingElements:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BUILDING_ELEMENTS":return t.payload;default:return e}},materialInventory:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MATERIAL_INVENTORY":return t.payload;default:return e}},selectedBuildingElement:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_n,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_BUILDING_ELEMENT":return t.payload;default:return e}},buildingElementRoute:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TO_ELEMENT_ROUTE":return[].concat(Object(Cn.a)(e),[t.payload]);case"SET_BUILDING_ELEMENT_ROUTE":return t.payload;default:return e}},hoveredBuildingElement:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"HOVER_BUILDING_ELEMENT":return t.payload;case"STOP_HOVER_BUILDING_ELEMENT":return null;default:return e}},materialsGroupBy:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.Product,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CONTENT_TYPE":return t.payload;default:return e}},displayMode:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"table",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DISPLAY_MODE":return t.payload;default:return e}},canSelectMultipleBuildings:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_CAN_SELECT_MULTIPLE":return!e;default:return e}},isSimulationModeActive:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_SIMULATION_MODE":return!e;default:return e}},EEMetric:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_EE_METRIC":return Object(Se.a)(Object(Se.a)({},e),{},Object(wn.a)({},t.name,t.checked));default:return e}},simulatedData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SIMULATED_DATA":return t.payload;default:return e}},currentUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER":return t.payload;default:return e}},materialProducts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MATERIAL_PRODUCTS":return t.payload;default:return e}},simulatedMaterialProducts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SIMULATED_MATERIAL_PRODUCTS":return t.payload;default:return e}}});n(458);n(459).config();var Tn=Object(Sn.createStore)(Bn,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());c.a.render(i.a.createElement(v.a,{store:Tn},i.a.createElement(jn,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[297,1,2]]]);
//# sourceMappingURL=main.5f9f1fcd.chunk.js.map
{"version":3,"sources":["interfaces/enums.ts","styles/theme.tsx","redux/actions/index.ts","redux/actions/buildingActions.ts","redux/actions/types.ts","redux/actions/uiActions.ts","redux/actions/elementAndMaterialActions.ts","redux/actions/settingsActions.ts","redux/actions/userActions.ts","components/TableUtilities/Formatters.tsx","components/BuildingsTable/ColumnData.tsx","components/LoadingIndicator/LoadingIndicator.tsx","components/AlertSnackbar/AlertSnackbar.tsx","components/BuildingsTable/BuildingsTable.tsx","services/firebase_config.js","services/firebase.tsx","components/MaterialsContainer/BuildingElementsView/ElementsTable/ColumnData.tsx","helpers/materialHelpers.tsx","components/MaterialsContainer/BuildingElementsView/ElementsTable/ElementsTable.tsx","components/ChartComponents/index.tsx","components/MaterialsContainer/BuildingElementsView/ElementsChart/ElementsChart.tsx","components/MaterialsContainer/ProductView/ProductTable/ColumnData.tsx","components/TableUtilities/CustomCells.tsx","components/TableUtilities/SimulationHelpers.tsx","components/TableUtilities/EditPlugin.tsx","components/MaterialsContainer/ProductView/ProductTable/ProductTable.tsx","components/MaterialsContainer/ProductView/ProductChart/ProductChart.tsx","components/MaterialsContainer/ProductView/ProductView.tsx","components/MaterialsContainer/BuildingElementsView/BuildingElementsView.tsx","components/MaterialsContainer/CategoryView/CategoryTable/ColumnData.tsx","components/MaterialsContainer/CategoryView/CategoryTable/CustomCells.tsx","components/MaterialsContainer/CategoryView/CategoryTable/CategoryTable.tsx","components/MaterialsContainer/CategoryView/CategoryChart/CategoryChart.tsx","components/MaterialsContainer/CategoryView/CategoryView.tsx","components/MaterialsContainer/MaterialsContainer.tsx","components/BuildingDetails/SingleBuildingView/SingleBuildingChart/SingleBuildingChart.tsx","components/BuildingDetails/SingleBuildingView/SimulationModeSwitch/SimulationModeSwitch.tsx","components/SettingsButton/SettingsButton.tsx","components/BuildingDetails/SingleBuildingView/SingleBuildingView.tsx","components/BuildingDetails/MultipleBuildingsView/MultipleBuildingsChart/MultipleBuildingsChart.tsx","components/BuildingDetails/MultipleBuildingsView/MultipleBuildingsView.tsx","components/BuildingDetails/BuildingDetails.tsx","components/HelpButton/HelpButton.tsx","components/HomePage/HomePage.tsx","components/SignIn/SignIn.tsx","components/App/App.tsx","serviceWorker.js","redux/reducers/elementsAndMaterials.ts","redux/reducers/settings.ts","redux/reducers/index.ts","redux/reducers/buildings.ts","redux/reducers/flags.ts","redux/reducers/ui.ts","redux/reducers/user.ts","index.js"],"names":["GroupBy","LCAPhaseTooltip","theme","createMuiTheme","palette","simulated","main","light","dark","allActions","buildingActions","setBuildings","buildings","type","payload","selectBuildings","deselectAllBuildings","uiActions","setMaterialsGroupBy","groupBy","setDisplayMode","displayMode","toggleCanSelectMultiple","toggleSimulationMode","elementAndMaterialActions","setBuildingElements","buildingElements","setMaterialInventory","materialInventory","selectBuildingElement","buildingElement","addToElementRoute","route","setElementRoute","hoverBuildingElement","elementId","stopHoverBuildingElement","setSimulatedData","simulatedData","setMaterialProducts","materialProducts","setSimulatedMaterialProducts","simulatedMaterialProducts","settingsActions","setEEMetric","eeMetric","name","checked","userActions","setCurrentUser","user","makeStyles","createStyles","simulatedField","color","DecimalFormatter","value","parseFloat","toLocaleString","DecimalTypeProvider","props","formatterComponent","BoldFormatter","BoldTypeProvider","SortLabel","getMessage","column","restProps","message","A1A3","A4","B4","B4m","B4t","B6","B7","ColumnData","columns","title","columnExtensions","columnName","width","wordWrapEnabled","defaultHiddenColumnNames","tableColumnVisibilityColumnExtensions","togglingEnabled","LoadingIndicator","className","CircularProgress","size","thickness","AlertSnackbar","React","useState","open","setOpen","handleClose","event","reason","Snackbar","autoHideDuration","onClose","Alert","severity","elevation","variant","getRowId","row","Object","keys","Root","style","height","getHiddenColumnsFilteringExtensions","hiddenColumnNames","map","predicate","BuildingsTable","dispatch","useDispatch","useSelector","state","loading","setLoading","error","setError","setSearchTerm","TableSelection","COLUMN_TYPE","leftColumns","multipleSwitchChecked","canSelectMultipleBuildings","decimalColumns","handleErrors","response","ok","Error","statusText","useEffect","loadData","URL","process","console","log","fetch","then","json","data","catch","delayedCallback","useCallback","_","debounce","filteringColumnExtensions","setFilteringColumnExtensions","selectedRow","setSelectedRow","Paper","rows","rootComponent","for","onValueChange","selection","onSelectionChange","selectedBuildings","filter","building","includes","idbuildings","lastSelected","find","selected","indexOf","undefined","rowId","length","showSortingControls","sortLabelComponent","selectByRowClick","highlightRow","showSelectionColumn","onHiddenColumnNamesChange","FormControlLabel","control","Switch","onChange","label","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","firebase","initializeApp","auth","firestore","db","getSimulatedDataFromDb","buildingId","username","currentUser","email","collection","doc","get","getChildElements","parentElement","childElements","element","idparent","idlevels","getElementMaterials","elementMaterials","material","idbuilding_elements","wrapArgumentAxisLabel","wordArray","split","breakPoint","Math","ceil","slice","join","sortByEE","chartData","sort","a","b","B4_m","B4_t","createMaterialChartData","materials","idmaterials","sourceType","RSL_mi","source","dataType","dataYear","density","EEf_A1A3","RSL","comments","parentId","groupByMaterial","materialsGrouped","reduce","res","idmaterialInventory","quantity","buildingElementName","push","mergeSimulatedDataIntoMaterialProducts","materialRows","changedRows","useStyles","customRow","backgroundColor","cursor","ElementsTable","selectedBuildingElement","boldColumns","handleRowClick","commandComponents","edit","onExecute","Tooltip","IconButton","onClick","onCommitChanges","rowComponent","Row","id","showEditCommand","commandComponent","CommandButton","customizeHint","e","seriesName","chart","padding","spacing","argumentAxisLabel","fill","ElementsChart","chartRef","useRef","renderOptions","force","animate","resizeObserver","ResizeObserver","entries","current","instance","render","resizedContainerRef","container","observe","disconnect","setChartData","forEach","dataEntry","String","Number","sortedChartData","classes","ref","dataSource","rotated","onPointClick","point","target","clickedElementId","el","onDrawn","querySelectorAll","querySelector","childNodes","argumentField","barWidth","hoverMode","valueField","text","font","customizeText","verticalAlignment","horizontalAlignment","itemTextPosition","enabled","location","customizeTooltip","arg","valueText","zIndex","arrowLength","format","interactive","groupSummaryItems","showInGroupFooter","alignByColumn","editingStateColumnExtensions","editingEnabled","EditCell","cell","indentCell","groupButton","lookupEditCell","inputRoot","selectMenu","position","editCell","paddingTop","paddingBottom","children","Cell","SimulatedFieldCell","fontWeight","roundTo","num","places","factor","round","labelAsterisk","fontSize","subtitleAsterisk","sourceTypes","Popup","onApplyChanges","onCancelChanges","originalRow","setOriginalRow","setSourceType","setA1A3","nonSimulatedRow","product","Dialog","DialogTitle","disableTypography","Typography","component","noWrap","DialogContent","Grid","item","xs","FormGroup","TextField","select","required","margin","simulatedValue","emissionNumber","textFieldEvent","InputLabelProps","asterisk","option","MenuItem","key","disabled","materialCat","InputProps","startAdornment","InputAdornment","FU","enterDelay","placement","DialogActions","Button","PopupEditing","memo","popupComponent","editedRow","editingRowIds","createRowChange","rowChanges","changeRow","commitChangedRows","stopEditRows","cancelChangedRows","targetRow","rowIds","changeArgs","change","Command","CustomTreeCell","ProductTable","isSimulationModeActive","setRows","expandedRowIds","setExpandedRowIds","TableEditColumn","leftFixedColumns","onExpandedRowIdsChange","getChildRows","rootRows","childRows","r","changed","changedRowId","values","updatedSimulatedData","getKeyValue","updatedSimulatedMaterialProducts","set","writeSimulatedDataToDb","cellComponent","MaterialProductCell","ProductChart","labelText","spans","subEl","innerHTML","labelToMaterialId","ProductView","tableData","setTableData","groupedMaterials","m","treeData","concat","breadCrumbs","marginTop","infoIcon","secondary","infoContainer","marginBottom","infoIconGridItem","StyledBreadcrumb","withStyles","root","grey","typography","fontWeightRegular","boxShadow","shadows","emphasize","Chip","StyledBreadcrumbActive","BuildingElementsView","elementRoute","buildingElementRoute","rootElement","hierarchy","poppedRouteItem","setPoppedRouteItem","alignItems","tempRoute","pop","Breadcrumbs","index","icon","handleBreadcrumbClick","Fragment","justify","align","GroupCell","colSpan","expanded","onToggle","tableRow","tableColumn","contentComponent","iconComponent","indentCellComponent","inlineSummaryComponent","inlineSummaryItemComponent","summaryCellComponent","summaryItemComponent","containerComponent","inlineSummaries","styles","TableCell","SummaryCell","tooltipTitle","columnSummaries","CategoryTable","grouping","groupItems","calculator","getValue","firstRowValue","every","v","IntegratedSummary","defaultCalculator","formattedValue","overflowX","button","top","left","CategoryChart","isFirstLevel","setIsFirstLevel","selectedCategory","setSelectedCategory","chartHeight","setChartHeight","parentRows","filterData","originalArgument","weight","family","bottom","right","CategoryView","elementTable","materialChildRows","categoryParentRows","groupByCategory","formControl","marginRight","minWidth","MaterialsContainer","materialsGroupBy","setTooltipOpen","handleTooltip","isOpen","elementQuery","inventoryQuery","Promise","all","responses","exists","ReactDOM","unstable_batchedUpdates","gutterBottom","disableFocusListener","disableHoverListener","disableTouchListener","FormControl","InputLabel","Select","displayEmpty","onMouseEnter","onMouseLeave","onOpen","Product","BuildingElement","Category","FormLabel","RadioGroup","Radio","parentIsLoading","Skeleton","SingleBuildingChart","checkedEEMetrics","EEMetric","nonSimulatedValues","isSeriesSimulated","sumMaterialEmissions","perSqM","floor_area","perYear","lifetime","lcaPhase","gwp","series","some","labelToFieldname","seriesLabel","axisTitle","fieldName","showInLegend","ignoreEmptyPoints","nameField","CustomSwitch","switchBase","track","SimulationModeSwitch","maxWidth","content","SettingsButton","anchorEl","setAnchorEl","handleEEMetricChange","aria-label","currentTarget","iconSize","Menu","keepMounted","Boolean","PaperProps","ListSubheader","ListItem","ListItemText","primary","ListItemSecondaryAction","edge","buildingSection","divider","materialSection","buildingInfoLabels","heading","SingleBuildingView","building_identifier","building_name","project","typology","construction_type","inputProps","readOnly","disableUnderline","fullWidth","defaultValue","Divider","MultipleBuildingsChart","identifier","a1a3","a4","b4m","b4t","reverse","MultipleBuildingsView","elementSection","noSelectionContainer","drawer","flexShrink","drawerPaper","overflowY","BuildingDetails","closeButton","other","MuiDialogContent","MuiDialogActions","terminologyDictionary","term","definition","HelpButton","dividers","List","entry","autoFocus","titleBar","boxSizing","HomePage","orientation","minSize","Copyright","href","Date","getFullYear","paper","display","flexDirection","avatar","form","submit","SignIn","setEmail","password","setPassword","onChangeHandler","Container","CssBaseline","Avatar","noValidate","onSubmit","preventDefault","autoComplete","setPersistence","Auth","Persistence","SESSION","signInWithEmailAndPassword","code","signInWithEmailAndPasswordHandler","Box","mt","App","isAuthenticated","setIsAuthenticated","onAuthStateChanged","ThemeProvider","window","hostname","match","initialSelectedElementState","initialEEMetric","rootReducer","combineReducers","action","isCompareDialogOpen","hoveredBuildingElement","require","config","store","createStore","__REDUX_DEVTOOLS_EXTENSION__","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.5f9f1fcd.chunk.js","sourcesContent":["export enum GroupBy {\r\n  Category = \"category\",\r\n  BuildingElement = \"buildingElement\",\r\n  Product = \"product\",\r\n}\r\n\r\nexport enum LCAPhaseTooltip {\r\n  A1A3 = \"Material production\",\r\n  A4 = \"Transportation to building site\",\r\n  B4 = \"Replacement\",\r\n  B4m = \"Material replacements\",\r\n  B4t = \"Transportation of material replacements\",\r\n  B6 = \"Operational energy use\",\r\n  B7 = \"Operational water use\"\r\n}","import orange from \"@material-ui/core/colors/orange\";\r\nimport { createMuiTheme } from \"@material-ui/core/styles\";\r\n\r\nconst theme = createMuiTheme({\r\n  palette: {\r\n    simulated: {\r\n      main: \"#ef6c00\",\r\n      light: \"#ff9d3f\",\r\n      dark: \"#b53d00\",\r\n    },\r\n  },\r\n});\r\n\r\nexport default theme;\r\n","import buildingActions from \"./buildingActions\";\r\nimport uiActions from \"./uiActions\";\r\nimport elementAndMaterialActions from \"./elementAndMaterialActions\";\r\nimport settingsActions from \"./settingsActions\";\r\nimport userActions from \"./userActions\";\r\n\r\nconst allActions = {\r\n  buildingActions,\r\n  uiActions,\r\n  elementAndMaterialActions,\r\n  settingsActions,\r\n  userActions\r\n};\r\n\r\nexport default allActions;\r\n","import {\r\n  SET_BUILDINGS,\r\n  BuildingActionTypes,\r\n  SELECT_BUILDINGS,\r\n  DESELECT_ALL_BUILDINGS,\r\n  SelectedBuildingActionTypes,\r\n} from \"./types\";\r\n\r\nconst setBuildings = (buildings: IBuilding[]): BuildingActionTypes => {\r\n  return {\r\n    type: SET_BUILDINGS,\r\n    payload: buildings,\r\n  };\r\n};\r\n\r\nconst selectBuildings = (\r\n  buildings: IBuilding[]\r\n): SelectedBuildingActionTypes => {\r\n  return {\r\n    type: SELECT_BUILDINGS,\r\n    payload: buildings,\r\n  };\r\n};\r\n\r\nconst deselectAllBuildings = (): SelectedBuildingActionTypes => {\r\n  return {\r\n    type: DESELECT_ALL_BUILDINGS,\r\n  };\r\n};\r\n\r\nexport default {\r\n  setBuildings,\r\n  selectBuildings,\r\n  deselectAllBuildings,\r\n};\r\n","import firebase from \"firebase/app\";\r\n\r\nexport const SET_BUILDINGS = \"SET_BUILDINGS\";\r\n\r\nexport const SELECT_BUILDINGS = \"SELECT_BUILDINGS\";\r\nexport const DESELECT_ALL_BUILDINGS = \"DESELECT_ALL_BUILDINGS\";\r\n\r\nexport const SET_BUILDING_ELEMENTS = \"SET_BUILDING_ELEMENTS\";\r\nexport const SET_MATERIAL_INVENTORY = \"SET_MATERIAL_INVENTORY\";\r\nexport const SELECT_BUILDING_ELEMENT = \"SELECT_BUILDING_ELEMENT\";\r\n\r\nexport const ADD_TO_ELEMENT_ROUTE = \"ADD_TO_ELEMENT_ROUTE\";\r\nexport const SET_BUILDING_ELEMENT_ROUTE = \"SET_BUILDING_ELEMENT_ROUTE\";\r\n\r\nexport const TOGGLE_CAN_SELECT_MULTIPLE = \"TOGGLE_CAN_SELECT_MULTIPLE\";\r\nexport const TOGGLE_COMPARE_DIALOG_OPEN = \"TOGGLE_COMPARE_DIALOG_OPEN\";\r\n\r\nexport const HOVER_BUILDING_ELEMENT = \"HOVER_BUILDING_ELEMENT\";\r\nexport const STOP_HOVER_BUILDING_ELEMENT = \"STOP_HOVER_BUILDING_ELEMENT\";\r\n\r\nexport const SET_MATERIALS_GROUP_BY = \"SET_CONTENT_TYPE\";\r\nexport const SET_DISPLAY_MODE = \"SET_DISPLAY_MODE\";\r\n\r\nexport const SET_EE_METRIC = \"SET_EE_METRIC\";\r\n\r\nexport const TOGGLE_SIMULATION_MODE = \"TOGGLE_SIMULATION_MODE\";\r\nexport const SET_SIMULATED_DATA = \"SET_SIMULATED_DATA\";\r\n\r\nexport const SET_CURRENT_USER = \"SET_CURRENT_USER\";\r\n\r\nexport const SET_MATERIAL_PRODUCTS = \"SET_MATERIAL_PRODUCTS\";\r\nexport const SET_SIMULATED_MATERIAL_PRODUCTS = \"SET_SIMULATED_MATERIAL_PRODUCTS\";\r\n\r\ninterface SetBuildingsAction {\r\n  type: typeof SET_BUILDINGS;\r\n  payload: IBuilding[];\r\n}\r\n\r\ninterface SelectBuildingsAction {\r\n  type: typeof SELECT_BUILDINGS;\r\n  payload: IBuilding[];\r\n}\r\n\r\ninterface DeselectAllBuildingsAction {\r\n  type: typeof DESELECT_ALL_BUILDINGS;\r\n}\r\n\r\ninterface SetBuildingElementsAction {\r\n  type: typeof SET_BUILDING_ELEMENTS;\r\n  payload: IBuildingElement[];\r\n}\r\n\r\ninterface SetMaterialInventoryAction {\r\n  type: typeof SET_MATERIAL_INVENTORY;\r\n  payload: IMaterialInventory[];\r\n}\r\n\r\nexport interface SelectBuildingElementAction {\r\n  type: typeof SELECT_BUILDING_ELEMENT;\r\n  payload: IBuildingElement;\r\n}\r\n\r\ninterface AddToElementRouteAction {\r\n  type: typeof ADD_TO_ELEMENT_ROUTE;\r\n  payload: IBuildingElement;\r\n}\r\n\r\ninterface SetElementRouteAction {\r\n  type: typeof SET_BUILDING_ELEMENT_ROUTE;\r\n  payload: IBuildingElement[];\r\n}\r\n\r\ninterface ToggleCanSelectMultipleAction {\r\n  type: typeof TOGGLE_CAN_SELECT_MULTIPLE;\r\n}\r\n\r\nexport type ToggleCompareDialogOpenAction = {\r\n  type: typeof TOGGLE_COMPARE_DIALOG_OPEN;\r\n};\r\n\r\ninterface HoverBuildingElementAction {\r\n  type: typeof HOVER_BUILDING_ELEMENT;\r\n  payload: number;\r\n}\r\n\r\ninterface StopHoverBuildingElementAction {\r\n  type: typeof STOP_HOVER_BUILDING_ELEMENT;\r\n  payload: number;\r\n}\r\n\r\ninterface SetMaterialsGroupByAction {\r\n  type: typeof SET_MATERIALS_GROUP_BY;\r\n  payload: string;\r\n}\r\n\r\ninterface SetDisplayModeAction {\r\n  type: typeof SET_DISPLAY_MODE;\r\n  payload: string;\r\n}\r\n\r\ninterface SetEEMetricAction {\r\n  type: typeof SET_EE_METRIC;\r\n  name: string;\r\n  checked: boolean;\r\n}\r\n\r\ninterface ToggleSimulationModeAction {\r\n  type: typeof TOGGLE_SIMULATION_MODE;\r\n}\r\n\r\ninterface SetSimulatednDataAction {\r\n  type: typeof SET_SIMULATED_DATA;\r\n  payload: ISimulatedData;\r\n}\r\n\r\ninterface SetCurrentUserAction {\r\n  type: typeof SET_CURRENT_USER;\r\n  payload: firebase.User | null;\r\n}\r\n\r\ninterface SetMaterialProductsAction {\r\n  type: typeof SET_MATERIAL_PRODUCTS;\r\n  payload: IMaterialTableParentRow[];\r\n}\r\n\r\ninterface SetSimulatedMaterialProductsAction {\r\n  type: typeof SET_SIMULATED_MATERIAL_PRODUCTS;\r\n  payload: IMaterialTableParentRow[];\r\n}\r\n\r\nexport type BuildingActionTypes = SetBuildingsAction;\r\nexport type SelectedBuildingActionTypes =\r\n  | SelectBuildingsAction\r\n  | DeselectAllBuildingsAction;\r\nexport type BuildingElementActionTypes = SetBuildingElementsAction;\r\nexport type MaterialInventoryActionTypes = SetMaterialInventoryAction;\r\nexport type ElementRouteActionTypes =\r\n  | AddToElementRouteAction\r\n  | SetElementRouteAction;\r\nexport type HoverBuildingElementActionTypes =\r\n  | HoverBuildingElementAction\r\n  | StopHoverBuildingElementAction;\r\nexport type MaterialsGroupByActionTypes = SetMaterialsGroupByAction;\r\nexport type DisplayModeActionTypes = SetDisplayModeAction;\r\nexport type CanSelectMultipleActionTypes = ToggleCanSelectMultipleAction;\r\nexport type EEMetricActionTypes = SetEEMetricAction;\r\nexport type SimulationModeActionTypes = ToggleSimulationModeAction;\r\nexport type SimulatedDataActionTypes = SetSimulatednDataAction;\r\nexport type CurrentUserActionTypes = SetCurrentUserAction;\r\nexport type MaterialProductsActionTypes = SetMaterialProductsAction;\r\nexport type SimulatedMaterialProductsActionTypes = SetSimulatedMaterialProductsAction;\r\n","import {\r\n  SET_MATERIALS_GROUP_BY,\r\n  MaterialsGroupByActionTypes,\r\n  SET_DISPLAY_MODE,\r\n  DisplayModeActionTypes,\r\n  TOGGLE_CAN_SELECT_MULTIPLE,\r\n  CanSelectMultipleActionTypes,\r\n  TOGGLE_SIMULATION_MODE,\r\n  SimulationModeActionTypes\r\n} from \"./types\";\r\n\r\nconst setMaterialsGroupBy = (groupBy: string): MaterialsGroupByActionTypes => {\r\n  return {\r\n    type: SET_MATERIALS_GROUP_BY,\r\n    payload: groupBy,\r\n  };\r\n};\r\n\r\nconst setDisplayMode = (displayMode: string): DisplayModeActionTypes => {\r\n  return {\r\n    type: SET_DISPLAY_MODE,\r\n    payload: displayMode,\r\n  };\r\n};\r\n\r\nconst toggleCanSelectMultiple = (): CanSelectMultipleActionTypes => {\r\n  return {\r\n    type: TOGGLE_CAN_SELECT_MULTIPLE,\r\n  };\r\n};\r\n\r\nconst toggleSimulationMode = (): SimulationModeActionTypes => {\r\n  return {\r\n    type: TOGGLE_SIMULATION_MODE,\r\n  };\r\n};\r\n\r\nexport default {\r\n  setMaterialsGroupBy,\r\n  setDisplayMode,\r\n  toggleCanSelectMultiple,\r\n  toggleSimulationMode\r\n};\r\n","import {\r\n  SET_BUILDING_ELEMENTS,\r\n  SET_MATERIAL_INVENTORY,\r\n  SELECT_BUILDING_ELEMENT,\r\n  SET_BUILDING_ELEMENT_ROUTE,\r\n  ADD_TO_ELEMENT_ROUTE,\r\n  HOVER_BUILDING_ELEMENT,\r\n  STOP_HOVER_BUILDING_ELEMENT,\r\n  SET_SIMULATED_DATA,\r\n  SET_MATERIAL_PRODUCTS,\r\n  SET_SIMULATED_MATERIAL_PRODUCTS,\r\n  BuildingElementActionTypes,\r\n  MaterialInventoryActionTypes,\r\n  SelectBuildingElementAction,\r\n  ElementRouteActionTypes,\r\n  HoverBuildingElementActionTypes,\r\n  SimulatedDataActionTypes,\r\n  MaterialProductsActionTypes,\r\n  SimulatedMaterialProductsActionTypes\r\n} from \"./types\";\r\n\r\nconst setBuildingElements = (\r\n  buildingElements: IBuildingElement[]\r\n): BuildingElementActionTypes => {\r\n  return {\r\n    type: SET_BUILDING_ELEMENTS,\r\n    payload: buildingElements,\r\n  };\r\n};\r\n\r\nconst setMaterialInventory = (\r\n  materialInventory: IMaterialInventory[]\r\n): MaterialInventoryActionTypes => {\r\n  return {\r\n    type: SET_MATERIAL_INVENTORY,\r\n    payload: materialInventory,\r\n  };\r\n};\r\nconst selectBuildingElement = (\r\n  buildingElement: IBuildingElement\r\n): SelectBuildingElementAction => {\r\n  return {\r\n    type: SELECT_BUILDING_ELEMENT,\r\n    payload: buildingElement,\r\n  };\r\n};\r\n\r\nconst addToElementRoute = (\r\n  route: IBuildingElement\r\n): ElementRouteActionTypes => {\r\n  return {\r\n    type: ADD_TO_ELEMENT_ROUTE,\r\n    payload: route,\r\n  };\r\n};\r\n\r\nconst setElementRoute = (\r\n  route: IBuildingElement[]\r\n): ElementRouteActionTypes => {\r\n  return {\r\n    type: SET_BUILDING_ELEMENT_ROUTE,\r\n    payload: route,\r\n  };\r\n};\r\n\r\nconst hoverBuildingElement = (\r\n  elementId: number\r\n): HoverBuildingElementActionTypes => {\r\n  return {\r\n    type: HOVER_BUILDING_ELEMENT,\r\n    payload: elementId,\r\n  };\r\n};\r\n\r\nconst stopHoverBuildingElement = (\r\n  elementId: number\r\n): HoverBuildingElementActionTypes => {\r\n  return {\r\n    type: STOP_HOVER_BUILDING_ELEMENT,\r\n    payload: elementId,\r\n  };\r\n};\r\n\r\nconst setSimulatedData = (\r\n  simulatedData: ISimulatedData\r\n): SimulatedDataActionTypes => {\r\n  return {\r\n    type: SET_SIMULATED_DATA,\r\n    payload: simulatedData,\r\n  };\r\n};\r\n\r\nconst setMaterialProducts = (\r\n  materialProducts: IMaterialTableParentRow[]\r\n): MaterialProductsActionTypes => {\r\n  return {\r\n    type: SET_MATERIAL_PRODUCTS,\r\n    payload: materialProducts,\r\n  };\r\n};\r\n\r\nconst setSimulatedMaterialProducts = (\r\n  simulatedMaterialProducts: IMaterialTableParentRow[]\r\n): SimulatedMaterialProductsActionTypes => {\r\n  return {\r\n    type: SET_SIMULATED_MATERIAL_PRODUCTS,\r\n    payload: simulatedMaterialProducts,\r\n  };\r\n};\r\n\r\nexport default {\r\n  setBuildingElements,\r\n  setMaterialInventory,\r\n  selectBuildingElement,\r\n  addToElementRoute,\r\n  setElementRoute,\r\n  hoverBuildingElement,\r\n  stopHoverBuildingElement,\r\n  setSimulatedData,\r\n  setMaterialProducts,\r\n  setSimulatedMaterialProducts\r\n};\r\n","import { SET_EE_METRIC, EEMetricActionTypes } from \"./types\";\r\n\r\nconst setEEMetric = (eeMetric: IEEMetricData): EEMetricActionTypes => {\r\n  return {\r\n    type: SET_EE_METRIC,\r\n    name: eeMetric.name,\r\n    checked: eeMetric.checked,\r\n  };\r\n};\r\n\r\nexport default {\r\n  setEEMetric,\r\n};\r\n","import firebase from \"firebase/app\";\r\nimport {\r\n  SET_CURRENT_USER,\r\n  CurrentUserActionTypes,\r\n} from \"./types\";\r\n\r\nconst setCurrentUser = (user: firebase.User | null): CurrentUserActionTypes => {\r\n  return {\r\n    type: SET_CURRENT_USER,\r\n    payload: user,\r\n  };\r\n};\r\n\r\nexport default {\r\n  setCurrentUser,\r\n};\r\n","import React from \"react\";\r\nimport { DataTypeProvider } from \"@devexpress/dx-react-grid\";\r\nimport { LCAPhaseTooltip } from \"interfaces/enums\";\r\nimport { TableHeaderRow } from \"@devexpress/dx-react-grid-material-ui\";\r\nimport { Theme, createStyles, makeStyles } from \"@material-ui/core/styles\";\r\nimport theme from \"styles/theme\";\r\n\r\nconst useStyles = makeStyles((/* theme: Theme */) =>\r\n  createStyles({\r\n    simulatedField: {\r\n      color: theme.palette.simulated.main,\r\n      // fontWeight: \"bolder\",\r\n    },\r\n  }));\r\n\r\nconst DecimalFormatter = ({ value }: any) =>\r\n  value ? parseFloat(value).toLocaleString() : 0;\r\n\r\nexport const DecimalTypeProvider = (props: any) => (\r\n  <DataTypeProvider formatterComponent={DecimalFormatter} {...props} />\r\n);\r\n\r\nconst BoldFormatter = ({ value }: any) => <b>{value}</b>;\r\n\r\nexport const BoldTypeProvider = (props: any) => (\r\n  <DataTypeProvider formatterComponent={BoldFormatter} {...props} />\r\n);\r\n\r\nconst SimulatedFieldFormatter = ({ value, row }: any) => {\r\n  console.log(\"Row: \", row)\r\n  return <b className={useStyles().simulatedField}>{value}</b>;\r\n};\r\n\r\nexport const SimulatedFieldTypeProvider = (props: any) => (\r\n  <DataTypeProvider formatterComponent={SimulatedFieldFormatter} {...props} />\r\n);\r\n\r\nexport const SortLabel = ({ getMessage, column, ...restProps }: any) => {\r\n  var message: string = \"\";\r\n  switch (column.name) {\r\n    case \"A1A3\":\r\n      message = LCAPhaseTooltip.A1A3;\r\n      break;\r\n    case \"A4\":\r\n      message = LCAPhaseTooltip.A4;\r\n      break;\r\n    case \"B4\":\r\n      message = LCAPhaseTooltip.B4;\r\n      break;\r\n    case \"B4_m\":\r\n      message = LCAPhaseTooltip.B4m;\r\n      break;\r\n    case \"B4_t\":\r\n      message = LCAPhaseTooltip.B4t;\r\n      break;\r\n    case \"GWP_B6\":\r\n      message = LCAPhaseTooltip.B6;\r\n      break;\r\n    case \"GWP_B7\":\r\n      message = LCAPhaseTooltip.B7;\r\n      break;\r\n    case \"FU\":\r\n      message = \"Functional unit\";\r\n      break;\r\n    case \"RSL_mi\":\r\n      message = \"Reference service life\";\r\n      break;\r\n    case \"RSL\":\r\n      message = \"Reference service life\";\r\n      break;\r\n    default:\r\n      message = `Sort by ${column.name}`;\r\n      break;\r\n  }\r\n  return (\r\n    <TableHeaderRow.SortLabel\r\n      column={column}\r\n      getMessage={() => {\r\n        return message;\r\n      }}\r\n      {...restProps}\r\n    />\r\n  );\r\n};\r\n","import { Column } from \"@devexpress/dx-react-grid\";\r\nimport { Table } from \"@devexpress/dx-react-grid-material-ui\";\r\n\r\nclass ColumnData {\r\n  static readonly columns: Column[] = [\r\n    { name: \"building_identifier\", title: \"ID\" },\r\n    { name: \"building_name\", title: \"Building name\" },\r\n    { name: \"project\", title: \"Project\" },\r\n    { name: \"country\", title: \"Country\" },\r\n    { name: \"city\", title: \"City\" },\r\n    { name: \"typology\", title: \"Typology\" },\r\n    { name: \"construction_type\", title: \"Construction type\" },\r\n    { name: \"built_status\", title: \"Built status\" },\r\n    { name: \"energy_ambition_level\", title: \"Energy ambition level\" },\r\n    { name: \"calculation_method\", title: \"Calculation method\" },\r\n    { name: \"main_data_source\", title: \"Data source\" },\r\n    { name: \"study_type\", title: \"Study type\" },\r\n    { name: \"study_year\", title: \"Study year\" },\r\n    { name: \"floor_area\", title: \"Floor area (m\\xB2)\" },\r\n    { name: \"lifetime\", title: \"Lifetime\" },\r\n    { name: \"A1A3\", title: \"A1-A3\" },\r\n    { name: \"A4\", title: \"A4\" },\r\n    { name: \"B4_m\", title: \"B4 (m)\" },\r\n    { name: \"B4_t\", title: \"B4 (t)\" },\r\n    { name: \"GWP_B6\", title: \"B6\" },\r\n    { name: \"GWP_B7\", title: \"B7\" },\r\n    { name: \"heated_volume\", title: \"Heated volume\" },\r\n    { name: \"area_footprint\", title: \"Area footprint\" },\r\n    { name: \"area_roof\", title: \"Area roof\" },\r\n    { name: \"area_wall\", title: \"Area wall\" },\r\n    { name: \"area_windowAndDoor\", title: \"Area window and door\" },\r\n    { name: \"heatloss_number\", title: \"Heatloss number\" },\r\n    { name: \"comments\", title: \"Comments\" },\r\n  ];\r\n\r\n  static readonly columnExtensions: Table.ColumnExtension[] = [\r\n    { columnName: \"building_identifier\", width: 80 },\r\n    { columnName: \"building_name\", width: 200, wordWrapEnabled: true },\r\n    { columnName: \"project\", width: 120 },\r\n    { columnName: \"country\", width: 110 },\r\n    { columnName: \"city\", width: 120 },\r\n    { columnName: \"typology\", width: 130 },\r\n    { columnName: \"construction_type\", width: 160 },\r\n    { columnName: \"built_status\", width: 120 },\r\n    { columnName: \"energy_ambition_level\", width: 180 },\r\n    { columnName: \"calculation_method\", width: 170 },\r\n    { columnName: \"main_data_source\", width: 120 },\r\n    { columnName: \"study_type\", width: 160 },\r\n    { columnName: \"study_year\", width: 110 },\r\n    { columnName: \"lifetime\", width: 100 },\r\n    { columnName: \"floor_area\", width: 150 },\r\n    { columnName: \"heated_volume\", width: 150 },\r\n    { columnName: \"area_footprint\", width: 150 },\r\n    { columnName: \"area_roof\", width: 150 },\r\n    { columnName: \"area_wall\", width: 150 },\r\n    { columnName: \"area_windowAndDoor\", width: 150 },\r\n    { columnName: \"heatloss_number\", width: 150 },\r\n    { columnName: \"comments\", width: 400, wordWrapEnabled: true },\r\n  ];\r\n\r\n  static readonly defaultHiddenColumnNames: string[] = [\r\n    \"country\",\r\n    \"built_status\",\r\n    \"energy_ambition_level\",\r\n    \"main_data_source\",\r\n    \"calculation_method\",\r\n    // \"lifetime\",\r\n    \"heated_volume\",\r\n    \"area_footprint\",\r\n    \"area_roof\",\r\n    \"area_wall\",\r\n    \"area_windowAndDoor\",\r\n    \"heatloss_number\",\r\n    \"comments\",\r\n  ];\r\n\r\n  static readonly tableColumnVisibilityColumnExtensions = [\r\n    { columnName: \"building_identifier\", togglingEnabled: false },\r\n    { columnName: \"building_name\", togglingEnabled: false },\r\n  ];\r\n}\r\n\r\nexport default ColumnData;\r\n","import * as React from \"react\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\n\r\nimport \"./LoadingIndicator.css\";\r\n\r\nconst LoadingIndicator = () => (\r\n  <div className='loading-shading-mui'>\r\n    <CircularProgress className='loading-icon-mui' size={50} thickness={5} />\r\n  </div>\r\n);\r\n\r\nexport default LoadingIndicator;\r\n","import React from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Snackbar from \"@material-ui/core/Snackbar\";\r\nimport Alert, { AlertProps } from \"@material-ui/lab/Alert\";\r\nimport { makeStyles, Theme } from \"@material-ui/core/styles\";\r\n\r\ninterface Props extends AlertProps {\r\n  message: string;\r\n}\r\n\r\nexport default function AlertSnackbar(props: Props) {\r\n  const [open, setOpen] = React.useState(true);\r\n\r\n  const handleClick = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = (event?: React.SyntheticEvent, reason?: string) => {\r\n    if (reason === \"clickaway\") {\r\n      return;\r\n    }\r\n\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <Snackbar open={open} autoHideDuration={6000} onClose={handleClose}>\r\n      <Alert\r\n        onClose={handleClose}\r\n        severity={props.severity}\r\n        elevation={6}\r\n        variant='filled'\r\n      >\r\n        {props.message}\r\n      </Alert>\r\n    </Snackbar>\r\n  );\r\n}\r\n","import React, { useState, useEffect, useCallback, ReactText } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport allActions from \"redux/actions\";\r\nimport { IRootState } from \"redux/reducers\";\r\n\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport Switch from \"@material-ui/core/Switch\";\r\n\r\nimport {\r\n  SortingState,\r\n  IntegratedSorting,\r\n  SearchState,\r\n  SelectionState,\r\n  IntegratedFiltering,\r\n  DataTypeProvider,\r\n} from \"@devexpress/dx-react-grid\";\r\nimport {\r\n  Grid,\r\n  Toolbar,\r\n  SearchPanel,\r\n  TableHeaderRow,\r\n  ColumnChooser,\r\n  TableColumnVisibility,\r\n  VirtualTable,\r\n  TableSelection,\r\n  TableFixedColumns,\r\n} from \"@devexpress/dx-react-grid-material-ui\";\r\nimport { Template, TemplatePlaceholder } from \"@devexpress/dx-react-core\";\r\nimport _ from \"lodash\";\r\n\r\nimport {\r\n  DecimalTypeProvider,\r\n  SortLabel,\r\n} from \"components/TableUtilities/Formatters\";\r\nimport ColumnData from \"./ColumnData\";\r\nimport LoadingIndicator from \"components/LoadingIndicator\";\r\nimport AlertSnackbar from \"components/AlertSnackbar\";\r\n\r\nconst getRowId = (row: any) => row[Object.keys(row)[0]];\r\nconst Root = (props: any) => (\r\n  <Grid.Root {...props} style={{ height: \"100%\" }} />\r\n);\r\n\r\nconst getHiddenColumnsFilteringExtensions = (hiddenColumnNames: string[]) =>\r\n  hiddenColumnNames.map((columnName) => ({\r\n    columnName,\r\n    predicate: () => false,\r\n  }));\r\n\r\nfunction BuildingsTable() {\r\n  const dispatch = useDispatch();\r\n  const buildings = useSelector((state: IRootState) => state.buildings);\r\n\r\n  const [columns] = useState(ColumnData.columns);\r\n  const [columnExtensions] = useState(ColumnData.columnExtensions);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<any>(null);\r\n  const [searchTerm, setSearchTerm] = useState<string>();\r\n\r\n  const [defaultHiddenColumnNames] = useState(\r\n    ColumnData.defaultHiddenColumnNames\r\n  );\r\n  const [tableColumnVisibilityColumnExtensions] = useState(\r\n    ColumnData.tableColumnVisibilityColumnExtensions\r\n  );\r\n  const [leftColumns] = useState([TableSelection.COLUMN_TYPE, \"building_name\"]);\r\n  const multipleSwitchChecked = useSelector(\r\n    (state: IRootState) => state.canSelectMultipleBuildings\r\n  );\r\n\r\n  const [decimalColumns] = useState([\r\n    \"A1A3\",\r\n    \"A4\",\r\n    \"B4_t\",\r\n    \"B4_m\",\r\n    \"GWP_B6\",\r\n    \"GWP_B7\",\r\n  ]);\r\n\r\n  const handleMultipleSwitchChange = () => {\r\n    dispatch(allActions.uiActions.toggleCanSelectMultiple());\r\n    dispatch(allActions.buildingActions.deselectAllBuildings());\r\n    setSelectedRow([]);\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadData();\r\n  }, []);\r\n\r\n  function handleErrors(response: Response) {\r\n    if (!response.ok) {\r\n      throw Error(response.statusText);\r\n    }\r\n    return response;\r\n  }\r\n\r\n  const loadData = () => {\r\n    if (!loading) {\r\n      setLoading(true);\r\n\r\n      var URL = process.env.REACT_APP_API_URI + \"/buildings\";\r\n\r\n      console.log(\"URL: \", URL);\r\n      fetch(URL)\r\n        .then(handleErrors)\r\n        .then((response) => response.json())\r\n        .then((data) => {\r\n          dispatch(allActions.buildingActions.setBuildings(data));\r\n          setLoading(false);\r\n          console.log(\"Fetched rows: \", buildings);\r\n        })\r\n        .catch((error) => {\r\n          console.log(\"Error getting building data:\", error);\r\n          setError(error);\r\n          setLoading(false);\r\n        });\r\n    }\r\n  };\r\n\r\n  const changeSearchTerm = (value: any) => {\r\n    console.log(\"Changed search term: \", value);\r\n    setSearchTerm(value);\r\n  };\r\n\r\n  // Delays query so it is not fired on every keystroke\r\n  const delayedCallback = useCallback(_.debounce(changeSearchTerm, 300), []);\r\n\r\n  // Only search in visible columns\r\n  const [filteringColumnExtensions, setFilteringColumnExtensions] = useState(\r\n    getHiddenColumnsFilteringExtensions(defaultHiddenColumnNames)\r\n  );\r\n\r\n  const onHiddenColumnNamesChange = (hiddenColumnNames: string[]) =>\r\n    setFilteringColumnExtensions(\r\n      getHiddenColumnsFilteringExtensions(hiddenColumnNames)\r\n    );\r\n\r\n  const [selectedRow, setSelectedRow] = useState<ReactText[]>([]);\r\n\r\n  function changeSelection(selection: ReactText[]) {\r\n    // Select one row or multiple rows at a time\r\n    if (!multipleSwitchChecked) {\r\n      const lastSelected = selection.find(\r\n        (selected) => selectedRow.indexOf(selected) === -1\r\n      );\r\n\r\n      if (lastSelected !== undefined) {\r\n        setSelectedRow([lastSelected]);\r\n\r\n        const rowId = selection[selection.length - 1];\r\n        console.log(\"Selected row: \", rowId);\r\n        const building = buildings.find(\r\n          (building) => building.idbuildings === rowId\r\n        );\r\n        if (building !== undefined)\r\n          dispatch(allActions.buildingActions.selectBuildings([building]));\r\n      } else {\r\n        // Clear selection by double-click on same row\r\n        setSelectedRow([]);\r\n        dispatch(allActions.buildingActions.deselectAllBuildings());\r\n      }\r\n    } else {\r\n      setSelectedRow(selection);\r\n      const selectedBuildings = buildings.filter((building) =>\r\n        selection.includes(building.idbuildings)\r\n      );\r\n      dispatch(allActions.buildingActions.selectBuildings(selectedBuildings));\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Paper style={{ height: \"100%\" }}>\r\n      <Grid\r\n        rows={buildings}\r\n        columns={columns}\r\n        getRowId={getRowId}\r\n        rootComponent={Root}\r\n      >\r\n        <DecimalTypeProvider for={decimalColumns} />\r\n        <SearchState onValueChange={delayedCallback} />\r\n        <IntegratedFiltering columnExtensions={filteringColumnExtensions} />\r\n        <SortingState />\r\n        <IntegratedSorting />\r\n        <SelectionState\r\n          selection={selectedRow}\r\n          onSelectionChange={changeSelection}\r\n        />\r\n        <VirtualTable height='auto' columnExtensions={columnExtensions} />\r\n        <TableHeaderRow showSortingControls sortLabelComponent={SortLabel} />\r\n        <TableSelection\r\n          selectByRowClick\r\n          highlightRow={true}\r\n          showSelectionColumn={multipleSwitchChecked}\r\n        />\r\n        <TableFixedColumns leftColumns={leftColumns} />\r\n        <TableColumnVisibility\r\n          defaultHiddenColumnNames={defaultHiddenColumnNames}\r\n          columnExtensions={tableColumnVisibilityColumnExtensions}\r\n          onHiddenColumnNamesChange={onHiddenColumnNamesChange}\r\n        />\r\n        <Toolbar />\r\n        <Template name='toolbarContent'>\r\n          <TemplatePlaceholder />\r\n          <FormControlLabel\r\n            control={\r\n              <Switch\r\n                checked={multipleSwitchChecked}\r\n                onChange={handleMultipleSwitchChange}\r\n                name='checkedB'\r\n                color='primary'\r\n              />\r\n            }\r\n            label='Select multiple'\r\n          />\r\n        </Template>\r\n        <SearchPanel />\r\n        <ColumnChooser />\r\n      </Grid>\r\n      {loading && <LoadingIndicator />}\r\n      {error && (\r\n        <AlertSnackbar\r\n          message=\"Couldn't load data, the server may be down.\"\r\n          severity='error'\r\n        />\r\n      )}\r\n    </Paper>\r\n  );\r\n}\r\n\r\nexport default BuildingsTable;\r\n","// For Firebase JS SDK v7.20.0 and later, measurementId is optional\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyBb6VK_mu8s1T2gxWYg0HWvoOY_bSARrKc\",\r\n  authDomain: \"blcad-gui.firebaseapp.com\",\r\n  projectId: \"blcad-gui\",\r\n  storageBucket: \"blcad-gui.appspot.com\",\r\n  messagingSenderId: \"904167128860\",\r\n  appId: \"1:904167128860:web:53f89c35f19b3dc64104d9\",\r\n  measurementId: \"G-5Y4F1X620N\",\r\n};\r\n\r\nexport default firebaseConfig;","// Firebase App (the core Firebase SDK) is always required and must be listed first\r\nimport firebase from \"firebase/app\";\r\nimport firebaseConfig from \"./firebase_config\";\r\n\r\n// If you enabled Analytics in your project, add the Firebase SDK for Analytics\r\nimport \"firebase/analytics\";\r\n// Add the Firebase products that you want to use\r\nimport \"firebase/auth\";\r\nimport \"firebase/firestore\";\r\n\r\n// Initialize Firebase\r\nfirebase.initializeApp(firebaseConfig);\r\nexport const auth = firebase.auth();\r\nexport const firestore = firebase.firestore();\r\nconst db = firebase.firestore();\r\n\r\nexport function authenticateAnonymously() {\r\n  return firebase.auth().signInAnonymously();\r\n}\r\n\r\nexport function signInWithEmailPassword(email: string, password: string) {\r\n  firebase\r\n    .auth()\r\n    .signInWithEmailAndPassword(email, password)\r\n    .then((userCredential) => {\r\n      // Signed in\r\n      var user = userCredential.user;\r\n      // ...\r\n    })\r\n    .catch((error) => {\r\n      var errorCode = error.code;\r\n      var errorMessage = error.message;\r\n    });\r\n}\r\n\r\nexport function getSimulatedDataFromDb(buildingId: string) {\r\n  let username = \"anonymous\";\r\n  const user = firebase.auth().currentUser;\r\n  if (user) {\r\n    // User is signed in.\r\n    if (user.email !== null) username = user.email;\r\n  }\r\n\r\n  var docRef = db\r\n    .collection(\"users\")\r\n    .doc(username)\r\n    .collection(\"simulatedData\")\r\n    .doc(buildingId);\r\n\r\n  return docRef.get();\r\n}\r\n\r\nexport function writeSimulatedDataToDb(buildingId: string, simulatedData: any) {\r\n  let username = \"anonymous\";\r\n  const user = firebase.auth().currentUser;\r\n  if (user) {\r\n    // User is signed in.\r\n    if (user.email !== null) username = user.email;\r\n  }\r\n  \r\n  db.collection(\"users\")\r\n    .doc(username)\r\n    .collection(\"simulatedData\")\r\n    .doc(buildingId)\r\n    .set(simulatedData)\r\n    .then(() => {\r\n      console.log(\"Document successfully written!\");\r\n    })\r\n    .catch((error) => {\r\n      console.error(\"Error writing document: \", error);\r\n    });\r\n}\r\n","import { Column } from \"@devexpress/dx-react-grid\";\r\nimport { Table } from \"@devexpress/dx-react-grid-material-ui\";\r\n\r\nclass ColumnData {\r\n  static readonly columns: Column[] = [\r\n    { name: \"idlevels\", title: \"Code\" },\r\n    { name: \"name\", title: \"Name\" },\r\n    { name: \"A1A3\", title: \"A1-A3\" },\r\n    { name: \"A4\", title: \"A4\" },\r\n    { name: \"B4_m\", title: \"B4 (m)\" },\r\n    { name: \"B4_t\", title: \"B4 (t)\" },\r\n  ];\r\n\r\n  static readonly columnExtensions: Table.ColumnExtension[] = [\r\n    { columnName: \"idlevels\", width: 80, /* align: \"right\" */ },\r\n    { columnName: \"name\", width: 180, wordWrapEnabled: true },\r\n    { columnName: \"A1A3\", width: 130 },\r\n    { columnName: \"A4\", width: 130 },\r\n    { columnName: \"B4_m\", width: 130 },\r\n    { columnName: \"B4_t\", width: 130 },\r\n  ];\r\n\r\n  static readonly defaultHiddenColumnNames: string[] = [];\r\n\r\n  static readonly tableColumnVisibilityColumnExtensions = [\r\n    { columnName: \"name\", togglingEnabled: false },\r\n  ];\r\n}\r\n\r\nexport default ColumnData;\r\n","/*\r\nCOMMON FUNCTIONS\r\n*/\r\n\r\nexport const getChildElements = (\r\n  buildingElements: IBuildingElement[],\r\n  parentElement: IBuildingElement\r\n) => {\r\n  const childElements = buildingElements.filter(\r\n    (element) => element.idparent === parentElement.idlevels\r\n  );\r\n  if (childElements !== undefined) {\r\n    return childElements;\r\n  }\r\n\r\n  return [];\r\n};\r\n\r\n// Get materials associated with a building element\r\nexport const getElementMaterials = (\r\n  materialInventory: IMaterialInventory[],\r\n  parentElement: IBuildingElement\r\n) => {\r\n  const elementMaterials = materialInventory.filter(\r\n    (material) =>\r\n      material.idbuilding_elements === parentElement.idbuilding_elements\r\n  );\r\n  if (elementMaterials !== undefined) {\r\n    return elementMaterials;\r\n  }\r\n\r\n  return [];\r\n};\r\n\r\n/* \r\nCHART FUNCTIONS\r\n*/\r\n\r\n// Wraps label over two lines if longer than 15 characters\r\nexport const wrapArgumentAxisLabel = (data: any) => {\r\n  if (data.value.length > 15) {\r\n    const wordArray: string[] = data.value.split(\" \");\r\n    if (wordArray.length > 2) {\r\n      const breakPoint = Math.ceil(wordArray.length / 2);\r\n      const firstLine = wordArray.slice(0, breakPoint).join(\" \");\r\n      const secondLine = wordArray.slice(breakPoint).join(\" \");\r\n      return firstLine + \"\\n\" + secondLine;\r\n    } else {\r\n      return wordArray.join(\"\\n\");\r\n    }\r\n  }\r\n\r\n  return data.value;\r\n};\r\n\r\n// Sorts chart data by the sum of each item's embodied emission values\r\nexport const sortByEE = (\r\n  chartData: IMaterialChartItem[] | IElementChartItem[]\r\n) => {\r\n  chartData.sort(function (a: any, b: any) {\r\n    const aSum = a.A1A3 + a.A4 + a.B4_m + a.B4_t;\r\n    const bSum = b.A1A3 + b.A4 + b.B4_m + b.B4_t;\r\n    return aSum - bSum;\r\n  });\r\n\r\n  return chartData;\r\n};\r\n\r\n// Group material inventory by material type, sum material inventory embodied emission values\r\nexport const createMaterialChartData = (\r\n  materials: IMaterialTableParentRow[]\r\n) => {\r\n  // Only keep certain attributes from MaterialTableRow\r\n  const chartData: IMaterialChartItem[] = materials.map(\r\n    ({\r\n      idmaterials,\r\n      sourceType,\r\n      RSL_mi,\r\n      source,\r\n      dataType,\r\n      dataYear,\r\n      density,\r\n      EEf_A1A3,\r\n      RSL,\r\n      comments,\r\n      parentId,\r\n      ...keepAttrs\r\n    }) => keepAttrs\r\n  );\r\n\r\n  return chartData;\r\n};\r\n\r\n// Group material inventory by material category, sum material inventory embodied emission values\r\nexport const groupByCategory = (materials: IMaterialChartItem[]) => {\r\n  const materialsGrouped: IMaterialChartItem[] = [];\r\n\r\n  materials.reduce(function (res: any, value: IMaterialChartItem) {\r\n    if (!res[value.materialCat]) {\r\n      res[value.materialCat] = {\r\n        name: value.materialCat,\r\n        A1A3: 0.0,\r\n        A4: 0.0,\r\n        B4_m: 0.0,\r\n        B4_t: 0.0,\r\n        materialCat: \"\",\r\n      };\r\n      materialsGrouped.push(res[value.materialCat]);\r\n    }\r\n    res[value.materialCat].A1A3 += value.A1A3;\r\n    res[value.materialCat].A4 += value.A4;\r\n    res[value.materialCat].B4_m += value.B4_m;\r\n    res[value.materialCat].B4_t += value.B4_t;\r\n    return res;\r\n  }, {});\r\n\r\n  return materialsGrouped;\r\n};\r\n\r\n/*\r\nTABLE FUNCTIONS\r\n*/\r\n\r\n// Group material inventory by material type, sum material inventory embodied emission values\r\nexport const groupByMaterial = (materials: IMaterialInventory[]) => {\r\n  const materialsGrouped: IMaterialTableParentRow[] = [];\r\n\r\n  materials.reduce(function (res: any, value: IMaterialInventory) {\r\n    if (!res[value.name]) {\r\n      res[value.name] = {\r\n        ...value,\r\n        idmaterialInventory: value.parentId,\r\n        quantity: 0.0,\r\n        A1A3: 0.0,\r\n        A4: 0.0,\r\n        B4_m: 0.0,\r\n        B4_t: 0.0,\r\n        parentId: null,\r\n        buildingElementName: value.buildingElementName,\r\n      };\r\n      materialsGrouped.push(res[value.name]);\r\n    }\r\n\r\n    res[value.name].quantity += value.quantity;\r\n    res[value.name].A1A3 += value.A1A3;\r\n    res[value.name].A4 += value.A4;\r\n    res[value.name].B4_m += value.B4_m;\r\n    res[value.name].B4_t += value.B4_t;\r\n\r\n    // Display ellipses if materials in group don't share the same building element\r\n    if (res[value.name].buildingElementName !== value.buildingElementName) {\r\n      res[value.name].buildingElementName = \"...\";\r\n    }\r\n    return res;\r\n  }, {});\r\n\r\n  return materialsGrouped;\r\n};\r\n\r\n// Rows containing the individual material inventory entries\r\nexport const createChildRows = (materials: IMaterialInventory[]) => {\r\n  const childRows: IMaterialTableChildRow[] = materials.map((m) => ({\r\n    idmaterialInventory: m.idmaterialInventory,\r\n    name: \"ID: \" + String(m.idmaterialInventory),\r\n    buildingElementName: m.buildingElementName,\r\n    quantity: m.quantity,\r\n    FU: m.FU,\r\n    A1A3: m.A1A3 || 0.0,\r\n    A4: m.A4 || 0.0,\r\n    B4_m: m.B4_m || 0.0,\r\n    B4_t: m.B4_t || 0.0,\r\n    RSL_mi: m.RSL_mi,\r\n    parentId: m.parentId,\r\n  }));\r\n\r\n  return childRows;\r\n};\r\n\r\n/*\r\nSIMULATION MODE\r\n*/\r\n\r\nexport const mergeSimulatedDataIntoMaterialProducts = (\r\n  materialRows: IMaterialTableRow[],\r\n  simulatedData: ISimulatedData\r\n) => {\r\n  let changedRows: IMaterialTableRow[] = [];\r\n  if (simulatedData) {\r\n    changedRows = materialRows.map((row) =>\r\n      simulatedData[row.idmaterialInventory]\r\n        ? { ...row, ...simulatedData[row.idmaterialInventory] }\r\n        : row\r\n    );\r\n  }\r\n\r\n  return changedRows;\r\n};\r\n","import React, { useState, useEffect, useCallback, ReactText } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { IRootState } from \"redux/reducers\";\r\nimport allActions from \"redux/actions\";\r\n\r\nimport {\r\n  Theme,\r\n  createStyles,\r\n  makeStyles,\r\n  withStyles,\r\n  emphasize,\r\n} from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport SubdirectoryArrowRightIcon from \"@material-ui/icons/SubdirectoryArrowRight\";\r\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\n\r\nimport {\r\n  SortingState,\r\n  IntegratedSorting,\r\n  SearchState,\r\n  SelectionState,\r\n  DataTypeProvider,\r\n  EditingState,\r\n} from \"@devexpress/dx-react-grid\";\r\nimport {\r\n  Grid,\r\n  TableHeaderRow,\r\n  Table,\r\n  VirtualTable,\r\n  Toolbar,\r\n  SearchPanel,\r\n  ColumnChooser,\r\n  TableColumnVisibility,\r\n  TableFixedColumns,\r\n  TableSelection,\r\n  TableEditColumn,\r\n} from \"@devexpress/dx-react-grid-material-ui\";\r\nimport _ from \"lodash\";\r\n\r\nimport {\r\n  DecimalTypeProvider,\r\n  BoldTypeProvider,\r\n  SortLabel,\r\n} from \"components/TableUtilities/Formatters\";\r\nimport { EditCell } from \"components/TableUtilities/CustomCells\";\r\nimport ColumnData from \"./ColumnData\";\r\nimport { getChildElements } from \"helpers/materialHelpers\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    customRow: {\r\n      \"&:hover\": {\r\n        backgroundColor: \"#F5F5F5\",\r\n        cursor: \"pointer\",\r\n      },\r\n    },\r\n  })\r\n);\r\n\r\nconst ElementsTable = (props: any) => {\r\n  const dispatch = useDispatch();\r\n\r\n  const buildingElements = useSelector(\r\n    (state: IRootState) => state.buildingElements\r\n  );\r\n  const selectedBuildingElement = useSelector(\r\n    (state: IRootState) => state.selectedBuildingElement\r\n  );\r\n\r\n  const [columns] = useState(ColumnData.columns);\r\n  const [columnExtensions] = useState(ColumnData.columnExtensions);\r\n  const [decimalColumns] = useState([\"A1A3\", \"A4\", \"B4_t\", \"B4_m\"]);\r\n  const [tooltipColumns] = useState([\"name\"]);\r\n  const [boldColumns] = useState([\"name\"]);\r\n\r\n  const CustomTableRow = ({ row, style, ...props }: any) => (\r\n    <VirtualTable.Row\r\n      {...props}\r\n      id={\"tableRow\" + row.idbuilding_elements}\r\n      className={useStyles().customRow}\r\n      onClick={() => handleRowClick(row)}\r\n    />\r\n  );\r\n\r\n  const TooltipFormatter = ({ value }: any) => (\r\n    <Tooltip title={<span>Go to sub-elements</span>}>\r\n      <span>\r\n        <b>{value}</b>\r\n      </span>\r\n    </Tooltip>\r\n  );\r\n\r\n  const CellTooltip = (props: any) => (\r\n    <DataTypeProvider formatterComponent={TooltipFormatter} {...props} />\r\n  );\r\n\r\n  const handleRowClick = (row: IBuildingElement) => {\r\n    dispatch(allActions.elementAndMaterialActions.selectBuildingElement(row));\r\n    dispatch(allActions.elementAndMaterialActions.addToElementRoute(row));\r\n  };\r\n\r\n  const EditButton = ({ onExecute }: any) => (\r\n    <Tooltip title='Go to sub-elements'>\r\n      <IconButton onClick={onExecute}>\r\n        <ChevronRightIcon />\r\n      </IconButton>\r\n    </Tooltip>\r\n  );\r\n\r\n  const commandComponents: any = {\r\n    edit: EditButton,\r\n  };\r\n\r\n  const Command = ({ id, onExecute }: any) => {\r\n    const CommandButton = commandComponents[id];\r\n    return <CommandButton onExecute={onExecute} />;\r\n  };\r\n\r\n  const rows = getChildElements(buildingElements, selectedBuildingElement);\r\n  const height = 500; // 232 + rows.length * 50;\r\n\r\n  return (\r\n    <Grid rows={rows} columns={columns}>\r\n      <BoldTypeProvider for={boldColumns} />\r\n      {/* <CellTooltip for={tooltipColumns} /> */}\r\n      <DecimalTypeProvider for={decimalColumns} />\r\n      <SortingState />\r\n      <IntegratedSorting />\r\n      <EditingState onCommitChanges={() => {}} />\r\n      <VirtualTable\r\n        columnExtensions={columnExtensions}\r\n        rowComponent={CustomTableRow}\r\n        height={height}\r\n      />\r\n      <TableHeaderRow showSortingControls sortLabelComponent={SortLabel} />\r\n      <TableEditColumn\r\n        // showEditCommand={isSimulationModeActive}\r\n        showEditCommand\r\n        commandComponent={Command}\r\n        // cellComponent={EditCell}\r\n        width={80}\r\n      />\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default ElementsTable;\r\n","import React from \"react\";\r\nimport { LCAPhaseTooltip } from \"interfaces/enums\";\r\n\r\nexport const customizeHint = (e: any) => {\r\n  switch (e.seriesName) {\r\n    case \"A1-A3\":\r\n      return LCAPhaseTooltip.A1A3;\r\n      break;\r\n    case \"A4\":\r\n      return LCAPhaseTooltip.A4;\r\n      break;\r\n    case \"B4\":\r\n      return LCAPhaseTooltip.B4;\r\n      break;\r\n    case \"B4 (m)\":\r\n      return LCAPhaseTooltip.B4m;\r\n      break;\r\n    case \"B4 (t)\":\r\n      return LCAPhaseTooltip.B4t;\r\n      break;\r\n  }\r\n};\r\n","import React, { useState, useEffect, useRef, useCallback } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { IRootState } from \"redux/reducers\";\r\nimport allActions from \"redux/actions\";\r\n\r\nimport Paper from \"@material-ui/core/Paper\";\r\n\r\nimport {\r\n  Theme,\r\n  createStyles,\r\n  makeStyles,\r\n} from \"@material-ui/core/styles\";\r\n\r\nimport {\r\n  Chart,\r\n  Series,\r\n  CommonSeriesSettings,\r\n  Legend,\r\n  ArgumentAxis,\r\n  ValueAxis,\r\n  Title,\r\n  Tooltip,\r\n  Size,\r\n  Label,\r\n} from \"devextreme-react/chart\";\r\n\r\nimport { sortByEE, wrapArgumentAxisLabel } from \"helpers/materialHelpers\";\r\nimport { customizeHint } from \"components/ChartComponents\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    chart: {\r\n      padding: theme.spacing(2),\r\n    },\r\n    argumentAxisLabel: {\r\n      fill: \"#767676\",\r\n    },\r\n  })\r\n);\r\n\r\nconst ElementsChart = () => {\r\n  const chartRef = useRef<Chart>(null);\r\n\r\n  var renderOptions = {\r\n    force: true, // forces redrawing\r\n    animate: true, // redraws the UI component with animation\r\n  };\r\n\r\n  const resizeObserver = useRef<ResizeObserver>(\r\n    new ResizeObserver((entries: ResizeObserverEntry[]) => {\r\n      // your code to handle the size change\r\n      console.log(\"Size changed\");\r\n      chartRef?.current?.instance.render(renderOptions);\r\n    })\r\n  );\r\n\r\n  const resizedContainerRef = useCallback(\r\n    (container: HTMLDivElement) => {\r\n      if (container !== null) {\r\n        resizeObserver.current.observe(container);\r\n      }\r\n      // When element is unmounted, ref callback is called with a null argument\r\n      // => best time to cleanup the observer\r\n      else {\r\n        if (resizeObserver.current) resizeObserver.current.disconnect();\r\n      }\r\n    },\r\n    [resizeObserver.current]\r\n  );\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const buildingElements = useSelector(\r\n    (state: IRootState) => state.buildingElements\r\n  );\r\n  const selectedBuildingElement = useSelector(\r\n    (state: IRootState) => state.selectedBuildingElement\r\n  );\r\n  const [chartData, setChartData] = useState<IElementChartItem[]>([]);\r\n\r\n  useEffect(() => {\r\n    const childElements = getChildElements(selectedBuildingElement);\r\n    const chartData: IElementChartItem[] = [];\r\n\r\n    childElements.forEach((element) => {\r\n      const dataEntry: IElementChartItem = {\r\n        name: element.idlevels + \" - \" + element.name,\r\n        id: String(element.idbuilding_elements),\r\n        A1A3: Number(element.A1A3) || 0.0,\r\n        A4: Number(element.A4) || 0.0,\r\n        B4_m: Number(element.B4_m) || 0.0,\r\n        B4_t: Number(element.B4_t) || 0.0,\r\n      };\r\n\r\n      chartData.push(dataEntry);\r\n    });\r\n\r\n    const sortedChartData = sortByEE(chartData) as IElementChartItem[];\r\n\r\n    setChartData(sortedChartData);\r\n  }, [selectedBuildingElement]);\r\n\r\n  const getChildElements = (parentElement: IBuildingElement) => {\r\n    const childElements = buildingElements.filter(\r\n      (element) => element.idparent === parentElement.idlevels\r\n    );\r\n    if (childElements !== undefined) {\r\n      return childElements;\r\n    }\r\n\r\n    return [];\r\n  };\r\n\r\n  const customizeTooltip = (arg: any) => {\r\n    return {\r\n      text: `<b>${arg.seriesName}</b>\\n ${arg.valueText}`,\r\n    };\r\n  };\r\n\r\n  const onPointClick = (e: any) => {\r\n    const point = e.target;\r\n    const clickedElementId = Number(point.data.id);\r\n\r\n    const element = buildingElements.find(\r\n      (el) => el.idbuilding_elements === clickedElementId\r\n    );\r\n\r\n    if (element !== undefined) {\r\n      dispatch(\r\n        allActions.elementAndMaterialActions.selectBuildingElement(element)\r\n      );\r\n      dispatch(allActions.elementAndMaterialActions.addToElementRoute(element));\r\n    }\r\n  };\r\n\r\n  const onDrawn = (e: any) => {\r\n    // Add pointer cursor to all bar points\r\n    e.element.querySelectorAll(\".dxc-markers rect\").forEach((el: any) => {\r\n      el.style.cursor = \"pointer\";\r\n    });\r\n\r\n    // Add pointer cursor to argument axis labels\r\n    e.element\r\n      .querySelector(\".dxc-arg-elements\")\r\n      .childNodes.forEach((el: any) => {\r\n        el.style.cursor = \"pointer\";\r\n      });\r\n  };\r\n\r\n  const height = 500; //+ chartData.length * 50;\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Paper ref={resizedContainerRef}>\r\n      <Chart\r\n        className={classes.chart}\r\n        dataSource={chartData}\r\n        palette='Material'\r\n        rotated={true}\r\n        onPointClick={onPointClick}\r\n        onDrawn={onDrawn}\r\n        ref={chartRef}\r\n      >\r\n        <Size height={height} />\r\n        <CommonSeriesSettings\r\n          argumentField='name'\r\n          type='stackedBar'\r\n          barWidth={40}\r\n          hoverMode='allArgumentPoints'\r\n        ></CommonSeriesSettings>\r\n        <Series valueField='A1A3' name='A1-A3' />\r\n        <Series valueField='A4' name='A4' />\r\n        <Series valueField='B4_m' name='B4 (m)' />\r\n        <Series valueField='B4_t' name='B4 (t)' />\r\n        <ValueAxis>\r\n          <Title\r\n            text={\"kgCO2e\"}\r\n            font={{\r\n              size: 14,\r\n            }}\r\n          />\r\n        </ValueAxis>\r\n        <ArgumentAxis>\r\n          <Label customizeText={wrapArgumentAxisLabel} />\r\n        </ArgumentAxis>\r\n        <Legend\r\n          verticalAlignment='bottom'\r\n          horizontalAlignment='center'\r\n          itemTextPosition='top'\r\n          customizeHint={customizeHint}\r\n        />\r\n        <Tooltip\r\n          enabled={true}\r\n          location='edge'\r\n          customizeTooltip={customizeTooltip}\r\n          zIndex={1200}\r\n          arrowLength={6}\r\n          format={{\r\n            format: (value: string) => parseFloat(value).toLocaleString(),\r\n          }}\r\n          interactive\r\n        />\r\n      </Chart>\r\n    </Paper>\r\n  );\r\n};\r\n\r\nexport default ElementsChart;\r\n","import { Column, EditingState } from \"@devexpress/dx-react-grid\";\r\nimport { Table } from \"@devexpress/dx-react-grid-material-ui\";\r\n\r\nclass ColumnData {\r\n  static readonly columns: Column[] = [\r\n    { name: \"name\", title: \"Name\" },\r\n    // { name: \"idmaterialInventory\", title: \"ID\" },\r\n    { name: \"quantity\", title: \"Quantity\" },\r\n    { name: \"FU\", title: \"FU\" },\r\n    { name: \"sourceType\", title: \"Source type\" },\r\n    { name: \"A1A3\", title: \"A1-A3\" },\r\n    { name: \"A4\", title: \"A4\" },\r\n    { name: \"B4_m\", title: \"B4 (m)\" },\r\n    { name: \"B4_t\", title: \"B4 (t)\" },\r\n    { name: \"RSL_mi\", title: \"RSL\" },\r\n    { name: \"materialCat\", title: \"Category\" },\r\n    { name: \"buildingElementName\", title: \"Building element\" },\r\n    // { name: \"RSL\", title: \"RSL\" },\r\n    { name: \"source\", title: \"Source\" },\r\n    { name: \"dataType\", title: \"Data type\" },\r\n    { name: \"dataYear\", title: \"Data year\" },\r\n    { name: \"density\", title: \"Density\" },\r\n    { name: \"EEf_A1A3\", title: \"EEf_A1A3\" },\r\n    { name: \"country\", title: \"Country\" },\r\n    { name: \"city\", title: \"City\" },\r\n    { name: \"comments\", title: \"Comments\" },\r\n  ];\r\n\r\n  static readonly columnExtensions: Table.ColumnExtension[] = [\r\n    { columnName: \"idmaterialInventory\", width: 80 },\r\n    { columnName: \"name\", width: 270, wordWrapEnabled: true },\r\n    { columnName: \"dataType\", width: 120 },\r\n    { columnName: \"sourceType\", width: 120 },\r\n    { columnName: \"source\", width: 200, wordWrapEnabled: true },\r\n    { columnName: \"dataYear\", width: 100 },\r\n    { columnName: \"FU\", width: 70 },\r\n    { columnName: \"EEf_A1A3\", width: 110 },\r\n    // { columnName: \"RSL\", width: 80 },\r\n    { columnName: \"comments\", width: 400 },\r\n    { columnName: \"materialCat\", width: 150 },\r\n    { columnName: \"quantity\", width: 110 },\r\n    { columnName: \"RSL_mi\", width: 80 },\r\n    { columnName: \"A1A3\", width: 130 },\r\n    { columnName: \"A4\", width: 130 },\r\n    { columnName: \"B4_m\", width: 130 },\r\n    { columnName: \"B4_t\", width: 130 },\r\n    { columnName: \"buildingElementName\", width: 160, wordWrapEnabled: true },\r\n  ];\r\n\r\n  static readonly defaultHiddenColumnNames: string[] = [\r\n    \"source\",\r\n    // \"RSL\",\r\n    \"dataType\",\r\n    \"dataYear\",\r\n    \"comments\",\r\n    \"EEf_A1A3\",\r\n    \"density\",\r\n    \"country\",\r\n    \"city\",\r\n  ];\r\n\r\n  static readonly tableColumnVisibilityColumnExtensions = [\r\n    { columnName: \"name\", togglingEnabled: false },\r\n  ];\r\n\r\n  static readonly decimalColumns = [\r\n    \"quantity\",\r\n    \"EEf_A1A3\",\r\n    \"A1A3\",\r\n    \"A4\",\r\n    \"B4_t\",\r\n    \"B4_m\",\r\n    \"RSL_mi\"\r\n  ];\r\n\r\n  static readonly groupSummaryItems = [\r\n    {\r\n      columnName: \"quantity\",\r\n      type: \"sum\",\r\n      showInGroupFooter: false,\r\n      alignByColumn: true,\r\n    },\r\n    {\r\n      columnName: \"FU\",\r\n      type: \"staticValue\",\r\n      showInGroupFooter: false,\r\n      alignByColumn: true,\r\n    },\r\n    {\r\n      columnName: \"sourceType\",\r\n      type: \"staticValue\",\r\n      showInGroupFooter: false,\r\n      alignByColumn: true,\r\n    },\r\n    {\r\n      columnName: \"materialCat\",\r\n      type: \"staticValue\",\r\n      showInGroupFooter: false,\r\n      alignByColumn: true,\r\n    },\r\n    {\r\n      columnName: \"RSL_mi\",\r\n      type: \"avg\",\r\n      showInGroupFooter: false,\r\n      alignByColumn: true,\r\n    },\r\n    {\r\n      columnName: \"A1A3\",\r\n      type: \"sum\",\r\n      showInGroupFooter: false,\r\n      alignByColumn: true,\r\n    },\r\n    {\r\n      columnName: \"A4\",\r\n      type: \"sum\",\r\n      showInGroupFooter: false,\r\n      alignByColumn: true,\r\n    },\r\n    {\r\n      columnName: \"B4_m\",\r\n      type: \"sum\",\r\n      showInGroupFooter: false,\r\n      alignByColumn: true,\r\n    },\r\n    {\r\n      columnName: \"B4_t\",\r\n      type: \"sum\",\r\n      showInGroupFooter: false,\r\n      alignByColumn: true,\r\n    },\r\n  ];\r\n\r\n  static readonly editingStateColumnExtensions: EditingState.ColumnExtension[] = [\r\n    { columnName: \"idmaterialInventory\", editingEnabled: false },\r\n    { columnName: \"name\", editingEnabled: false },\r\n    { columnName: \"buildingElementName\", editingEnabled: false },\r\n    // { columnName: \"quantity\", editingEnabled: false},\r\n    { columnName: \"FU\", editingEnabled: false },\r\n    // { columnName: \"sourceType\", editingEnabled: false},\r\n    // { columnName: \"RSL\", editingEnabled: false },\r\n    { columnName: \"materialCat\", editingEnabled: false },\r\n    { columnName: \"RSL_mi\", editingEnabled: false },\r\n    // { columnName: \"EEf_A1A3\", editingEnabled: false},\r\n    // { columnName: \"A1A3\", editingEnabled: false},\r\n    // { columnName: \"A4\", editingEnabled: false},\r\n    // { columnName: \"B4_m\", editingEnabled: false},\r\n    // { columnName: \"B4_t\", editingEnabled: false},\r\n    { columnName: \"dataType\", editingEnabled: false },\r\n    { columnName: \"dataYear\", editingEnabled: false },\r\n    { columnName: \"comments\", editingEnabled: false },\r\n  ];\r\n}\r\n\r\nexport default ColumnData;\r\n","import React from \"react\";\r\nimport ChevronRight from \"@material-ui/icons/ChevronRight\";\r\nimport ExpandMore from \"@material-ui/icons/ExpandMore\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport Menu from \"@material-ui/core/Menu\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport Input from \"@material-ui/core/Input\";\r\n\r\nimport { VirtualTable } from \"@devexpress/dx-react-grid-material-ui\";\r\n\r\nimport { Theme, createStyles, makeStyles } from \"@material-ui/core/styles\";\r\nimport theme from \"styles/theme\";\r\n\r\nimport { useSelector } from \"react-redux\";\r\nimport { IRootState } from \"redux/reducers\";\r\n\r\nconst useStyles = makeStyles((/* theme: Theme */) =>\r\n  createStyles({\r\n    cell: {\r\n      padding: theme.spacing(1),\r\n    },\r\n    indentCell: {\r\n      padding: 0,\r\n    },\r\n    groupButton: {\r\n      height: theme.spacing(4),\r\n      width: theme.spacing(4),\r\n    },\r\n    lookupEditCell: {\r\n      padding: theme.spacing(1),\r\n    },\r\n    inputRoot: {\r\n      width: \"100%\",\r\n    },\r\n    selectMenu: {\r\n      position: \"absolute !important\" as \"absolute\",\r\n    },\r\n    editCell: {\r\n      paddingTop: theme.spacing(0),\r\n      paddingBottom: theme.spacing(0),\r\n    },\r\n    simulatedField: {\r\n      color: theme.palette.simulated.main,\r\n      // fontWeight: \"bolder\",\r\n    },\r\n  }));\r\n\r\nexport const GroupCell = ({\r\n  style,\r\n  colSpan,\r\n  row,\r\n  column,\r\n  expanded,\r\n  onToggle,\r\n  classes,\r\n  children,\r\n  className,\r\n  tableRow,\r\n  tableColumn,\r\n  contentComponent,\r\n  iconComponent,\r\n  indentCellComponent,\r\n  inlineSummaryComponent,\r\n  inlineSummaryItemComponent,\r\n  summaryCellComponent,\r\n  summaryItemComponent,\r\n  containerComponent,\r\n  inlineSummaries,\r\n  getMessage,\r\n  ...restProps\r\n}: any) => {\r\n  const handleClick = () => onToggle();\r\n  const styles = useStyles();\r\n  return (\r\n    <TableCell\r\n      colSpan={colSpan}\r\n      style={style}\r\n      className={styles.cell}\r\n      onClick={handleClick}\r\n      {...restProps}\r\n    >\r\n      <Grid container alignItems='center' justify='space-around'>\r\n        <Grid item xs={2}>\r\n          <IconButton className={styles.groupButton}>\r\n            {expanded ? <ExpandMore /> : <ChevronRight />}\r\n          </IconButton>\r\n        </Grid>\r\n        <Grid item xs={10}>\r\n          <span>\r\n            <strong>{children || row.value}</strong>\r\n          </span>\r\n        </Grid>\r\n      </Grid>\r\n    </TableCell>\r\n  );\r\n};\r\n\r\nexport const SummaryCell = ({\r\n  style,\r\n  colSpan,\r\n  row,\r\n  column,\r\n  expanded,\r\n  onToggle,\r\n  classes,\r\n  children,\r\n  className,\r\n  tableRow,\r\n  tableColumn,\r\n  contentComponent,\r\n  iconComponent,\r\n  indentCellComponent,\r\n  inlineSummaryComponent,\r\n  inlineSummaryItemComponent,\r\n  summaryCellComponent,\r\n  summaryItemComponent,\r\n  containerComponent,\r\n  inlineSummaries,\r\n  getMessage,\r\n  ...restProps\r\n}: any) => {\r\n  const styles = useStyles();\r\n  const handleClick = () => onToggle();\r\n  var tooltipTitle: string = \"\";\r\n  switch (children.props.columnSummaries[0].type) {\r\n    case \"sum\":\r\n      tooltipTitle = \"Sum\";\r\n      break;\r\n    case \"avg\":\r\n      tooltipTitle = \"Average\";\r\n      break;\r\n    case \"staticValue\":\r\n      tooltipTitle = \"Static\";\r\n      break;\r\n  }\r\n  return (\r\n    <TableCell\r\n      colSpan={colSpan}\r\n      onClick={handleClick}\r\n      className={styles.cell}\r\n      {...restProps}\r\n    >\r\n      {tooltipTitle === \"Static\" ? (\r\n        <span>{children}</span>\r\n      ) : (\r\n        <Tooltip title={tooltipTitle}>\r\n          <span>{children}</span>\r\n        </Tooltip>\r\n      )}\r\n    </TableCell>\r\n  );\r\n};\r\n\r\nexport const LookupEditCell = ({\r\n  availableColumnValues,\r\n  value,\r\n  onValueChange,\r\n}: any) => (\r\n  <TableCell className={useStyles().lookupEditCell}>\r\n    <Select\r\n      value={value}\r\n      onChange={(event) => onValueChange(event.target.value)}\r\n      MenuProps={{\r\n        className: useStyles().selectMenu,\r\n      }}\r\n      input={<Input classes={{ root: useStyles().inputRoot }} />}\r\n    >\r\n      {availableColumnValues.map((item: any) => (\r\n        <MenuItem key={item} value={item}>\r\n          {item}\r\n        </MenuItem>\r\n      ))}\r\n    </Select>\r\n  </TableCell>\r\n);\r\n\r\nexport const EditCell = ({ children, style, ...restProps }: any) => {\r\n  return (\r\n    <VirtualTable.Cell\r\n      {...restProps}\r\n      children={restProps.row.parentId === null ? children : null}\r\n      style={{ paddingTop: \"0px\", paddingBottom: \"0px\", ...style }}\r\n    />\r\n  );\r\n};\r\n\r\nconst SimulatedFieldCell = ({ value, style, ...restProps }: any) => (\r\n  <VirtualTable.Cell\r\n    {...restProps}\r\n    style={{\r\n      ...style,\r\n    }}\r\n  >\r\n    <Tooltip title=\"Simulated value\">\r\n      <span\r\n        style={{\r\n          color: theme.palette.simulated.main,\r\n          fontWeight: \"bold\"\r\n        }}\r\n      >\r\n        {typeof value === \"number\" ? value.toLocaleString() : value}\r\n      </span>\r\n    </Tooltip>\r\n  </VirtualTable.Cell>\r\n);\r\n\r\nexport const MaterialProductCell = (\r\n  props: any,\r\n  simulatedData: ISimulatedData\r\n) => {\r\n  const { column, row } = props;\r\n\r\n  if (row.idmaterialInventory in simulatedData) {\r\n    if (column.name in simulatedData[row.idmaterialInventory]) {\r\n      return <SimulatedFieldCell {...props} />;\r\n    }\r\n  }\r\n\r\n  return <VirtualTable.Cell {...props} />;\r\n};\r\n","export function reduceEmissionNumber(emissionNumber: number) {\r\n  var reducedNumber = emissionNumber * 0.7;\r\n  return roundTo(reducedNumber, 3);\r\n}\r\n\r\nexport const roundTo = function (num: number, places: number) {\r\n  const factor = 10 ** places;\r\n  return Math.round(num * factor) / factor;\r\n};\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { IRootState } from \"redux/reducers\";\r\nimport allActions from \"redux/actions\";\r\n\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport {\r\n  Plugin,\r\n  Template,\r\n  TemplateConnector,\r\n  TemplatePlaceholder,\r\n} from \"@devexpress/dx-react-core\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport FormGroup from \"@material-ui/core/FormGroup\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport FormLabel from \"@material-ui/core/FormLabel\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport EditIcon from \"@material-ui/icons/Edit\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nimport { Theme, createStyles, makeStyles } from \"@material-ui/core/styles\";\r\nimport theme from \"styles/theme\";\r\n\r\nimport { reduceEmissionNumber } from \"./SimulationHelpers\";\r\nimport { LCAPhaseTooltip } from \"interfaces/enums\";\r\n\r\nconst useStyles = makeStyles((/* theme: Theme */) =>\r\n  createStyles({\r\n    labelAsterisk: {\r\n      color: theme.palette.simulated.main,\r\n      fontWeight: \"bolder\",\r\n      fontSize: \"large\",\r\n    },\r\n    subtitleAsterisk: {\r\n      color: theme.palette.simulated.main,\r\n      fontWeight: \"bolder\",\r\n    },\r\n  }));\r\n\r\nconst sourceTypes = [\r\n  \"TestSource\",\r\n  \"EPD\",\r\n  \"Ecoinvent\",\r\n  \"Other\",\r\n  \"Custom\",\r\n  \"na\",\r\n  \"Klimatre\",\r\n  \"PEP\",\r\n];\r\n\r\ninterface PopupProps {\r\n  row: IMaterialTableRow;\r\n  onChange: any;\r\n  onApplyChanges: any;\r\n  onCancelChanges: any;\r\n  open: boolean;\r\n}\r\n\r\nexport const Popup = ({\r\n  row,\r\n  onChange,\r\n  onApplyChanges,\r\n  onCancelChanges,\r\n  open,\r\n}: PopupProps) => {\r\n  const [originalRow, setOriginalRow] = useState<IMaterialTableRow>(row);\r\n  const [sourceType, setSourceType] = useState<string>(row.sourceType);\r\n  const [A1A3, setA1A3] = useState<number>(row.A1A3);\r\n\r\n  const materialProducts = useSelector(\r\n    (state: IRootState) => state.materialProducts\r\n  );\r\n  const simulatedMaterialProducts = useSelector(\r\n    (state: IRootState) => state.simulatedMaterialProducts\r\n  );\r\n\r\n  useEffect(() => {\r\n    const nonSimulatedRow = (materialProducts as IMaterialTableRow[]).find(\r\n      (product) => product.idmaterialInventory === row.idmaterialInventory\r\n    );\r\n    if (nonSimulatedRow !== undefined) {\r\n      setOriginalRow(nonSimulatedRow);\r\n      setSourceType(row.sourceType);\r\n      setA1A3(row.A1A3);\r\n    }\r\n  }, [row.idmaterialInventory]);\r\n\r\n  const handleSourceTypeChange = (\r\n    event: React.ChangeEvent<HTMLInputElement>\r\n  ) => {\r\n    setSourceType(event.target.value);\r\n    if (event.target.value === \"TestSource\") {\r\n      const simulatedValue = reduceEmissionNumber(originalRow.A1A3);\r\n      setA1A3(simulatedValue);\r\n      const textFieldEvent = {\r\n        target: { name: \"A1A3\", value: simulatedValue },\r\n      };\r\n      onChange(textFieldEvent);\r\n    } else if (event.target.value === originalRow.sourceType) {\r\n      setA1A3(originalRow.A1A3);\r\n      const textFieldEvent = {\r\n        target: { name: \"A1A3\", value: originalRow.A1A3 },\r\n      };\r\n      onChange(textFieldEvent);\r\n    }\r\n    onChange(event);\r\n  };\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Dialog open={open} onClose={onCancelChanges}>\r\n      <DialogTitle disableTypography>\r\n        <Typography variant='h6' component='h2'>\r\n          Simulate material details\r\n        </Typography>\r\n        <Typography noWrap variant='subtitle2' component='h3'>\r\n          {row.name}\r\n        </Typography>\r\n      </DialogTitle>\r\n      <DialogContent>\r\n        {/* <Typography variant='body2' component='p' color='textSecondary'>\r\n          Simulated fields are marked with{\" \"}\r\n          <Typography\r\n            variant='body1'\r\n            component='span'\r\n            display='inline'\r\n            className={classes.subtitleAsterisk}\r\n          >\r\n            *\r\n          </Typography>\r\n        </Typography> */}\r\n        <Grid container spacing={3}>\r\n          <Grid item xs={6}>\r\n            <FormGroup>\r\n              <TextField\r\n                select\r\n                required={sourceType !== originalRow.sourceType}\r\n                margin='normal'\r\n                name='sourceType'\r\n                label='Source type'\r\n                value={sourceType || \" \"}\r\n                onChange={handleSourceTypeChange}\r\n                InputLabelProps={{\r\n                  classes: {\r\n                    asterisk: classes.labelAsterisk,\r\n                  },\r\n                }}\r\n              >\r\n                {sourceTypes.map((option) => (\r\n                  <MenuItem\r\n                    key={option}\r\n                    value={option}\r\n                    disabled={\r\n                      !(\r\n                        option === originalRow.sourceType ||\r\n                        option === \"TestSource\"\r\n                      )\r\n                    }\r\n                  >\r\n                    {option}\r\n                  </MenuItem>\r\n                ))}\r\n              </TextField>\r\n              <TextField\r\n                margin='normal'\r\n                name='materialCat'\r\n                label='Category'\r\n                value={row.materialCat || \" \"}\r\n                onChange={onChange}\r\n                disabled\r\n              />\r\n              <TextField\r\n                margin='normal'\r\n                name='quantity'\r\n                label='Quantity'\r\n                value={row.quantity || \"0\"}\r\n                onChange={onChange}\r\n                disabled\r\n                InputProps={{\r\n                  startAdornment: (\r\n                    <InputAdornment position='start'>\r\n                      {row.FU || \"\"}\r\n                    </InputAdornment>\r\n                  ),\r\n                }}\r\n              />\r\n              <TextField\r\n                margin='normal'\r\n                name='RSL_mi'\r\n                label='RSL'\r\n                value={row.RSL_mi || \"0\"}\r\n                onChange={onChange}\r\n                disabled\r\n              />\r\n            </FormGroup>\r\n          </Grid>\r\n          <Grid item xs={6}>\r\n            <FormGroup>\r\n              <Tooltip enterDelay={500} placement=\"bottom\" title={LCAPhaseTooltip.A1A3}>\r\n                <TextField\r\n                  required={A1A3 !== originalRow.A1A3}\r\n                  margin='normal'\r\n                  name='A1A3'\r\n                  label='A1-A3'\r\n                  value={A1A3 || \"0\"}\r\n                  onChange={onChange}\r\n                  disabled\r\n                  InputLabelProps={{\r\n                    classes: {\r\n                      asterisk: classes.labelAsterisk,\r\n                    },\r\n                  }}\r\n                />\r\n              </Tooltip>\r\n              <Tooltip enterDelay={500} placement=\"bottom\" title={LCAPhaseTooltip.A4}>\r\n                <TextField\r\n                  margin='normal'\r\n                  name='A4'\r\n                  label='A4'\r\n                  value={row.A4 || \"0\"}\r\n                  onChange={onChange}\r\n                  disabled\r\n                />\r\n              </Tooltip>\r\n              <Tooltip enterDelay={500} placement=\"bottom\" title={LCAPhaseTooltip.B4m}>\r\n                <TextField\r\n                  margin='normal'\r\n                  name='B4_m'\r\n                  label='B4 (m)'\r\n                  value={row.B4_m || \"0\"}\r\n                  onChange={onChange}\r\n                  disabled\r\n                />\r\n              </Tooltip>\r\n              <Tooltip enterDelay={500} placement=\"bottom\" title={LCAPhaseTooltip.B4t}>\r\n                <TextField\r\n                  margin='normal'\r\n                  name='B4_t'\r\n                  label='B4 (t)'\r\n                  value={row.B4_t || \"0\"}\r\n                  onChange={onChange}\r\n                  disabled\r\n                />\r\n              </Tooltip>\r\n            </FormGroup>\r\n          </Grid>\r\n        </Grid>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={onCancelChanges} color='primary'>\r\n          Cancel\r\n        </Button>\r\n        <Button onClick={onApplyChanges} color='primary'>\r\n          Save\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport const PopupEditing = React.memo(({ popupComponent: Popup }: any) => (\r\n  <Plugin>\r\n    <Template name='popupEditing'>\r\n      <TemplateConnector>\r\n        {(\r\n          { rows, getRowId, editingRowIds, createRowChange, rowChanges },\r\n          { changeRow, commitChangedRows, stopEditRows, cancelChangedRows }\r\n        ) => {\r\n          let editedRow: any;\r\n          let rowId: number;\r\n          [rowId] = editingRowIds;\r\n          const targetRow = rows.filter(\r\n            (row: any) => getRowId(row) === rowId\r\n          )[0];\r\n          editedRow = { ...targetRow, ...rowChanges[rowId] };\r\n\r\n          const processValueChange = ({ target: { name, value } }: any) => {\r\n            const changeArgs = {\r\n              rowId,\r\n              change: createRowChange(editedRow, value, name),\r\n            };\r\n            changeRow(changeArgs);\r\n          };\r\n          const rowIds = editingRowIds;\r\n          const applyChanges = () => {\r\n            stopEditRows({ rowIds });\r\n            commitChangedRows({ rowIds });\r\n          };\r\n          const cancelChanges = () => {\r\n            stopEditRows({ rowIds });\r\n            cancelChangedRows({ rowIds });\r\n          };\r\n\r\n          const open = editingRowIds.length > 0;\r\n          return (\r\n            <Popup\r\n              open={open}\r\n              row={editedRow}\r\n              onChange={processValueChange}\r\n              onApplyChanges={applyChanges}\r\n              onCancelChanges={cancelChanges}\r\n            />\r\n          );\r\n        }}\r\n      </TemplateConnector>\r\n    </Template>\r\n    <Template name='root'>\r\n      <TemplatePlaceholder />\r\n      <TemplatePlaceholder name='popupEditing' />\r\n    </Template>\r\n  </Plugin>\r\n));\r\n","import React, { useState, useEffect, useCallback } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { IRootState } from \"redux/reducers\";\r\nimport { writeSimulatedDataToDb } from \"services/firebase\";\r\n\r\nimport { getKeyValue } from \"get-key-value\";\r\nimport theme from \"styles/theme\";\r\n\r\nimport {\r\n  Theme,\r\n  createStyles,\r\n  makeStyles,\r\n  withStyles,\r\n  emphasize,\r\n} from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport EditIcon from \"@material-ui/icons/Edit\";\r\nimport SaveIcon from \"@material-ui/icons/Save\";\r\nimport CancelIcon from \"@material-ui/icons/Cancel\";\r\nimport Input from \"@material-ui/core/Input\";\r\n\r\nimport {\r\n  SortingState,\r\n  IntegratedSorting,\r\n  IntegratedFiltering,\r\n  SearchState,\r\n  DataTypeProvider,\r\n  GroupingState,\r\n  IntegratedGrouping,\r\n  SummaryState,\r\n  IntegratedSummary,\r\n  TableGroupRowProps,\r\n  EditingState,\r\n  TreeDataState,\r\n  CustomTreeData,\r\n} from \"@devexpress/dx-react-grid\";\r\nimport {\r\n  Grid,\r\n  TableHeaderRow,\r\n  VirtualTable,\r\n  Toolbar,\r\n  SearchPanel,\r\n  ColumnChooser,\r\n  TableColumnVisibility,\r\n  TableFixedColumns,\r\n  TableGroupRow,\r\n  TableSummaryRow,\r\n  GroupingPanel,\r\n  TableEditColumn,\r\n  TableEditRow,\r\n  TableTreeColumn,\r\n} from \"@devexpress/dx-react-grid-material-ui\";\r\n\r\nimport _, { update } from \"lodash\";\r\n\r\nimport ColumnData from \"./ColumnData\";\r\nimport {\r\n  GroupCell,\r\n  SummaryCell,\r\n  LookupEditCell,\r\n  EditCell,\r\n  MaterialProductCell,\r\n} from \"components/TableUtilities/CustomCells\";\r\nimport {\r\n  DecimalTypeProvider,\r\n  SortLabel,\r\n  SimulatedFieldTypeProvider,\r\n} from \"components/TableUtilities/Formatters\";\r\nimport { Popup, PopupEditing } from \"components/TableUtilities/EditPlugin\";\r\nimport allActions from \"redux/actions\";\r\nimport { mergeSimulatedDataIntoMaterialProducts } from \"helpers/materialHelpers\";\r\n\r\ninterface Props {\r\n  data: IMaterialTableRow[];\r\n}\r\n\r\nconst getRowId = (row: any) => row.idmaterialInventory;\r\n\r\nconst getHiddenColumnsFilteringExtensions = (hiddenColumnNames: string[]) =>\r\n  hiddenColumnNames.map((columnName) => ({\r\n    columnName,\r\n    predicate: () => false,\r\n  }));\r\n\r\nconst EditButton = ({ onExecute }: any) => (\r\n  <Tooltip title='Edit material'>\r\n    <IconButton onClick={onExecute}>\r\n      <EditIcon />\r\n    </IconButton>\r\n  </Tooltip>\r\n);\r\n\r\nconst commandComponents: any = {\r\n  edit: EditButton,\r\n};\r\n\r\nconst Command = ({ id, onExecute }: any) => {\r\n  const CommandButton = commandComponents[id];\r\n  return <CommandButton onExecute={onExecute} />;\r\n};\r\n\r\nconst CustomTreeCell = ({ row, style, ...props }: any) => (\r\n  <TableTreeColumn.Cell\r\n    {...props}\r\n    style={{\r\n      fontWeight: row.parentId === null ? \"bold\" : undefined,\r\n      ...style,\r\n    }}\r\n  />\r\n);\r\n\r\nconst ProductTable = (props: Props) => {\r\n  const dispatch = useDispatch();\r\n\r\n  const selectedBuildings = useSelector(\r\n    (state: IRootState) => state.selectedBuildings\r\n  );\r\n  const materialProducts = useSelector(\r\n    (state: IRootState) => state.materialProducts\r\n  );\r\n  const simulatedMaterialProducts = useSelector(\r\n    (state: IRootState) => state.simulatedMaterialProducts\r\n  );\r\n  const simulatedData = useSelector((state: IRootState) => state.simulatedData);\r\n  const isSimulationModeActive = useSelector(\r\n    (state: IRootState) => state.isSimulationModeActive\r\n  );\r\n\r\n  const [rows, setRows] = useState<IMaterialTableRow[]>([]);\r\n  const [columns] = useState(ColumnData.columns);\r\n  const [columnExtensions] = useState(ColumnData.columnExtensions);\r\n  const [defaultHiddenColumnNames] = useState(\r\n    ColumnData.defaultHiddenColumnNames\r\n  );\r\n  const [tableColumnVisibilityColumnExtensions] = useState(\r\n    ColumnData.tableColumnVisibilityColumnExtensions\r\n  );\r\n\r\n  const [decimalColumns] = useState(ColumnData.decimalColumns);\r\n\r\n  useEffect(() => {\r\n    // console.log(\"Useeffect, props: \", props.data)\r\n    setRows(props.data);\r\n  }, [props.data]);\r\n\r\n  const [searchTerm, setSearchTerm] = useState<string>();\r\n\r\n  const changeSearchTerm = (value: any) => {\r\n    console.log(\"Changed search term: \", value);\r\n    setSearchTerm(value);\r\n  };\r\n\r\n  // Delays query so it is not fired on every keystroke\r\n  const delayedCallback = useCallback(_.debounce(changeSearchTerm, 300), []);\r\n\r\n  // Only search in visible columns\r\n  const [filteringColumnExtensions, setFilteringColumnExtensions] = useState(\r\n    getHiddenColumnsFilteringExtensions(defaultHiddenColumnNames)\r\n  );\r\n\r\n  const onHiddenColumnNamesChange = (hiddenColumnNames: string[]) =>\r\n    setFilteringColumnExtensions(\r\n      getHiddenColumnsFilteringExtensions(hiddenColumnNames)\r\n    );\r\n\r\n  const [expandedRowIds, setExpandedRowIds] = useState<(string | number)[]>([]);\r\n\r\n  const [leftFixedColumns] = useState([TableEditColumn.COLUMN_TYPE, \"name\"]);\r\n\r\n  const getChildRows = (row: any, rootRows: any) => {\r\n    const childRows = rootRows.filter(\r\n      (r: any) => r.parentId === (row ? row.idmaterialInventory : null)\r\n    );\r\n    return childRows.length ? childRows : null;\r\n  };\r\n\r\n  const commitChanges = ({ changed }: any) => {\r\n    console.log(\"Changed: \", changed);\r\n    const changedRowId = Object.keys(changed)[0];\r\n    const originalRow = (materialProducts as IMaterialTableRow[]).find(\r\n      (row) => String(row.idmaterialInventory) === changedRowId\r\n    );\r\n\r\n    if (Object.values(changed)[0] !== undefined && originalRow !== undefined) {\r\n      const updatedSimulatedData: ISimulatedData = {\r\n        ...simulatedData,\r\n        ...changed,\r\n      };\r\n\r\n      for (const [key, value] of Object.entries(\r\n        updatedSimulatedData[changedRowId]\r\n      )) {\r\n        const originalValue = getKeyValue<\r\n          keyof IMaterialTableRow,\r\n          IMaterialTableRow\r\n        >(key as any, originalRow);\r\n        // Remove field from simulated data if has been reset to original value\r\n        if (value === originalValue) {\r\n          delete updatedSimulatedData[changedRowId][key];\r\n        }\r\n      }\r\n\r\n      // Remove simulated data row if all fields havs been removed it\r\n      if (Object.keys(updatedSimulatedData[changedRowId]).length === 0) {\r\n        delete updatedSimulatedData[changedRowId];\r\n      }\r\n\r\n      const updatedSimulatedMaterialProducts = mergeSimulatedDataIntoMaterialProducts(\r\n        materialProducts as IMaterialTableRow[],\r\n        updatedSimulatedData\r\n      );\r\n\r\n      const selectedBuildingId = String(selectedBuildings[0].idbuildings);\r\n      writeSimulatedDataToDb(selectedBuildingId, updatedSimulatedData);\r\n      dispatch(\r\n        allActions.elementAndMaterialActions.setSimulatedData(\r\n          updatedSimulatedData\r\n        )\r\n      );\r\n      dispatch(\r\n        allActions.elementAndMaterialActions.setSimulatedMaterialProducts(\r\n          updatedSimulatedMaterialProducts\r\n        )\r\n      );\r\n      setRows(updatedSimulatedMaterialProducts);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Grid rows={rows} columns={columns} getRowId={getRowId}>\r\n      {/* <SimulatedFieldTypeProvider for={decimalColumns} /> */}\r\n      <TreeDataState\r\n        expandedRowIds={expandedRowIds}\r\n        onExpandedRowIdsChange={setExpandedRowIds}\r\n      />\r\n      <CustomTreeData getChildRows={getChildRows} />\r\n      <SearchState onValueChange={delayedCallback} />\r\n      <IntegratedFiltering columnExtensions={filteringColumnExtensions} />\r\n      <SortingState />\r\n      <IntegratedSorting />\r\n      <EditingState onCommitChanges={commitChanges} />\r\n      <VirtualTable\r\n        columnExtensions={columnExtensions}\r\n        cellComponent={\r\n          isSimulationModeActive\r\n            ? (props) => MaterialProductCell(props, simulatedData)\r\n            : (props) => <VirtualTable.Cell {...props} />\r\n        }\r\n      />\r\n\r\n      <DecimalTypeProvider for={decimalColumns} />\r\n      <TableHeaderRow showSortingControls sortLabelComponent={SortLabel} />\r\n      <TableTreeColumn for='name' cellComponent={CustomTreeCell} />\r\n      <TableEditColumn\r\n        showEditCommand={isSimulationModeActive}\r\n        commandComponent={Command}\r\n        cellComponent={EditCell}\r\n        width={isSimulationModeActive ? 70 : 0.1}\r\n      />\r\n      <TableFixedColumns leftColumns={leftFixedColumns} />\r\n      <PopupEditing popupComponent={Popup} />\r\n      <TableColumnVisibility\r\n        defaultHiddenColumnNames={defaultHiddenColumnNames}\r\n        columnExtensions={tableColumnVisibilityColumnExtensions}\r\n        onHiddenColumnNamesChange={onHiddenColumnNamesChange}\r\n      />\r\n      <Toolbar />\r\n      <SearchPanel />\r\n      <ColumnChooser />\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default ProductTable;\r\n","import React, { useState, useEffect, useRef, useCallback } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { IRootState } from \"redux/reducers\";\r\nimport allActions from \"redux/actions\";\r\n\r\nimport { Theme, createStyles, makeStyles } from \"@material-ui/core/styles\";\r\nimport theme from \"styles/theme\";\r\n\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport {\r\n  Chart,\r\n  Series,\r\n  CommonSeriesSettings,\r\n  Legend,\r\n  ArgumentAxis,\r\n  ValueAxis,\r\n  Title,\r\n  Tooltip,\r\n  Size,\r\n  Label,\r\n} from \"devextreme-react/chart\";\r\n\r\nimport {\r\n  createMaterialChartData,\r\n  sortByEE,\r\n  wrapArgumentAxisLabel,\r\n} from \"helpers/materialHelpers\";\r\nimport { customizeHint } from \"components/ChartComponents\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    chart: {\r\n      padding: theme.spacing(2),\r\n    },\r\n    argumentAxisLabel: {\r\n      fill: \"#767676\",\r\n    },\r\n  })\r\n);\r\n\r\ninterface Props {\r\n  data: IMaterialChartItem[];\r\n}\r\n\r\nconst ProductChart = (props: Props) => {\r\n  const chartRef = useRef<Chart>(null);\r\n\r\n  var renderOptions = {\r\n    force: true, // forces redrawing\r\n    animate: true, // redraws the UI component with animation\r\n  };\r\n\r\n  const resizeObserver = useRef<ResizeObserver>(\r\n    new ResizeObserver((entries: ResizeObserverEntry[]) => {\r\n      // your code to handle the size change\r\n      console.log(\"Size changed\");\r\n      chartRef?.current?.instance.render(renderOptions);\r\n    })\r\n  );\r\n\r\n  const resizedContainerRef = useCallback(\r\n    (container: HTMLDivElement) => {\r\n      if (container !== null) {\r\n        resizeObserver.current.observe(container);\r\n      }\r\n      // When element is unmounted, ref callback is called with a null argument\r\n      // => best time to cleanup the observer\r\n      else {\r\n        if (resizeObserver.current) resizeObserver.current.disconnect();\r\n      }\r\n    },\r\n    [resizeObserver.current]\r\n  );\r\n\r\n  const [chartData, setChartData] = useState<IMaterialChartItem[]>([]);\r\n  const isSimulationModeActive = useSelector(\r\n    (state: IRootState) => state.isSimulationModeActive\r\n  );\r\n  const simulatedData = useSelector((state: IRootState) => state.simulatedData);\r\n  const simulatedMaterialProducts = useSelector(\r\n    (state: IRootState) => state.simulatedMaterialProducts\r\n  );\r\n\r\n  useEffect(() => {\r\n    const sortedChartData = sortByEE(props.data) as IMaterialChartItem[];\r\n    setChartData(sortedChartData);\r\n  }, [props.data]);\r\n\r\n  const customizeTooltip = (arg: any) => {\r\n    return {\r\n      text: `<b>${arg.seriesName}</b>\\n ${arg.valueText}`,\r\n    };\r\n  };\r\n\r\n  const labelToMaterialId = (label: string): number => {\r\n    return (\r\n      (simulatedMaterialProducts as IMaterialTableRow[]).find(\r\n        (material) => material.name === label\r\n      )?.idmaterialInventory || 0\r\n    );\r\n  };\r\n\r\n  const onDrawn = (e: any) => {\r\n    if (isSimulationModeActive) {\r\n      // Color emission series if contains simulated values\r\n      e.element\r\n        .querySelector(\".dxc-arg-elements\")\r\n        .childNodes.forEach((el: any) => {\r\n          // const fieldName = labelToFieldname(el.innerHTML);\r\n          var labelText = \"\";\r\n          if (el.childNodes.length > 1) {\r\n            let spans: string[] = [];\r\n            el.childNodes.forEach((subEl: any) => {\r\n              spans.push(subEl.innerHTML);\r\n            });\r\n            labelText = spans.join(\" \");\r\n          } else {\r\n            labelText = el.innerHTML;\r\n          }\r\n\r\n          if (labelToMaterialId(labelText) in simulatedData) {\r\n            el.style.fill = theme.palette.simulated.main;\r\n            el.style.fontWeight = 500;\r\n          }\r\n        });\r\n    }\r\n  };\r\n\r\n  const height = 200 + chartData.length * 30;\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Paper ref={resizedContainerRef}>\r\n      <Chart\r\n        className={classes.chart}\r\n        // title=\"Embodied emissions\"\r\n        dataSource={chartData}\r\n        palette='Material'\r\n        rotated={true}\r\n        onDrawn={onDrawn}\r\n        ref={chartRef}\r\n      >\r\n        <Size height={height > 500 ? height : 500} />\r\n        <CommonSeriesSettings\r\n          argumentField='name'\r\n          type='stackedBar'\r\n          barWidth={40}\r\n          hoverMode='allArgumentPoints'\r\n        ></CommonSeriesSettings>\r\n        <Series valueField='A1A3' name='A1-A3' />\r\n        <Series valueField='A4' name='A4' />\r\n        <Series valueField='B4_m' name='B4 (m)' />\r\n        <Series valueField='B4_t' name='B4 (t)' />\r\n        <ValueAxis>\r\n          <Title\r\n            text={\"kgCO2e\"}\r\n            font={{\r\n              size: 14,\r\n            }}\r\n          />\r\n        </ValueAxis>\r\n        <ArgumentAxis>\r\n          <Label customizeText={wrapArgumentAxisLabel} />\r\n        </ArgumentAxis>\r\n        <Legend\r\n          verticalAlignment='bottom'\r\n          horizontalAlignment='center'\r\n          itemTextPosition='top'\r\n          customizeHint={customizeHint}\r\n        />\r\n        <Tooltip\r\n          enabled={true}\r\n          location='edge'\r\n          customizeTooltip={customizeTooltip}\r\n          zIndex={1200}\r\n          arrowLength={6}          \r\n          format={{\r\n            format: (value: string) => parseFloat(value).toLocaleString(),\r\n          }}\r\n          interactive\r\n        />\r\n      </Chart>\r\n    </Paper>\r\n  );\r\n};\r\n\r\nexport default ProductChart;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { IRootState } from \"redux/reducers\";\r\nimport allActions from \"redux/actions\";\r\n\r\nimport { Theme, createStyles, makeStyles } from \"@material-ui/core/styles\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\n\r\nimport ProductTable from \"./ProductTable\";\r\nimport ProductChart from \"./ProductChart\";\r\nimport {\r\n  groupByMaterial,\r\n  createChildRows,\r\n  createMaterialChartData,\r\n} from \"helpers/materialHelpers\";\r\n\r\ninterface Props {\r\n  materials?: IMaterialInventory[];\r\n}\r\n\r\nconst ProductView = (props: Props) => {\r\n  const dispatch = useDispatch();\r\n\r\n  const displayMode = useSelector((state: IRootState) => state.displayMode);\r\n  const materialInventory = useSelector(\r\n    (state: IRootState) => state.materialInventory\r\n  );\r\n  const materialProducts = useSelector(\r\n    (state: IRootState) => state.materialProducts\r\n  );\r\n  const simulatedMaterialProducts = useSelector(\r\n    (state: IRootState) => state.simulatedMaterialProducts\r\n  );\r\n  const isSimulationModeActive = useSelector(\r\n    (state: IRootState) => state.isSimulationModeActive\r\n  );\r\n  const simulatedData = useSelector((state: IRootState) => state.simulatedData);\r\n\r\n  const [tableData, setTableData] = useState<IMaterialTableRow[]>([]);\r\n  const [chartData, setChartData] = useState<IMaterialChartItem[]>([]);\r\n\r\n  useEffect(() => {\r\n    let groupedMaterials;\r\n    if (isSimulationModeActive) {\r\n      groupedMaterials = simulatedMaterialProducts;\r\n    } else {\r\n      groupedMaterials = props.materials\r\n        ? groupByMaterial(props.materials)\r\n        : materialProducts;\r\n    }\r\n    const childRows = createChildRows(props.materials ?? materialInventory);\r\n    const treeData = (groupedMaterials as IMaterialTableRow[]).concat(\r\n      childRows as IMaterialTableRow[]\r\n    );\r\n\r\n    const chartData = createMaterialChartData(groupedMaterials);\r\n    setTableData(treeData);\r\n    setChartData(chartData);\r\n  }, [isSimulationModeActive, simulatedData]);\r\n\r\n  return (\r\n    <div>\r\n      <Grid container spacing={3}>\r\n        <Grid item xs>\r\n          {displayMode == \"table\" ? (\r\n            <Paper>\r\n              <ProductTable data={tableData} />\r\n            </Paper>\r\n          ) : (\r\n            <ProductChart data={chartData} />\r\n          )}\r\n        </Grid>\r\n      </Grid>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductView;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { IRootState } from \"redux/reducers\";\r\nimport allActions from \"redux/actions\";\r\n\r\nimport {\r\n  Theme,\r\n  createStyles,\r\n  makeStyles,\r\n  withStyles,\r\n  emphasize,\r\n} from \"@material-ui/core/styles\";\r\nimport { palette } from \"@material-ui/system\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Breadcrumbs from \"@material-ui/core/Breadcrumbs\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Chip from \"@material-ui/core/Chip\";\r\nimport HomeIcon from \"@material-ui/icons/Home\";\r\nimport InfoOutlinedIcon from \"@material-ui/icons/InfoOutlined\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport NavigateBeforeIcon from \"@material-ui/icons/NavigateBefore\";\r\nimport NavigateNextIcon from \"@material-ui/icons/NavigateNext\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\n\r\nimport ElementsTable from \"./ElementsTable\";\r\nimport ElementsChart from \"./ElementsChart\";\r\nimport ProductView from \"../ProductView\";\r\n\r\nimport { getChildElements, getElementMaterials } from \"helpers/materialHelpers\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    breadCrumbs: {\r\n      marginTop: \"3px\",\r\n    },\r\n    infoIcon: {\r\n      color: theme.palette.text.secondary,\r\n    },\r\n    infoContainer: {\r\n      marginBottom: theme.spacing(1),\r\n    },\r\n    infoIconGridItem: {\r\n      height: \"28px\",\r\n    },\r\n  })\r\n);\r\n\r\nconst StyledBreadcrumb = withStyles((theme: Theme) => ({\r\n  root: {\r\n    backgroundColor: theme.palette.grey[100],\r\n    height: theme.spacing(3),\r\n    color: theme.palette.grey[800],\r\n    fontWeight: theme.typography.fontWeightRegular,\r\n    \"&:hover, &:focus\": {\r\n      backgroundColor: theme.palette.grey[300],\r\n    },\r\n    \"&:active\": {\r\n      boxShadow: theme.shadows[1],\r\n      backgroundColor: emphasize(theme.palette.grey[300], 0.12),\r\n    },\r\n  },\r\n}))(Chip) as typeof Chip; // TypeScript only: need a type cast here because https://github.com/Microsoft/TypeScript/issues/26591\r\n\r\nconst StyledBreadcrumbActive = withStyles((theme: Theme) => ({\r\n  root: {\r\n    backgroundColor: theme.palette.secondary.light,\r\n    height: theme.spacing(3),\r\n    // color: theme.palette.grey[800],\r\n    fontWeight: theme.typography.fontWeightRegular,\r\n    \"&:hover, &:focus\": {\r\n      // backgroundColor: theme.palette.grey[300],\r\n    },\r\n    \"&:active\": {\r\n      boxShadow: theme.shadows[1],\r\n      // backgroundColor: emphasize(theme.palette.grey[300], 0.12),\r\n    },\r\n  },\r\n}))(Chip) as typeof Chip;\r\n\r\nconst BuildingElementsView = (props: any) => {\r\n  const dispatch = useDispatch();\r\n  const buildingElements = useSelector(\r\n    (state: IRootState) => state.buildingElements\r\n  );\r\n  const materialInventory = useSelector(\r\n    (state: IRootState) => state.materialInventory\r\n  );\r\n  const selectedBuildingElement = useSelector(\r\n    (state: IRootState) => state.selectedBuildingElement\r\n  );\r\n  const elementRoute = useSelector(\r\n    (state: IRootState) => state.buildingElementRoute\r\n  );\r\n  const displayMode = useSelector((state: IRootState) => state.displayMode);\r\n\r\n  useEffect(() => {\r\n    const rootElement = buildingElements.find(\r\n      (element: IBuildingElement) => element.hierarchy === 0\r\n    );\r\n    if (rootElement !== undefined) {\r\n      dispatch(\r\n        allActions.elementAndMaterialActions.selectBuildingElement(rootElement)\r\n      );\r\n      dispatch(\r\n        allActions.elementAndMaterialActions.setElementRoute([rootElement])\r\n      );\r\n    }\r\n  }, []);\r\n\r\n  const handleBreadcrumbClick = (index: number) => {\r\n    var tempRoute = elementRoute.slice(0, index + 1);\r\n    dispatch(\r\n      allActions.elementAndMaterialActions.selectBuildingElement(\r\n        tempRoute[tempRoute.length - 1]\r\n      )\r\n    );\r\n    dispatch(allActions.elementAndMaterialActions.setElementRoute(tempRoute));\r\n  };\r\n\r\n  const [poppedRouteItem, setPoppedRouteItem] = useState<IBuildingElement>();\r\n\r\n  const navigateBack = () => {\r\n    var tempRoute = elementRoute;\r\n    setPoppedRouteItem(tempRoute.pop());\r\n    dispatch(\r\n      allActions.elementAndMaterialActions.selectBuildingElement(\r\n        tempRoute[tempRoute.length - 1]\r\n      )\r\n    );\r\n    dispatch(allActions.elementAndMaterialActions.setElementRoute(tempRoute));\r\n  };\r\n\r\n  const navigateForward = () => {\r\n    var tempRoute = elementRoute;\r\n    if (poppedRouteItem !== undefined) tempRoute.push(poppedRouteItem);\r\n    dispatch(\r\n      allActions.elementAndMaterialActions.selectBuildingElement(\r\n        tempRoute[tempRoute.length - 1]\r\n      )\r\n    );\r\n    dispatch(allActions.elementAndMaterialActions.setElementRoute(tempRoute));\r\n  };\r\n\r\n  const childElements = getChildElements(\r\n    buildingElements,\r\n    selectedBuildingElement\r\n  );\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div>\r\n      <Grid container spacing={3} alignItems='center'>\r\n        <Grid item>\r\n          <Tooltip title='Back'>\r\n            <span>\r\n              <IconButton\r\n                size='small'\r\n                onClick={navigateBack}\r\n                disabled={elementRoute.length < 2}\r\n              >\r\n                <NavigateBeforeIcon />\r\n              </IconButton>\r\n            </span>\r\n          </Tooltip>\r\n          <Tooltip title='Forward'>\r\n            <span>\r\n              <IconButton\r\n                size='small'\r\n                onClick={navigateForward}\r\n                disabled={true}\r\n              >\r\n                <NavigateNextIcon />\r\n              </IconButton>\r\n            </span>\r\n          </Tooltip>\r\n        </Grid>\r\n        <Grid item xs={10}>\r\n          <Breadcrumbs>\r\n            {elementRoute.map((element, index) =>\r\n              index !== elementRoute.length - 1 ? (\r\n                <StyledBreadcrumb\r\n                  className={classes.breadCrumbs}\r\n                  key={index}\r\n                  label={element.idlevels + \" - \" + element.name}\r\n                  variant='default'\r\n                  icon={\r\n                    element.idlevels === 0 ? (\r\n                      <HomeIcon fontSize='small' />\r\n                    ) : undefined\r\n                  }\r\n                  color={\r\n                    index === elementRoute.length - 1 ? \"secondary\" : \"default\"\r\n                  }\r\n                  onClick={() => handleBreadcrumbClick(index)}\r\n                />\r\n              ) : (\r\n                <StyledBreadcrumbActive\r\n                  className={classes.breadCrumbs}\r\n                  key={index}\r\n                  label={element.idlevels + \" - \" + element.name}\r\n                  variant='default'\r\n                  icon={\r\n                    element.idlevels === 0 ? (\r\n                      <HomeIcon fontSize='small' />\r\n                    ) : undefined\r\n                  }\r\n                  color='secondary'\r\n                />\r\n              )\r\n            )}\r\n          </Breadcrumbs>\r\n        </Grid>\r\n\r\n        <Grid item xs={12}>\r\n          {childElements?.length ? (\r\n            displayMode === \"table\" ? (\r\n              <React.Fragment>\r\n                <Grid\r\n                  container\r\n                  alignItems='center'\r\n                  justify='center'\r\n                  spacing={1}\r\n                  className={classes.infoContainer}\r\n                >\r\n                  <Grid item className={classes.infoIconGridItem}>\r\n                    <InfoOutlinedIcon\r\n                      className={classes.infoIcon}\r\n                      fontSize='small'\r\n                    />\r\n                  </Grid>\r\n                  <Grid item>\r\n                    <Typography\r\n                      variant='body2'\r\n                      color='textSecondary'\r\n                      align='center'\r\n                    >\r\n                      Click on a building element to see its sub-elements\r\n                    </Typography>\r\n                  </Grid>\r\n                </Grid>\r\n                <Paper>\r\n                  <ElementsTable />\r\n                </Paper>\r\n              </React.Fragment>\r\n            ) : (\r\n              <ElementsChart />\r\n            )\r\n          ) : (\r\n            <ProductView\r\n              materials={getElementMaterials(\r\n                materialInventory,\r\n                selectedBuildingElement\r\n              )}\r\n            />\r\n          )}\r\n        </Grid>\r\n      </Grid>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BuildingElementsView;\r\n","import { Column, EditingState } from \"@devexpress/dx-react-grid\";\r\nimport { Table } from \"@devexpress/dx-react-grid-material-ui\";\r\n\r\nclass ColumnData {\r\n  static readonly columns: Column[] = [\r\n    { name: \"name\", title: \"Name\" },\r\n    // { name: \"idmaterialInventory\", title: \"ID\" },\r\n    { name: \"quantity\", title: \"Quantity\" },\r\n    { name: \"FU\", title: \"FU\" },\r\n    { name: \"materialCat\", title: \"Category\" },\r\n    { name: \"sourceType\", title: \"Source type\" },\r\n    { name: \"RSL_mi\", title: \"RSL\" },\r\n    { name: \"A1A3\", title: \"A1-A3\" },\r\n    { name: \"A4\", title: \"A4\" },\r\n    { name: \"B4_m\", title: \"B4 (m)\" },\r\n    { name: \"B4_t\", title: \"B4 (t)\" },\r\n    // { name: \"RSL\", title: \"RSL\" },\r\n    { name: \"source\", title: \"Source\" },\r\n    { name: \"dataType\", title: \"Data type\" },\r\n    { name: \"dataYear\", title: \"Data year\" },\r\n    { name: \"density\", title: \"Density\" },\r\n    { name: \"EEf_A1A3\", title: \"EEf_A1A3\" },\r\n    { name: \"country\", title: \"Country\" },\r\n    { name: \"city\", title: \"City\" },\r\n    { name: \"comments\", title: \"Comments\" },\r\n    // { name: \"buildingElementName\", title: \"Building element\" },\r\n  ];\r\n\r\n  static readonly columnExtensions: Table.ColumnExtension[] = [\r\n    { columnName: \"idmaterialInventory\", width: 80},\r\n    { columnName: \"name\", width: 270, wordWrapEnabled: true },\r\n    { columnName: \"dataType\", width: 120 },\r\n    { columnName: \"sourceType\", width: 120 },\r\n    { columnName: \"source\", width: 200, wordWrapEnabled: true },\r\n    { columnName: \"dataYear\", width: 100 },\r\n    { columnName: \"FU\", width: 70 },\r\n    { columnName: \"EEf_A1A3\", width: 110 },\r\n    // { columnName: \"RSL\", width: 80 },\r\n    { columnName: \"comments\", width: 400 },\r\n    { columnName: \"materialCat\", width: 150 },\r\n    { columnName: \"quantity\", width: 130 },\r\n    { columnName: \"RSL_mi\", width: 80 },\r\n    { columnName: \"A1A3\", width: 130 },\r\n    { columnName: \"A4\", width: 130 },\r\n    { columnName: \"B4_m\", width: 130 },\r\n    { columnName: \"B4_t\", width: 130 },\r\n    { columnName: \"buildingElementName\", width: 160, wordWrapEnabled: true },\r\n  ];\r\n\r\n  static readonly defaultHiddenColumnNames: string[] = [\r\n    \"source\",\r\n    // \"RSL\",\r\n    \"dataType\",\r\n    \"dataYear\",\r\n    \"comments\",\r\n    \"EEf_A1A3\",\r\n    \"density\",\r\n    \"country\",\r\n    \"city\"\r\n  ];\r\n\r\n  static readonly tableColumnVisibilityColumnExtensions = [\r\n    { columnName: \"name\", togglingEnabled: false },\r\n  ];\r\n\r\n  static readonly decimalColumns = [\r\n    \"quantity\",\r\n    \"EEf_A1A3\",\r\n    \"A1A3\",\r\n    \"A4\",\r\n    \"B4_t\",\r\n    \"B4_m\",\r\n    \"RSL_mi\"\r\n  ];\r\n\r\n  static readonly groupSummaryItems = [\r\n    {\r\n      columnName: \"quantity\",\r\n      type: \"sum\",\r\n      showInGroupFooter: false,\r\n      alignByColumn: true,\r\n    },\r\n    {\r\n      columnName: \"FU\",\r\n      type: \"staticValue\",\r\n      showInGroupFooter: false,\r\n      alignByColumn: true,\r\n    },\r\n    {\r\n      columnName: \"sourceType\",\r\n      type: \"staticValue\",\r\n      showInGroupFooter: false,\r\n      alignByColumn: true,\r\n    },\r\n    /* {\r\n      columnName: \"materialCat\",\r\n      type: \"staticValue\",\r\n      showInGroupFooter: false,\r\n      alignByColumn: true,\r\n    }, */\r\n    {\r\n      columnName: \"RSL_mi\",\r\n      type: \"avg\",\r\n      showInGroupFooter: false,\r\n      alignByColumn: true,\r\n    },\r\n    {\r\n      columnName: \"A1A3\",\r\n      type: \"sum\",\r\n      showInGroupFooter: false,\r\n      alignByColumn: true,\r\n    },\r\n    {\r\n      columnName: \"A4\",\r\n      type: \"sum\",\r\n      showInGroupFooter: false,\r\n      alignByColumn: true,\r\n    },\r\n    {\r\n      columnName: \"B4_m\",\r\n      type: \"sum\",\r\n      showInGroupFooter: false,\r\n      alignByColumn: true,\r\n    },\r\n    {\r\n      columnName: \"B4_t\",\r\n      type: \"sum\",\r\n      showInGroupFooter: false,\r\n      alignByColumn: true,\r\n    },\r\n  ];\r\n\r\n  static readonly editingStateColumnExtensions: EditingState.ColumnExtension[] = [\r\n    { columnName: \"idmaterialInventory\", editingEnabled: false},\r\n    { columnName: \"name\", editingEnabled: false},\r\n    { columnName: \"buildingElementName\", editingEnabled: false},\r\n    // { columnName: \"quantity\", editingEnabled: false},\r\n    { columnName: \"FU\", editingEnabled: false},\r\n    // { columnName: \"sourceType\", editingEnabled: false},\r\n    // { columnName: \"RSL\", editingEnabled: false},\r\n    { columnName: \"materialCat\", editingEnabled: false},\r\n    { columnName: \"RSL_mi\", editingEnabled: false},\r\n    // { columnName: \"EEf_A1A3\", editingEnabled: false},\r\n    // { columnName: \"A1A3\", editingEnabled: false},\r\n    // { columnName: \"A4\", editingEnabled: false},\r\n    // { columnName: \"B4_m\", editingEnabled: false},\r\n    // { columnName: \"B4_t\", editingEnabled: false},\r\n    { columnName: \"dataType\",  editingEnabled: false},\r\n    { columnName: \"dataYear\", editingEnabled: false},\r\n    { columnName: \"comments\", editingEnabled: false},\r\n  ];\r\n}\r\n\r\nexport default ColumnData;\r\n","import React from \"react\";\r\nimport ChevronRight from \"@material-ui/icons/ChevronRight\";\r\nimport ExpandMore from \"@material-ui/icons/ExpandMore\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport Menu from \"@material-ui/core/Menu\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport Input from \"@material-ui/core/Input\";\r\n\r\nimport {\r\n  Theme,\r\n  createStyles,\r\n  makeStyles,\r\n  withStyles,\r\n  emphasize,\r\n} from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    cell: {\r\n      padding: theme.spacing(1),\r\n    },\r\n    indentCell: {\r\n      padding: 0,\r\n    },\r\n    groupButton: {\r\n      height: theme.spacing(4),\r\n      width: theme.spacing(4),\r\n    },\r\n    lookupEditCell: {\r\n      padding: theme.spacing(1),\r\n    },\r\n    inputRoot: {\r\n      width: \"100%\",\r\n    },\r\n    selectMenu: {\r\n      position: \"absolute !important\" as \"absolute\",\r\n    },\r\n  })\r\n);\r\n\r\nexport const GroupCell = ({\r\n  style,\r\n  colSpan,\r\n  row,\r\n  column,\r\n  expanded,\r\n  onToggle,\r\n  classes,\r\n  children,\r\n  className,\r\n  tableRow,\r\n  tableColumn,\r\n  contentComponent,\r\n  iconComponent,\r\n  indentCellComponent,\r\n  inlineSummaryComponent,\r\n  inlineSummaryItemComponent,\r\n  summaryCellComponent,\r\n  summaryItemComponent,\r\n  containerComponent,\r\n  inlineSummaries,\r\n  getMessage,\r\n  ...restProps\r\n}: any) => {\r\n  const handleClick = () => onToggle();\r\n  const styles = useStyles();\r\n  return (\r\n    <TableCell\r\n      colSpan={colSpan}\r\n      style={style}\r\n      className={styles.cell}\r\n      onClick={handleClick}\r\n      {...restProps}\r\n    >\r\n      <Grid container alignItems='center' justify='space-around'>\r\n        <Grid item xs={2}>\r\n          <IconButton className={styles.groupButton}>\r\n            {expanded ? <ExpandMore /> : <ChevronRight />}\r\n          </IconButton>\r\n        </Grid>\r\n        <Grid item xs={10}>\r\n          <span>\r\n            <strong>{children || row.value}</strong>\r\n          </span>\r\n        </Grid>\r\n      </Grid>\r\n    </TableCell>\r\n  );\r\n};\r\n\r\nexport const SummaryCell = ({\r\n  style,\r\n  colSpan,\r\n  row,\r\n  column,\r\n  expanded,\r\n  onToggle,\r\n  classes,\r\n  children,\r\n  className,\r\n  tableRow,\r\n  tableColumn,\r\n  contentComponent,\r\n  iconComponent,\r\n  indentCellComponent,\r\n  inlineSummaryComponent,\r\n  inlineSummaryItemComponent,\r\n  summaryCellComponent,\r\n  summaryItemComponent,\r\n  containerComponent,\r\n  inlineSummaries,\r\n  getMessage,\r\n  ...restProps\r\n}: any) => {\r\n  const styles = useStyles();\r\n  const handleClick = () => onToggle();\r\n  //   console.log(\"Children: \", children)\r\n  var tooltipTitle: string = \"\";\r\n  switch (children.props.columnSummaries[0].type) {\r\n    case \"sum\":\r\n      tooltipTitle = \"Sum\";\r\n      break;\r\n    case \"avg\":\r\n      tooltipTitle = \"Average\";\r\n      break;\r\n    case \"staticValue\":\r\n      tooltipTitle = \"Static\";\r\n      break;\r\n  }\r\n  return (\r\n    <TableCell\r\n      colSpan={colSpan}\r\n      onClick={handleClick}\r\n      className={styles.cell}\r\n      {...restProps}\r\n    >\r\n      {tooltipTitle === \"Static\" ? (\r\n        <span>{children}</span>\r\n      ) : (\r\n        <Tooltip title={tooltipTitle}>\r\n          <span>{children}</span>\r\n        </Tooltip>\r\n      )}\r\n    </TableCell>\r\n  );\r\n};\r\n\r\nexport const LookupEditCell = ({\r\n  availableColumnValues,\r\n  value,\r\n  onValueChange,\r\n}: any) => (\r\n  <TableCell className={useStyles().lookupEditCell}>\r\n    <Select\r\n      value={value}\r\n      onChange={(event) => onValueChange(event.target.value)}\r\n      MenuProps={{\r\n        className: useStyles().selectMenu,\r\n      }}\r\n      input={<Input classes={{ root: useStyles().inputRoot }} />}\r\n    >\r\n      {availableColumnValues.map((item: any) => (\r\n        <MenuItem key={item} value={item}>\r\n          {item}\r\n        </MenuItem>\r\n      ))}\r\n    </Select>\r\n  </TableCell>\r\n);\r\n","import React, { useState, useEffect, useCallback } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { IRootState } from \"redux/reducers\";\r\nimport { writeSimulatedDataToDb } from \"services/firebase\";\r\n\r\nimport {\r\n  Theme,\r\n  createStyles,\r\n  makeStyles,\r\n  withStyles,\r\n  emphasize,\r\n} from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport EditIcon from \"@material-ui/icons/Edit\";\r\nimport SaveIcon from \"@material-ui/icons/Save\";\r\nimport CancelIcon from \"@material-ui/icons/Cancel\";\r\nimport Input from \"@material-ui/core/Input\";\r\n\r\nimport {\r\n  SortingState,\r\n  IntegratedSorting,\r\n  IntegratedFiltering,\r\n  SearchState,\r\n  DataTypeProvider,\r\n  GroupingState,\r\n  IntegratedGrouping,\r\n  SummaryState,\r\n  IntegratedSummary,\r\n  TableGroupRowProps,\r\n  EditingState,\r\n  TreeDataState,\r\n  CustomTreeData,\r\n} from \"@devexpress/dx-react-grid\";\r\nimport {\r\n  Grid,\r\n  TableHeaderRow,\r\n  VirtualTable,\r\n  Toolbar,\r\n  SearchPanel,\r\n  ColumnChooser,\r\n  TableColumnVisibility,\r\n  TableFixedColumns,\r\n  TableGroupRow,\r\n  TableSummaryRow,\r\n  GroupingPanel,\r\n  TableEditColumn,\r\n  TableEditRow,\r\n  TableTreeColumn,\r\n} from \"@devexpress/dx-react-grid-material-ui\";\r\n\r\nimport _ from \"lodash\";\r\n\r\nimport ColumnData from \"./ColumnData\";\r\nimport { GroupCell, SummaryCell, LookupEditCell } from \"./CustomCells\";\r\n// import { DecimalTypeProvider } from \"./DecimalTypeProvider\";\r\nimport { DecimalTypeProvider, SortLabel } from \"components/TableUtilities/Formatters\";\r\nimport allActions from \"redux/actions\";\r\n\r\ninterface Props {\r\n  materials: IMaterialTableRow[];\r\n}\r\n\r\nconst getRowId = (row: any) => row.idmaterialInventory;\r\n\r\nconst getHiddenColumnsFilteringExtensions = (hiddenColumnNames: string[]) =>\r\n  hiddenColumnNames.map((columnName) => ({\r\n    columnName,\r\n    predicate: () => false,\r\n  }));\r\n\r\nconst CategoryTable = (props: Props) => {\r\n  const dispatch = useDispatch();\r\n\r\n  const [columns] = useState(ColumnData.columns);\r\n  const [columnExtensions] = useState(ColumnData.columnExtensions);\r\n  const [defaultHiddenColumnNames] = useState(\r\n    ColumnData.defaultHiddenColumnNames\r\n  );\r\n  const [tableColumnVisibilityColumnExtensions] = useState(\r\n    ColumnData.tableColumnVisibilityColumnExtensions\r\n  );\r\n\r\n  const [decimalColumns] = useState(ColumnData.decimalColumns);\r\n\r\n  const [searchTerm, setSearchTerm] = useState<string>();\r\n\r\n  const changeSearchTerm = (value: any) => {\r\n    console.log(\"Changed search term: \", value);\r\n    setSearchTerm(value);\r\n  };\r\n\r\n  // Delays query so it is not fired on every keystroke\r\n  const delayedCallback = useCallback(_.debounce(changeSearchTerm, 300), []);\r\n\r\n  // Only search in visible columns\r\n  const [filteringColumnExtensions, setFilteringColumnExtensions] = useState(\r\n    getHiddenColumnsFilteringExtensions(defaultHiddenColumnNames)\r\n  );\r\n\r\n  const onHiddenColumnNamesChange = (hiddenColumnNames: string[]) =>\r\n    setFilteringColumnExtensions(\r\n      getHiddenColumnsFilteringExtensions(hiddenColumnNames)\r\n    );\r\n\r\n  const [expandedRowIds, setExpandedRowIds] = useState<(string | number)[]>([]);\r\n\r\n  const [leftFixedColumns] = useState([\"name\"]);\r\n\r\n  const [grouping] = useState([{ columnName: \"materialCat\" }]);\r\n  const [groupSummaryItems] = useState(ColumnData.groupSummaryItems);\r\n\r\n  const groupRowSummaryItem = ({ value }: any) => {\r\n    // Removes summary type label (i.e. \"Sum: \" or \"Count: \")\r\n    var formattedValue;\r\n    if (typeof value === \"string\") {\r\n      formattedValue = value;\r\n    } else {\r\n      // Formats decimal numbers\r\n      formattedValue =\r\n        value && value > 0.0 ? parseFloat(value).toLocaleString() : \"0\";\r\n    }\r\n\r\n    return <strong>{formattedValue}</strong>;\r\n  };\r\n\r\n  const staticValueCalculator = (type: string, rows: any[], getValue: any) => {\r\n    if (type === \"staticValue\") {\r\n      if (!rows.length) {\r\n        return null;\r\n      }\r\n      const firstRowValue = getValue(rows[0]);\r\n\r\n      // Show ellipses if not all values are equal\r\n      const allEqual = (arr: any[]) =>\r\n        arr.every((v) => getValue(v) === firstRowValue);\r\n      if (allEqual(rows)) return firstRowValue;\r\n      else return \"...\";\r\n    }\r\n    return IntegratedSummary.defaultCalculator(type, rows, getValue);\r\n  };\r\n\r\n  return (\r\n    <Grid rows={props.materials} columns={columns} getRowId={getRowId}>\r\n      <DecimalTypeProvider for={decimalColumns} />\r\n      <SearchState onValueChange={delayedCallback} />\r\n      <IntegratedFiltering columnExtensions={filteringColumnExtensions} />\r\n      <SortingState />\r\n      <IntegratedSorting />\r\n      <GroupingState grouping={grouping} />\r\n      <SummaryState groupItems={groupSummaryItems} />\r\n      <IntegratedGrouping />\r\n      <IntegratedSummary calculator={staticValueCalculator} />\r\n\r\n      <VirtualTable columnExtensions={columnExtensions} />\r\n      <TableHeaderRow showSortingControls sortLabelComponent={SortLabel} />\r\n      <TableGroupRow\r\n        cellComponent={GroupCell}\r\n        summaryCellComponent={SummaryCell}\r\n        summaryItemComponent={groupRowSummaryItem}\r\n        // indentColumnWidth={48}\r\n      />\r\n      <TableSummaryRow />\r\n      <TableFixedColumns leftColumns={leftFixedColumns} />\r\n      <TableColumnVisibility\r\n        defaultHiddenColumnNames={defaultHiddenColumnNames}\r\n        columnExtensions={tableColumnVisibilityColumnExtensions}\r\n        onHiddenColumnNamesChange={onHiddenColumnNamesChange}\r\n      />\r\n      <Toolbar />\r\n      <GroupingPanel showSortingControls />\r\n      <SearchPanel />\r\n      <ColumnChooser />\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default CategoryTable;\r\n","import React, { useState, useEffect, useRef, useCallback } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { IRootState } from \"redux/reducers\";\r\nimport allActions from \"redux/actions\";\r\n\r\nimport { Theme, createStyles, makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport NavigateBeforeIcon from \"@material-ui/icons/NavigateBefore\";\r\nimport MuiTooltip from \"@material-ui/core/Tooltip\";\r\n\r\nimport {\r\n  Chart,\r\n  Series,\r\n  CommonSeriesSettings,\r\n  Legend,\r\n  ArgumentAxis,\r\n  ValueAxis,\r\n  Title,\r\n  Tooltip,\r\n  Size,\r\n  Label,\r\n  Font,\r\n  Margin,\r\n  Subtitle,\r\n} from \"devextreme-react/chart\";\r\n\r\nimport { Grid, Typography } from \"@material-ui/core\";\r\nimport { grey } from \"@material-ui/core/colors\";\r\n\r\nimport { wrapArgumentAxisLabel } from \"helpers/materialHelpers\";\r\nimport { customizeHint } from \"components/ChartComponents\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    container: {\r\n      position: \"relative\",\r\n      // padding: theme.spacing(2),\r\n    },\r\n    chart: {\r\n      overflowX: \"hidden\",\r\n      // padding: theme.spacing(2),\r\n    },\r\n    argumentAxisLabel: {\r\n      fill: \"#767676\",\r\n    },\r\n    button: {\r\n      position: \"absolute\",\r\n      top: \"12px\",\r\n      left: \"18px\",\r\n    },\r\n  })\r\n);\r\n\r\ninterface Props {\r\n  data: IMaterialChartItem[];\r\n}\r\n\r\nconst CategoryChart = (props: Props) => {\r\n  const chartRef = useRef<Chart>(null);\r\n\r\n  var renderOptions = {\r\n    force: true, // forces redrawing\r\n    animate: true, // redraws the UI component with animation\r\n  };\r\n\r\n  const resizeObserver = useRef<ResizeObserver>(\r\n    new ResizeObserver((entries: ResizeObserverEntry[]) => {\r\n      // your code to handle the size change\r\n      console.log(\"Size changed\");\r\n      chartRef?.current?.instance.render(renderOptions);\r\n    })\r\n  );\r\n\r\n  const resizedContainerRef = useCallback(\r\n    (container: HTMLDivElement) => {\r\n      if (container !== null) {\r\n        resizeObserver.current.observe(container);\r\n      }\r\n      // When element is unmounted, ref callback is called with a null argument\r\n      // => best time to cleanup the observer\r\n      else {\r\n        if (resizeObserver.current) resizeObserver.current.disconnect();\r\n      }\r\n    },\r\n    [resizeObserver.current]\r\n  );\r\n\r\n  const [chartData, setChartData] = useState<IMaterialChartItem[]>([]);\r\n  const [isFirstLevel, setIsFirstLevel] = useState<boolean>(true);\r\n  const [selectedCategory, setSelectedCategory] = useState<string>(\"\");\r\n  const [chartHeight, setChartHeight] = useState(0);\r\n\r\n  useEffect(() => {\r\n    const parentRows = filterData(\"\");\r\n    setChartData(parentRows);\r\n    setChartHeight(parentRows.length * 30 + 200);\r\n  }, [props.data]);\r\n\r\n  const customizeTooltip = (arg: any) => {\r\n    return {\r\n      text: `<b>${arg.seriesName}</b>\\n ${arg.valueText}`,\r\n    };\r\n  };\r\n\r\n  const onPointClick = (e: any) => {\r\n    if (isFirstLevel) {\r\n      setIsFirstLevel(false);\r\n      setSelectedCategory(e.target.originalArgument);\r\n      setChartData(filterData(e.target.originalArgument));\r\n    }\r\n  };\r\n\r\n  const onDrawn = (e: any) => {\r\n    if (isFirstLevel) {\r\n      // Add pointer cursor to all bar points\r\n      e.element.querySelectorAll(\".dxc-markers rect\").forEach((el: any) => {\r\n        el.style.cursor = \"pointer\";\r\n      });\r\n\r\n      // Add pointer cursor to argument axis labels\r\n      e.element\r\n        .querySelector(\".dxc-arg-elements\")\r\n        .childNodes.forEach((el: any) => {\r\n          el.style.cursor = \"pointer\";\r\n        });\r\n    }\r\n  };\r\n\r\n  const filterData = (name: string) => {\r\n    return props.data.filter(function (item) {\r\n      return item.materialCat === name;\r\n    });\r\n  };\r\n\r\n  const handleBackClick = () => {\r\n    if (!isFirstLevel) {\r\n      setIsFirstLevel(true);\r\n      setSelectedCategory(\"\");\r\n      setChartData(filterData(\"\"));\r\n    }\r\n  };\r\n\r\n  const minHeight = 600;\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Paper className={classes.container} ref={resizedContainerRef}>\r\n      <MuiTooltip title='Back'>\r\n        <span>\r\n          <IconButton\r\n            className={classes.button}\r\n            onClick={handleBackClick}\r\n            disabled={isFirstLevel}\r\n          >\r\n            <NavigateBeforeIcon />\r\n          </IconButton>\r\n        </span>\r\n      </MuiTooltip>\r\n      <Chart\r\n        className={classes.chart}\r\n        dataSource={chartData}\r\n        // title={selectedCategory}\r\n        palette='Material'\r\n        rotated={true}\r\n        onPointClick={onPointClick}\r\n        onDrawn={onDrawn}\r\n        ref={chartRef}\r\n      >\r\n        {selectedCategory === \"\" ? (\r\n          <Title\r\n            text='Click on a bar to see materials'\r\n            horizontalAlignment='center'\r\n            font={{\r\n              size: 16,\r\n              color: grey[500],\r\n              weight: 400,\r\n            }}\r\n          ></Title>\r\n        ) : (\r\n          <Title\r\n            text={selectedCategory}\r\n            horizontalAlignment='center'\r\n            font={{\r\n              size: 18,\r\n              color: \"black\",\r\n              weight: 500,\r\n              family:\r\n                'Roboto, \"Segoe UI Light\", \"Helvetica Neue Light\", \"Segoe UI\", \"Helvetica Neue\", \"Trebuchet MS\", Verdana, sans-serif',\r\n            }}\r\n          ></Title>\r\n        )}\r\n        <Size height={chartHeight > minHeight ? chartHeight : minHeight} />\r\n        <Margin top={10} bottom={10} left={30} right={30} />\r\n        <CommonSeriesSettings\r\n          argumentField='name'\r\n          type='stackedBar'\r\n          barWidth={50}\r\n          hoverMode='allArgumentPoints'\r\n        ></CommonSeriesSettings>\r\n        <Series valueField='A1A3' name='A1-A3' />\r\n        <Series valueField='A4' name='A4' />\r\n        <Series valueField='B4_m' name='B4 (m)' />\r\n        <Series valueField='B4_t' name='B4 (t)' />\r\n        <ValueAxis>\r\n          <Title\r\n            text={\"kgCO2e\"}\r\n            font={{\r\n              size: 14,\r\n            }}\r\n          />\r\n        </ValueAxis>\r\n        <ArgumentAxis>\r\n          <Label customizeText={wrapArgumentAxisLabel} />\r\n        </ArgumentAxis>\r\n        <Legend\r\n          verticalAlignment='bottom'\r\n          horizontalAlignment='center'\r\n          itemTextPosition='top'\r\n          customizeHint={customizeHint}\r\n        />\r\n        <Tooltip\r\n          enabled={true}\r\n          location='edge'\r\n          customizeTooltip={customizeTooltip}\r\n          zIndex={1200}\r\n          arrowLength={6}\r\n          format={{\r\n            format: (value: string) => parseFloat(value).toLocaleString(),\r\n          }}\r\n          interactive\r\n        />\r\n      </Chart>\r\n    </Paper>\r\n  );\r\n};\r\n\r\nexport default CategoryChart;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { IRootState } from \"redux/reducers\";\r\nimport allActions from \"redux/actions\";\r\n\r\nimport {\r\n  Theme,\r\n  createStyles,\r\n  makeStyles,\r\n  withStyles,\r\n  emphasize,\r\n} from \"@material-ui/core/styles\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Breadcrumbs from \"@material-ui/core/Breadcrumbs\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Chip from \"@material-ui/core/Chip\";\r\nimport HomeIcon from \"@material-ui/icons/Home\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Switch from \"@material-ui/core/Switch\";\r\nimport Radio from \"@material-ui/core/Radio\";\r\nimport RadioGroup from \"@material-ui/core/RadioGroup\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport FormLabel from \"@material-ui/core/FormLabel\";\r\n\r\nimport CategoryTable from \"./CategoryTable\";\r\nimport CategoryChart from \"./CategoryChart\";\r\nimport {\r\n  groupByMaterial,\r\n  createChildRows,\r\n  createMaterialChartData,\r\n  groupByCategory,\r\n  sortByEE,\r\n} from \"helpers/materialHelpers\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    breadCrumbs: {\r\n      marginBottom: theme.spacing(2),\r\n    },\r\n    chart: {\r\n      // height: 600,\r\n      padding: theme.spacing(2),\r\n    },\r\n    elementTable: {\r\n      padding: theme.spacing(2),\r\n    },\r\n  })\r\n);\r\n\r\ninterface Props {\r\n  materials: IMaterialInventory[];\r\n}\r\n\r\nconst CategoryView = (props: Props) => {\r\n  const dispatch = useDispatch();\r\n\r\n  const displayMode = useSelector((state: IRootState) => state.displayMode);\r\n  const materialInventory = useSelector(\r\n    (state: IRootState) => state.materialInventory\r\n  );\r\n\r\n  const [tableData, setTableData] = useState<IMaterialTableRow[]>([]);\r\n  const [chartData, setChartData] = useState<IMaterialChartItem[]>([]);\r\n\r\n  useEffect(() => {\r\n    const groupedMaterials = groupByMaterial(props.materials);\r\n\r\n    const materialChildRows = createMaterialChartData(groupedMaterials);\r\n    const categoryParentRows = groupByCategory(materialChildRows);\r\n    const chartData = materialChildRows.concat(categoryParentRows);\r\n    const sortedChartData = sortByEE(chartData) as IMaterialChartItem[];\r\n\r\n    setTableData(groupedMaterials as IMaterialTableRow[]);\r\n    setChartData(sortedChartData);\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <Grid container spacing={3}>\r\n        <Grid item xs>\r\n          {displayMode === \"table\" ? (\r\n            <Paper>\r\n              <CategoryTable materials={tableData} />\r\n            </Paper>\r\n          ) : (\r\n            <CategoryChart data={chartData} />\r\n          )}\r\n        </Grid>\r\n      </Grid>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CategoryView;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { IRootState } from \"redux/reducers\";\r\nimport allActions from \"redux/actions\";\r\nimport { getSimulatedDataFromDb } from \"services/firebase\";\r\n\r\nimport ReactDOM from \"react-dom\";\r\nimport { Theme, createStyles, makeStyles } from \"@material-ui/core/styles\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Switch from \"@material-ui/core/Switch\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport FormHelperText from \"@material-ui/core/FormHelperText\";\r\nimport Radio from \"@material-ui/core/Radio\";\r\nimport RadioGroup from \"@material-ui/core/RadioGroup\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport FormLabel from \"@material-ui/core/FormLabel\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport Skeleton from \"@material-ui/lab/Skeleton\";\r\n\r\nimport BuildingElementsView from \"./BuildingElementsView\";\r\nimport ProductView from \"./ProductView\";\r\nimport CategoryView from \"./CategoryView\";\r\nimport { GroupBy } from \"interfaces/enums\";\r\nimport {\r\n  groupByMaterial,\r\n  mergeSimulatedDataIntoMaterialProducts,\r\n} from \"helpers/materialHelpers\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    formControl: {\r\n      marginRight: theme.spacing(2),\r\n      minWidth: 180,\r\n    },\r\n  })\r\n);\r\n\r\nconst MaterialsContainer = (props: any) => {\r\n  const dispatch = useDispatch();\r\n  const selectedBuildings = useSelector(\r\n    (state: IRootState) => state.selectedBuildings\r\n  );\r\n  const materialInventory = useSelector(\r\n    (state: IRootState) => state.materialInventory\r\n  );\r\n  const isSimulationModeActive = useSelector(\r\n    (state: IRootState) => state.isSimulationModeActive\r\n  );\r\n\r\n  const groupBy = useSelector((state: IRootState) => state.materialsGroupBy);\r\n  const displayMode = useSelector((state: IRootState) => state.displayMode);\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [tooltipOpen, setTooltipOpen] = useState(false);\r\n\r\n  const handleSelectChange = (event: React.ChangeEvent<{ value: unknown }>) => {\r\n    dispatch(\r\n      allActions.uiActions.setMaterialsGroupBy(event.target.value as string)\r\n    );\r\n  };\r\n\r\n  const handleRadioButtonChange = (\r\n    event: React.ChangeEvent<HTMLInputElement>\r\n  ) => {\r\n    dispatch(allActions.uiActions.setDisplayMode(event.target.value as string));\r\n  };\r\n\r\n  const handleTooltip = (isOpen: boolean) => {\r\n    setTooltipOpen(isOpen);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (selectedBuildings.length) {\r\n      loadData();\r\n    }\r\n  }, [selectedBuildings]);\r\n\r\n  const loadData = () => {\r\n    const buildingId = selectedBuildings[0].idbuildings;\r\n    const URL = process.env.REACT_APP_API_URI;\r\n    const elementQuery = `${URL}/building_elements/${buildingId}`;\r\n    const inventoryQuery = `${URL}/material_inventory/${buildingId}`;\r\n\r\n    if (!loading) {\r\n      setLoading(true);\r\n      Promise.all([fetch(elementQuery), fetch(inventoryQuery)])\r\n        .then((responses) =>\r\n          Promise.all(responses.map((response) => response.json()))\r\n        )\r\n        .then((data) => {\r\n          getSimulatedDataFromDb(String(buildingId))\r\n            .then((doc) => {\r\n              let simulatedData: ISimulatedData = {};\r\n              if (doc.exists) {\r\n                simulatedData = doc.data() ?? {};\r\n              }\r\n\r\n              const buildingElements = data[0];\r\n              const materialInventory = data[1];\r\n              const materialProducts = groupByMaterial(materialInventory);\r\n              const simulatedMaterialProducts = mergeSimulatedDataIntoMaterialProducts(\r\n                materialProducts as IMaterialTableRow[],\r\n                simulatedData\r\n              );\r\n\r\n              ReactDOM.unstable_batchedUpdates(() => {\r\n                dispatch(\r\n                  allActions.elementAndMaterialActions.setBuildingElements(\r\n                    buildingElements\r\n                  )\r\n                );\r\n                dispatch(\r\n                  allActions.elementAndMaterialActions.setMaterialInventory(\r\n                    materialInventory\r\n                  )\r\n                );\r\n                dispatch(\r\n                  allActions.elementAndMaterialActions.setMaterialProducts(\r\n                    materialProducts\r\n                  )\r\n                );\r\n                dispatch(\r\n                  allActions.elementAndMaterialActions.setSimulatedData(\r\n                    simulatedData\r\n                  )\r\n                );\r\n                dispatch(\r\n                  allActions.elementAndMaterialActions.setSimulatedMaterialProducts(\r\n                    simulatedMaterialProducts\r\n                  )\r\n                );\r\n                setLoading(false);\r\n              });\r\n            })\r\n            .catch((error) => {\r\n              console.log(\"Error getting simulation data:\", error);\r\n              setLoading(false);\r\n            });\r\n        })\r\n        .catch(() => setLoading(false));\r\n    }\r\n    getSimulatedDataFromDb(String(buildingId));\r\n  };\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div>\r\n      <Grid container spacing={3} alignItems='center' justify='space-between'>\r\n        <Grid item>\r\n          <Typography variant='h5' color='textSecondary' gutterBottom>\r\n            Materials\r\n          </Typography>\r\n        </Grid>\r\n        <Grid item>\r\n          <Tooltip\r\n            title='Disable simulation mode to select different grouping'\r\n            // open={tooltipOpen}\r\n            disableFocusListener={!isSimulationModeActive}\r\n            disableHoverListener={!isSimulationModeActive}\r\n            disableTouchListener={!isSimulationModeActive}\r\n          >\r\n            <FormControl className={classes.formControl} variant='outlined'>\r\n              <InputLabel>Group by</InputLabel>\r\n              <Select\r\n                displayEmpty\r\n                value={groupBy}\r\n                label='Group by'\r\n                onChange={handleSelectChange}\r\n                onMouseEnter={() => handleTooltip(true)}\r\n                onMouseLeave={() => handleTooltip(false)}\r\n                onOpen={() => handleTooltip(false)}\r\n              >\r\n                <MenuItem value={GroupBy.Product}>Product</MenuItem>\r\n                <MenuItem\r\n                  value={GroupBy.BuildingElement}\r\n                  disabled={isSimulationModeActive}\r\n                >\r\n                  Building element\r\n                </MenuItem>\r\n                <MenuItem\r\n                  value={GroupBy.Category}\r\n                  disabled={isSimulationModeActive}\r\n                >\r\n                  Category\r\n                </MenuItem>\r\n              </Select>\r\n            </FormControl>\r\n          </Tooltip>\r\n          <FormControl component='fieldset'>\r\n            <FormLabel component='legend' color='secondary'>\r\n              Display mode\r\n            </FormLabel>\r\n            <RadioGroup\r\n              value={displayMode}\r\n              onChange={handleRadioButtonChange}\r\n              row\r\n            >\r\n              <FormControlLabel\r\n                value='table'\r\n                control={<Radio />}\r\n                label='Table'\r\n              />\r\n              <FormControlLabel\r\n                value='chart'\r\n                control={<Radio />}\r\n                label='Chart'\r\n              />\r\n            </RadioGroup>\r\n          </FormControl>\r\n        </Grid>\r\n      </Grid>\r\n      {loading || props.parentIsLoading ? (\r\n        <Skeleton style={{ marginTop: \"65px\" }} variant='rect' height={350} />\r\n      ) : groupBy === GroupBy.BuildingElement ? (\r\n        <BuildingElementsView />\r\n      ) : groupBy === GroupBy.Product ? (\r\n        <ProductView materials={materialInventory} />\r\n      ) : (\r\n        <CategoryView materials={materialInventory} />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MaterialsContainer;\r\n","import React, { useState, useEffect, useRef, useCallback } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { IRootState } from \"redux/reducers\";\r\nimport allActions from \"redux/actions\";\r\n\r\nimport { getKeyValue } from \"get-key-value\";\r\nimport theme from \"styles/theme\";\r\n\r\nimport {\r\n  Theme,\r\n  createStyles,\r\n  makeStyles,\r\n  withStyles,\r\n  WithStyles,\r\n  emphasize,\r\n} from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nimport {\r\n  Chart,\r\n  Series,\r\n  ArgumentAxis,\r\n  CommonSeriesSettings,\r\n  SeriesTemplate,\r\n  ValueAxis,\r\n  Title,\r\n  Tooltip,\r\n  Label,\r\n} from \"devextreme-react/chart\";\r\n\r\nimport { roundTo } from \"components/TableUtilities/SimulationHelpers\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    chart: {\r\n      height: 200,\r\n      padding: theme.spacing(2),\r\n    },\r\n  })\r\n);\r\n\r\nconst SingleBuildingChart = () => {\r\n  const chartRef = useRef<Chart>(null);\r\n\r\n  var renderOptions = {\r\n    force: true, // forces redrawing\r\n    animate: true, // redraws the UI component with animation\r\n  };\r\n\r\n  const resizeObserver = useRef<ResizeObserver>(\r\n    new ResizeObserver((entries: ResizeObserverEntry[]) => {\r\n      // your code to handle the size change\r\n      console.log(\"Size changed\");\r\n      chartRef?.current?.instance.render(renderOptions);\r\n    })\r\n  );\r\n\r\n  const resizedContainerRef = useCallback(\r\n    (container: HTMLDivElement) => {\r\n      if (container !== null) {\r\n        resizeObserver.current.observe(container);\r\n      }\r\n      // When element is unmounted, ref callback is called with a null argument\r\n      // => best time to cleanup the observer\r\n      else {\r\n        if (resizeObserver.current) resizeObserver.current.disconnect();\r\n      }\r\n    },\r\n    [resizeObserver.current]\r\n  );\r\n\r\n  const selectedBuildings = useSelector(\r\n    (state: IRootState) => state.selectedBuildings\r\n  );\r\n  const simulatedMaterialProducts = useSelector(\r\n    (state: IRootState) => state.simulatedMaterialProducts\r\n  );\r\n  const isSimulationModeActive = useSelector(\r\n    (state: IRootState) => state.isSimulationModeActive\r\n  );\r\n  const simulatedData = useSelector((state: IRootState) => state.simulatedData);\r\n  const checkedEEMetrics = useSelector((state: IRootState) => state.EEMetric);\r\n\r\n  const [chartData, setChartData] = useState<ISingleChartDataItem[]>([]);\r\n\r\n  useEffect(() => {\r\n    var A1A3: number;\r\n    var A4: number;\r\n    var B4_m: number;\r\n    var B4_t: number;\r\n    var nonSimulatedValues = {\r\n      A1A3: Number(selectedBuildings[0].A1A3) || 0.0,\r\n      A4: Number(selectedBuildings[0].A4) || 0.0,\r\n      B4_m: Number(selectedBuildings[0].B4_m) || 0.0,\r\n      B4_t: Number(selectedBuildings[0].B4_t) || 0.0,\r\n    };\r\n    var simulatedValues = {};\r\n\r\n    if (isSimulationModeActive) {\r\n      A1A3 = isSeriesSimulated(\"A1A3\")\r\n        ? sumMaterialEmissions(\"A1A3\")\r\n        : nonSimulatedValues.A1A3;\r\n      A4 = isSeriesSimulated(\"A4\")\r\n        ? sumMaterialEmissions(\"A4\")\r\n        : nonSimulatedValues.A4;\r\n      B4_m = isSeriesSimulated(\"B4_m\")\r\n        ? sumMaterialEmissions(\"B4_m\")\r\n        : nonSimulatedValues.B4_m;\r\n      B4_t = isSeriesSimulated(\"B4_t\")\r\n        ? sumMaterialEmissions(\"B4_t\")\r\n        : nonSimulatedValues.B4_t;\r\n    } else {\r\n      A1A3 = Number(selectedBuildings[0].A1A3) || 0.0;\r\n      A4 = Number(selectedBuildings[0].A4) || 0.0;\r\n      B4_m = Number(selectedBuildings[0].B4_m) || 0.0;\r\n      B4_t = Number(selectedBuildings[0].B4_t) || 0.0;\r\n    }\r\n\r\n    // Divides by floor area if setting is checked\r\n    if (checkedEEMetrics.perSqM) {\r\n      A1A3 = A1A3 / selectedBuildings[0].floor_area;\r\n      A4 = A4 / selectedBuildings[0].floor_area;\r\n      B4_m = B4_m / selectedBuildings[0].floor_area;\r\n      B4_t = B4_t / selectedBuildings[0].floor_area;\r\n    }\r\n\r\n    // Divides by lifetime year if setting is checked\r\n    if (checkedEEMetrics.perYear) {\r\n      A1A3 = A1A3 / selectedBuildings[0].lifetime;\r\n      A4 = A4 / selectedBuildings[0].lifetime;\r\n      B4_m = B4_m / selectedBuildings[0].lifetime;\r\n      B4_t = B4_t / selectedBuildings[0].lifetime;\r\n    }\r\n\r\n    const chartData: ISingleChartDataItem[] = [\r\n      { lcaPhase: \"A1-A3\", gwp: A1A3 },\r\n      { lcaPhase: \"A4\", gwp: A4 },\r\n      { lcaPhase: \"B4 (m)\", gwp: B4_m },\r\n      { lcaPhase: \"B4 (t)\", gwp: B4_t },\r\n    ];\r\n\r\n    setChartData(chartData);\r\n  }, [\r\n    selectedBuildings[0],\r\n    isSimulationModeActive,\r\n    simulatedData,\r\n    checkedEEMetrics,\r\n  ]);\r\n\r\n  const isSeriesSimulated = (series: string): boolean => {\r\n    return Object.values(simulatedData).some(function (value: any) {\r\n      return series in value;\r\n    });\r\n  };\r\n\r\n  const sumMaterialEmissions = (column: string): number => {\r\n    const sum = simulatedMaterialProducts.reduce(\r\n      (a, b) =>\r\n        a +\r\n        (Number(\r\n          getKeyValue<keyof IMaterialTableParentRow, IMaterialTableParentRow>(\r\n            column as any,\r\n            b\r\n          )\r\n        ) || 0),\r\n      0\r\n    );\r\n    return sum;\r\n  };\r\n\r\n  const onDrawn = (e: any) => {\r\n    if (isSimulationModeActive) {\r\n      // Color emission series if contains simulated values\r\n      e.element\r\n        .querySelector(\".dxc-arg-elements\")\r\n        .childNodes.forEach((el: any) => {\r\n          const fieldName = labelToFieldname(el.innerHTML);\r\n          if (isSeriesSimulated(fieldName)) {\r\n            el.style.fill = theme.palette.simulated.main;\r\n            el.style.fontWeight = 500;\r\n          }\r\n        });\r\n    }\r\n  };\r\n\r\n  const labelToFieldname = (seriesLabel: string) => {\r\n    switch (seriesLabel) {\r\n      case \"A1-A3\":\r\n        return \"A1A3\";\r\n      case \"A4\":\r\n        return \"A4\";\r\n      case \"B4 (m)\":\r\n        return \"B4_m\";\r\n      case \"B4 (t)\":\r\n        return \"B4_t\";\r\n      default:\r\n        return \"\";\r\n    }\r\n  };\r\n\r\n  var axisTitle = \"kgCO2e\";\r\n  if (checkedEEMetrics.perSqM) axisTitle += \"/m\\xB2\";\r\n  if (checkedEEMetrics.perYear) axisTitle += \"/year\";\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Paper ref={resizedContainerRef}>\r\n      <Chart\r\n        className={classes.chart}\r\n        dataSource={chartData}\r\n        palette='Material'\r\n        onDrawn={onDrawn}\r\n        ref={chartRef}\r\n      >\r\n        <CommonSeriesSettings\r\n          argumentField='lcaPhase'\r\n          valueField='gwp'\r\n          type='bar'\r\n          showInLegend={false}\r\n          ignoreEmptyPoints={true}\r\n        />\r\n        {/* <Series\r\n                    valueField=\"gwp\"\r\n                    argumentField=\"lcaPhase\"\r\n                    name=\"Embodied emissions\"\r\n                    type=\"bar\"\r\n                    showInLegend={false}\r\n                /> */}\r\n        <ValueAxis>\r\n          <Title\r\n            text={axisTitle}\r\n            font={{\r\n              size: 12,\r\n            }}\r\n          />\r\n        </ValueAxis>\r\n        <ArgumentAxis>\r\n          {/* <Label\r\n            font={{\r\n              color: isSimulationModeActive\r\n                ? theme.palette.simulated.main\r\n                : \"#767676\",\r\n            }}\r\n          /> */}\r\n        </ArgumentAxis>\r\n        <SeriesTemplate nameField='lcaPhase' />\r\n        <Tooltip\r\n          enabled={true}\r\n          zIndex={1200}\r\n          arrowLength={6}\r\n          format={{\r\n            format: (value: string) => parseFloat(value).toLocaleString(),\r\n          }}\r\n          interactive\r\n        />\r\n      </Chart>\r\n    </Paper>\r\n  );\r\n};\r\n\r\nexport default SingleBuildingChart;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { IRootState } from \"redux/reducers\";\r\nimport allActions from \"redux/actions\";\r\n\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport Switch from \"@material-ui/core/Switch\";\r\nimport { withStyles, Theme, createStyles } from \"@material-ui/core/styles\";\r\nimport { purple } from \"@material-ui/core/colors\";\r\n\r\nimport { GroupBy } from \"interfaces/enums\";\r\nimport theme from \"styles/theme\";\r\n\r\nconst CustomSwitch = withStyles({\r\n  switchBase: {\r\n    // color: theme.palette.simulated.light,\r\n    \"&$checked\": {\r\n      color: theme.palette.simulated.main,\r\n    },\r\n    \"&$checked + $track\": {\r\n      backgroundColor: theme.palette.simulated.main,\r\n    },\r\n  },\r\n  checked: {},\r\n  track: {},\r\n})(Switch);\r\n\r\nconst SimulationModeSwitch = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  const isSimulationModeActive = useSelector(\r\n    (state: IRootState) => state.isSimulationModeActive\r\n  );\r\n  const materialsGroupBy = useSelector(\r\n    (state: IRootState) => state.materialsGroupBy\r\n  );\r\n\r\n  const handleSimulationModeChanged = () => {\r\n    dispatch(allActions.uiActions.toggleSimulationMode());\r\n    if (materialsGroupBy !== GroupBy.Product) {\r\n      dispatch(allActions.uiActions.setMaterialsGroupBy(GroupBy.Product));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <FormControlLabel\r\n      control={\r\n        <CustomSwitch\r\n          checked={isSimulationModeActive}\r\n          onChange={handleSimulationModeChanged}\r\n          name='simulationChecked'\r\n          color='primary'\r\n        />\r\n      }\r\n      label='Simulation mode'\r\n    />\r\n  );\r\n};\r\n\r\nexport default SimulationModeSwitch;\r\n","import React, { useEffect, useState, ReactText } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport allActions from \"redux/actions\";\r\nimport { IRootState } from \"redux/reducers\";\r\n\r\nimport { Theme, createStyles, makeStyles } from \"@material-ui/core/styles\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport SettingsIcon from \"@material-ui/icons/Settings\";\r\nimport Menu from \"@material-ui/core/Menu\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Drawer from \"@material-ui/core/Drawer\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport List from \"@material-ui/core/List\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\r\nimport ListItemSecondaryAction from \"@material-ui/core/ListItemSecondaryAction\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport ListSubheader from \"@material-ui/core/ListSubheader\";\r\nimport Switch from \"@material-ui/core/Switch\";\r\n\r\ninterface Props {\r\n  iconSize?: \"small\" | \"inherit\" | \"large\" | \"default\" | undefined;\r\n}\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      width: \"100%\",\r\n      maxWidth: 360,\r\n      minWidth: 220,\r\n    },\r\n    content: {\r\n      width: 350,\r\n      padding: theme.spacing(2),\r\n    },\r\n    formControl: {\r\n      marginTop: theme.spacing(3),\r\n    },\r\n  })\r\n);\r\n\r\nfunction SettingsButton(props: Props) {\r\n  const dispatch = useDispatch();\r\n  const checkedEEMetrics = useSelector((state: IRootState) => state.EEMetric);\r\n\r\n  const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);\r\n\r\n  const handleClick = (event: React.MouseEvent<HTMLButtonElement>) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const handleEEMetricChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    dispatch(\r\n      allActions.settingsActions.setEEMetric({\r\n        name: event.target.name,\r\n        checked: event.target.checked,\r\n      })\r\n    );\r\n  };\r\n\r\n  const { perSqM, perYear } = checkedEEMetrics;\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div>\r\n      <Tooltip title='Metric settings'>\r\n        <IconButton aria-label='help' onClick={handleClick}>\r\n          <SettingsIcon fontSize={props.iconSize} />\r\n        </IconButton>\r\n      </Tooltip>\r\n      <Menu\r\n        id='simple-menu'\r\n        anchorEl={anchorEl}\r\n        keepMounted\r\n        open={Boolean(anchorEl)}\r\n        onClose={handleClose}\r\n        PaperProps={{\r\n          style: {\r\n            width: 170,\r\n          },\r\n        }}\r\n      >\r\n        <ListSubheader>Metric settings</ListSubheader>\r\n        <ListItem>\r\n          <ListItemText id='switch-list-label-sqm' primary={\"Per m\\xB2\"} />\r\n          <ListItemSecondaryAction>\r\n            <Switch\r\n              edge='end'\r\n              checked={perSqM}\r\n              onChange={handleEEMetricChange}\r\n              name='perSqM'\r\n            />\r\n          </ListItemSecondaryAction>\r\n        </ListItem>\r\n        <ListItem>\r\n          <ListItemText id='switch-list-label-year' primary='Per year' />\r\n          <ListItemSecondaryAction>\r\n            <Switch\r\n              edge='end'\r\n              checked={perYear}\r\n              onChange={handleEEMetricChange}\r\n              name='perYear'\r\n            />\r\n          </ListItemSecondaryAction>\r\n        </ListItem>\r\n      </Menu>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SettingsButton;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { IRootState } from \"redux/reducers\";\r\nimport allActions from \"redux/actions\";\r\n\r\nimport {\r\n  createStyles,\r\n  Theme,\r\n  withStyles,\r\n  WithStyles,\r\n  makeStyles,\r\n} from \"@material-ui/core/styles\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport FormGroup from \"@material-ui/core/FormGroup\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport Switch from \"@material-ui/core/Switch\";\r\n\r\nimport MaterialsContainer from \"components/MaterialsContainer\";\r\nimport SingleBuildingChart from \"./SingleBuildingChart\";\r\nimport SimulationModeSwitch from \"./SimulationModeSwitch\";\r\nimport SettingsButton from \"components/SettingsButton\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    buildingSection: {\r\n      marginBottom: theme.spacing(2),\r\n    },\r\n    divider: {\r\n      marginBottom: theme.spacing(2),\r\n    },\r\n    materialSection: {\r\n      marginTop: theme.spacing(2),\r\n    },\r\n    buildingInfoLabels: {\r\n      fontWeight: \"bold\",\r\n    },\r\n    heading: {\r\n      marginBottom: theme.spacing(1)\r\n    },\r\n    content: {\r\n      // margin: theme.spacing(1),\r\n      padding: theme.spacing(2),\r\n      // height: '600px'\r\n    },\r\n  })\r\n);\r\n\r\nconst initialBuildingState: IBuilding = {\r\n  idbuildings: 0,\r\n  building_identifier: \"\",\r\n  building_name: \"\",\r\n  project: \"\",\r\n  country: \"\",\r\n  city: \"\",\r\n  typology: \"\",\r\n  construction_type: \"\",\r\n  lifetime: 0,\r\n  floor_area: 0,\r\n  A1A3: null,\r\n  A4: null,\r\n  B4_m: null,\r\n  B4_t: null,\r\n};\r\n\r\nfunction SingleBuildingView() {\r\n  const dispatch = useDispatch();\r\n\r\n  const selectedBuildings = useSelector(\r\n    (state: IRootState) => state.selectedBuildings\r\n  );\r\n\r\n  const isSimulationModeChecked = useSelector(\r\n    (state: IRootState) => state.isSimulationModeActive\r\n  );\r\n\r\n  const handleSimulationModeChanged = () => {\r\n    dispatch(allActions.uiActions.toggleSimulationMode());\r\n  };\r\n\r\n  const {\r\n    building_identifier,\r\n    building_name,\r\n    project,\r\n    typology,\r\n    construction_type,\r\n    floor_area,\r\n    A1A3,\r\n    A4,\r\n    B4_m,\r\n    B4_t,\r\n  } = selectedBuildings[0];\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.content}>\r\n      <Grid container spacing={3} className={classes.buildingSection}>\r\n        <Grid item container alignItems='flex-start' justify='space-between'>\r\n          <Grid item xs={8}>\r\n            <Typography variant='h4' color='textPrimary'>\r\n              {building_name}\r\n            </Typography>\r\n            <Typography variant='subtitle1' color='textSecondary' gutterBottom>\r\n              {building_identifier}\r\n            </Typography>\r\n          </Grid>\r\n          <Grid item>\r\n            <SimulationModeSwitch />\r\n          </Grid>\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n          <Grid container alignItems='center' justify='space-between' className={classes.heading}>\r\n            <Grid item>\r\n              <Typography variant='h5' color='textSecondary'>\r\n                General info\r\n              </Typography>\r\n            </Grid>\r\n          </Grid>\r\n          <div>\r\n            <TextField\r\n              key={project || \"project\"}\r\n              inputProps={{\r\n                readOnly: true,\r\n                disabled: true,\r\n              }}\r\n              InputProps={{ disableUnderline: true }}\r\n              fullWidth={true}\r\n              label='Project'\r\n              name='project'\r\n              margin='dense'\r\n              defaultValue={project || \"nil\"}\r\n            />\r\n            <TextField\r\n              key={typology || \"typology\"}\r\n              inputProps={{\r\n                readOnly: true,\r\n                disabled: true,\r\n              }}\r\n              InputProps={{ disableUnderline: true }}\r\n              fullWidth={true}\r\n              label='Typology'\r\n              name='typology'\r\n              margin='dense'\r\n              defaultValue={typology || \"nil\"}\r\n            />\r\n            <TextField\r\n              key={construction_type || \"c_type\"}\r\n              inputProps={{\r\n                readOnly: true,\r\n                disabled: true,\r\n              }}\r\n              InputProps={{ disableUnderline: true }}\r\n              fullWidth={true}\r\n              label='Construction type'\r\n              name='construction_type'\r\n              margin='dense'\r\n              defaultValue={construction_type || \"nil\"}\r\n            />\r\n            <TextField\r\n              key={floor_area || \"f_area\"}\r\n              inputProps={{\r\n                readOnly: true,\r\n                disabled: true,\r\n              }}\r\n              InputProps={{ disableUnderline: true }}\r\n              fullWidth={true}\r\n              label='Floor area'\r\n              name='floor_area'\r\n              margin='dense'\r\n              defaultValue={floor_area + \" m\\xB2\" || \"nil\"}\r\n            />\r\n          </div>\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n          <Grid container alignItems='center' justify='space-between' className={classes.heading}>\r\n            <Grid item>\r\n              <Typography variant='h5' color='textSecondary'>\r\n                Embodied emissions\r\n              </Typography>\r\n            </Grid>\r\n            <Grid item>\r\n              <SettingsButton iconSize='default' />\r\n            </Grid>\r\n          </Grid>\r\n          <SingleBuildingChart />\r\n        </Grid>\r\n      </Grid>\r\n\r\n      <Grid container spacing={3}>\r\n        <Grid item xs>\r\n          <Divider variant='middle' light={true} className={classes.divider} />\r\n          <MaterialsContainer />\r\n        </Grid>\r\n      </Grid>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SingleBuildingView;\r\n","import React, { useState, useEffect, useRef, useCallback } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { IRootState } from \"redux/reducers\";\r\nimport allActions from \"redux/actions\";\r\n\r\nimport {\r\n  Theme,\r\n  createStyles,\r\n  makeStyles,\r\n  withStyles,\r\n  WithStyles,\r\n  emphasize,\r\n} from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\n\r\nimport {\r\n  Chart,\r\n  Series,\r\n  CommonSeriesSettings,\r\n  Legend,\r\n  ValueAxis,\r\n  ArgumentAxis,\r\n  Title,\r\n  Tooltip,\r\n  Size,\r\n  Label,\r\n} from \"devextreme-react/chart\";\r\n\r\nimport { customizeHint } from \"components/ChartComponents\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    chart: {\r\n      padding: theme.spacing(2),\r\n    },\r\n  })\r\n);\r\n\r\nconst MultipleBuildingsChart = () => {\r\n  const chartRef = useRef<Chart>(null);\r\n\r\n  var renderOptions = {\r\n    force: true, // forces redrawing\r\n    animate: true, // redraws the UI component with animation\r\n  };\r\n\r\n  const resizeObserver = useRef<ResizeObserver>(\r\n    new ResizeObserver((entries: ResizeObserverEntry[]) => {\r\n      // your code to handle the size change\r\n      console.log(\"Size changed\");\r\n      chartRef?.current?.instance.render(renderOptions);\r\n    })\r\n  );\r\n\r\n  const resizedContainerRef = useCallback(\r\n    (container: HTMLDivElement) => {\r\n      if (container !== null) {\r\n        resizeObserver.current.observe(container);\r\n      }\r\n      // When element is unmounted, ref callback is called with a null argument\r\n      // => best time to cleanup the observer\r\n      else {\r\n        if (resizeObserver.current) resizeObserver.current.disconnect();\r\n      }\r\n    },\r\n    [resizeObserver.current]\r\n  );\r\n\r\n  const selectedBuildings = useSelector(\r\n    (state: IRootState) => state.selectedBuildings\r\n  );\r\n  const checkedEEMetrics = useSelector((state: IRootState) => state.EEMetric);\r\n\r\n  const [chartData, setChartData] = useState<ICompareChartDataItem[]>([]);\r\n\r\n  useEffect(() => {\r\n    const chartData: ICompareChartDataItem[] = [];\r\n\r\n    selectedBuildings.forEach((building) => {\r\n      var A1A3: number = Number(building.A1A3) || 0.0;\r\n      var A4: number = Number(building.A4) || 0.0;\r\n      var B4_m: number = Number(building.B4_m) || 0.0;\r\n      var B4_t: number = Number(building.B4_t) || 0.0;\r\n\r\n      // Divides by floor area if setting is checked\r\n      if (checkedEEMetrics.perSqM) {\r\n        A1A3 = A1A3 / building.floor_area;\r\n        A4 = A4 / building.floor_area;\r\n        B4_m = B4_m / building.floor_area;\r\n        B4_t = B4_t / building.floor_area;\r\n      }\r\n\r\n      // Divides by lifetime year if setting is checked\r\n      if (checkedEEMetrics.perYear) {\r\n        A1A3 = A1A3 / building.lifetime;\r\n        A4 = A4 / building.lifetime;\r\n        B4_m = B4_m / building.lifetime;\r\n        B4_t = B4_t / building.lifetime;\r\n      }\r\n\r\n      const dataEntry: ICompareChartDataItem = {\r\n        name: building.building_name,\r\n        identifier: building.building_identifier,\r\n        a1a3: A1A3,\r\n        a4: A4,\r\n        b4m: B4_m,\r\n        b4t: B4_t,\r\n      };\r\n\r\n      chartData.push(dataEntry);\r\n    });\r\n\r\n    setChartData(chartData.reverse());\r\n  }, [selectedBuildings, checkedEEMetrics]);\r\n\r\n  const customizeTooltip = (arg: any) => {\r\n    return {\r\n      text: `<b>${arg.seriesName}</b>\\n ${arg.valueText}`,\r\n    };\r\n  };\r\n\r\n  // Wraps label over two lines if longer than 15 characters\r\n  const customizeArgumentAxisLabel = (data: any) => {\r\n    if (data.value.length > 17) {\r\n      const wordArray = data.value.split(\" \");\r\n      if (wordArray.length > 2) {\r\n        const firstLine = wordArray.slice(0, 2).join(\" \");\r\n        const secondLine = wordArray.slice(2).join(\" \");\r\n        return firstLine + \"\\n\" + secondLine;\r\n      } else {\r\n        return wordArray.join(\"\\n\");\r\n      }\r\n    }\r\n\r\n    return data.value;\r\n  };\r\n\r\n  var axisTitle = \"kgCO2e\";\r\n  if (checkedEEMetrics.perSqM) axisTitle += \"/m\\xB2\";\r\n  if (checkedEEMetrics.perYear) axisTitle += \"/year\";\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Paper ref={resizedContainerRef}>\r\n      <Chart\r\n        className={classes.chart}\r\n        dataSource={chartData}\r\n        palette='Material'\r\n        rotated\r\n        ref={chartRef}\r\n      >\r\n        <Size height={500} />\r\n        <CommonSeriesSettings\r\n          argumentField='name'\r\n          type='stackedBar'\r\n          barWidth={60}\r\n        />\r\n        <Series valueField='a1a3' name='A1-A3' />\r\n        <Series valueField='a4' name='A4' />\r\n        <Series valueField='b4m' name='B4 (m)' />\r\n        <Series valueField='b4t' name='B4 (t)' />\r\n        <ValueAxis>\r\n          <Title\r\n            text={axisTitle}\r\n            font={{\r\n              size: 14,\r\n            }}\r\n          />\r\n        </ValueAxis>\r\n        <ArgumentAxis>\r\n          <Label customizeText={customizeArgumentAxisLabel} />\r\n        </ArgumentAxis>\r\n        <Legend\r\n          verticalAlignment='bottom'\r\n          horizontalAlignment='center'\r\n          itemTextPosition='top'\r\n          customizeHint={customizeHint}\r\n        />\r\n        <Tooltip\r\n          enabled={true}\r\n          location='edge'\r\n          customizeTooltip={customizeTooltip}\r\n          zIndex={1200}\r\n          arrowLength={6}\r\n          format={{\r\n            format: (value: string) => parseFloat(value).toLocaleString(),\r\n          }}\r\n        />\r\n      </Chart>\r\n    </Paper>\r\n  );\r\n};\r\n\r\nexport default MultipleBuildingsChart;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { IRootState } from \"redux/reducers\";\r\nimport allActions from \"redux/actions\";\r\n\r\nimport {\r\n  createStyles,\r\n  Theme,\r\n  withStyles,\r\n  WithStyles,\r\n  makeStyles,\r\n} from \"@material-ui/core/styles\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nimport MultipleBuildingsChart from \"./MultipleBuildingsChart\";\r\nimport SettingsButton from \"components/SettingsButton\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    content: {\r\n      padding: theme.spacing(2),\r\n    },\r\n    heading: {\r\n      marginBottom: theme.spacing(1),\r\n    },\r\n  })\r\n);\r\n\r\nconst MultipleBuildingsView = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  const selectedBuildings = useSelector(\r\n    (state: IRootState) => state.selectedBuildings\r\n  );\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.content}>\r\n      <Grid\r\n        container\r\n        alignItems='center'\r\n        justify='space-between'\r\n        className={classes.heading}\r\n      >\r\n        <Grid item>\r\n          <Typography variant='h5' color='textSecondary'>\r\n            Embodied emissions\r\n          </Typography>\r\n        </Grid>\r\n        <Grid item>\r\n          <SettingsButton iconSize='default' />\r\n        </Grid>\r\n      </Grid>\r\n      <MultipleBuildingsChart />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MultipleBuildingsView;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { IRootState } from \"redux/reducers\";\r\nimport allActions from \"redux/actions\";\r\n\r\nimport {\r\n  createStyles,\r\n  Theme,\r\n  withStyles,\r\n  WithStyles,\r\n  makeStyles,\r\n} from \"@material-ui/core/styles\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Drawer from \"@material-ui/core/Drawer\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport SingleBuildingView from \"./SingleBuildingView\";\r\nimport MultipleBuildingsView from \"./MultipleBuildingsView\";\r\n\r\nconst drawerWidth = \"50vw\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    buildingSection: {\r\n      marginBottom: theme.spacing(2),\r\n    },\r\n    divider: {\r\n      marginBottom: theme.spacing(2),\r\n    },\r\n    elementSection: {\r\n      marginTop: theme.spacing(2),\r\n    },\r\n    buildingInfoLabels: {\r\n      fontWeight: \"bold\",\r\n    },\r\n    noSelectionContainer: {\r\n      height: \"100vh\",\r\n    },\r\n    drawer: {\r\n      width: drawerWidth,\r\n      flexShrink: 0,\r\n    },\r\n    drawerPaper: {\r\n      // padding: theme.spacing(2),\r\n      // marginBottom: theme.spacing(2),\r\n      width: drawerWidth,\r\n      overflowY: \"scroll\",\r\n    },\r\n    content: {\r\n      // margin: theme.spacing(1),\r\n      padding: theme.spacing(2),\r\n      // height: '600px'\r\n    },\r\n  })\r\n);\r\n\r\nconst BuildingDetails = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  const selectedBuildings = useSelector(\r\n    (state: IRootState) => state.selectedBuildings\r\n  );\r\n  const canSelectMultipleBuildings = useSelector(\r\n    (state: IRootState) => state.canSelectMultipleBuildings\r\n  );\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    // <Drawer\r\n    //   className={classes.drawer}\r\n    //   variant='permanent'\r\n    //   classes={{\r\n    //     paper: classes.drawerPaper,\r\n    //   }}\r\n    //   anchor='right'\r\n    // >\r\n    <div>\r\n      {selectedBuildings.length ? (\r\n        canSelectMultipleBuildings ? (\r\n          <MultipleBuildingsView />\r\n        ) : (\r\n          <SingleBuildingView />\r\n        )\r\n      ) : (\r\n        <Grid\r\n          container\r\n          justify='center'\r\n          alignItems='center'\r\n          className={classes.noSelectionContainer}\r\n        >\r\n          <Grid item xs={12}>\r\n            <Typography variant='h5' color='textSecondary' align='center'>\r\n              Select a building\r\n            </Typography>\r\n          </Grid>\r\n        </Grid>\r\n      )}\r\n    </div>\r\n    // </Drawer>\r\n  );\r\n};\r\n\r\nexport default BuildingDetails;\r\n","import React, { useEffect, useState, ReactText } from \"react\";\r\nimport HelpStrings from \"./HelpStrings\";\r\n\r\nimport {\r\n  createStyles,\r\n  Theme,\r\n  withStyles,\r\n  WithStyles,\r\n} from \"@material-ui/core/styles\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\n\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport HelpOutlineIcon from \"@material-ui/icons/HelpOutline\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport MuiDialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport MuiDialogContent from \"@material-ui/core/DialogContent\";\r\nimport MuiDialogActions from \"@material-ui/core/DialogActions\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport List from \"@material-ui/core/List\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\n\r\nconst styles = (theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      margin: 0,\r\n      padding: theme.spacing(2),\r\n    },\r\n    closeButton: {\r\n      position: \"absolute\",\r\n      right: theme.spacing(1),\r\n      top: theme.spacing(1),\r\n      color: theme.palette.grey[500],\r\n    },\r\n  });\r\n\r\nexport interface DialogTitleProps extends WithStyles<typeof styles> {\r\n  id: string;\r\n  children: React.ReactNode;\r\n  onClose: () => void;\r\n}\r\n\r\nconst DialogTitle = withStyles(styles)((props: DialogTitleProps) => {\r\n  const { children, classes, onClose, ...other } = props;\r\n  return (\r\n    <MuiDialogTitle disableTypography className={classes.root} {...other}>\r\n      <Typography variant='h6'>{children}</Typography>\r\n      {onClose ? (\r\n        <IconButton\r\n          aria-label='close'\r\n          className={classes.closeButton}\r\n          onClick={onClose}\r\n        >\r\n          <CloseIcon />\r\n        </IconButton>\r\n      ) : null}\r\n    </MuiDialogTitle>\r\n  );\r\n});\r\n\r\nconst DialogContent = withStyles((theme: Theme) => ({\r\n  root: {\r\n    padding: theme.spacing(2),\r\n  },\r\n}))(MuiDialogContent);\r\n\r\nconst DialogActions = withStyles((theme: Theme) => ({\r\n  root: {\r\n    margin: 0,\r\n    padding: theme.spacing(1),\r\n  },\r\n}))(MuiDialogActions);\r\n\r\nconst terminologyDictionary = [\r\n  { term: \"A1-A3\", definition: \"Material production\" },\r\n  {\r\n    term: \"A4\",\r\n    definition: \"Transportation of materials to the building site\",\r\n  },\r\n  {\r\n    term: \"B4 (m)\",\r\n    definition: \"Material replacements throughout the study lifetime period\",\r\n  },\r\n  { term: \"B4 (t)\", definition: \"Transportation of material replacements\" },\r\n];\r\n\r\nfunction HelpButton() {\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Tooltip title='Help'>\r\n        <IconButton aria-label='help' onClick={handleClickOpen}>\r\n          <HelpOutlineIcon fontSize='large' />\r\n        </IconButton>\r\n      </Tooltip>\r\n      <Dialog onClose={handleClose} open={open}>\r\n        <DialogTitle id='customized-dialog-title' onClose={handleClose}>\r\n          Help\r\n        </DialogTitle>\r\n        <DialogContent dividers>\r\n          <Typography variant='h6'>How to use</Typography>\r\n          <Typography>\r\n            <ul>\r\n              <li>\r\n                Click on a row to see more details about the building, including\r\n                its <b>materials</b> and <b>building elements</b>.\r\n              </li>\r\n              <li>\r\n                Turn on <b>simulation mode</b> (\r\n                <i>top-right in building details</i>) to edit a building's\r\n                materials and see how the changes affect the rest of the\r\n                building.\r\n              </li>\r\n              <li>\r\n                Select multiple rows to <b>compare</b> the emission values of\r\n                different buildings.\r\n              </li>\r\n            </ul>\r\n          </Typography>\r\n          <Typography variant='h6'>Terminology</Typography>\r\n          <List>\r\n            {terminologyDictionary.map((entry, index) => (\r\n              <ListItem\r\n                key={index}\r\n                divider={index < terminologyDictionary.length - 1}\r\n              >\r\n                <Grid container spacing={1} alignItems='center'>\r\n                  <Grid item xs={2}>\r\n                    <Typography variant='body1' color='textSecondary'>\r\n                      {entry.term}\r\n                    </Typography>\r\n                  </Grid>\r\n                  <Grid item xs={10}>\r\n                    <Typography variant='body1'>{entry.definition}</Typography>\r\n                  </Grid>\r\n                </Grid>\r\n              </ListItem>\r\n            ))}\r\n          </List>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button autoFocus onClick={handleClose} color='primary'>\r\n            OK\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\n/* \r\ninterface Props {\r\n  iconSize?: \"small\" | \"inherit\" | \"large\" | \"default\" | undefined;\r\n  alertContentId: string;\r\n}\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    container: {\r\n      width: \"55vw\",\r\n      marginTop: theme.spacing(2),\r\n    },\r\n    mainContent: {\r\n      width: \"90%\",\r\n    },\r\n    titleBar: {\r\n      marginBottom: theme.spacing(2),\r\n    },\r\n  })\r\n);\r\n\r\nfunction HelpButton(props: Props) {\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div>\r\n      <Tooltip title='Help'>\r\n        <IconButton aria-label='help' onClick={handleClickOpen}>\r\n          <HelpOutlineIcon fontSize={props.iconSize} />\r\n        </IconButton>\r\n      </Tooltip>\r\n      <Dialog open={open} onClose={handleClose}>\r\n        <DialogTitle>How to use</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText>\r\n            {HelpStrings.helpDict[props.alertContentId]}\r\n          </DialogContentText>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color='primary' autoFocus>\r\n            Ok\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n} */\r\n\r\nexport default HelpButton;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport allActions from \"redux/actions\";\r\nimport { IRootState } from \"redux/reducers\";\r\n\r\nimport \"devextreme/dist/css/dx.common.css\";\r\nimport \"devextreme/dist/css/dx.material.blue.light.css\";\r\n\r\nimport \"react-reflex/styles.css\";\r\nimport { ReflexContainer, ReflexSplitter, ReflexElement } from \"react-reflex\";\r\n\r\nimport { Theme, createStyles, makeStyles } from \"@material-ui/core/styles\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nimport BuildingsTable from \"../BuildingsTable\";\r\nimport BuildingDetails from \"../BuildingDetails\";\r\nimport HelpButton from \"../HelpButton\";\r\nimport SettingsButton from \"../SettingsButton\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    container: {\r\n      height: \"100vh\",\r\n    },\r\n    titleBar: {\r\n      marginBottom: theme.spacing(2),\r\n    },\r\n    content: {\r\n      padding: theme.spacing(2),\r\n      boxSizing: \"border-box\",\r\n      // maxHeight: \"100vh\"\r\n    },\r\n  })\r\n);\r\n\r\nfunction HomePage() {\r\n  \r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <ReflexContainer className={classes.container} orientation='vertical'>\r\n      <ReflexElement className={classes.content} minSize={400}>\r\n        <Grid\r\n          container\r\n          alignItems='center'\r\n          justify='space-between'\r\n          spacing={2}\r\n          className={classes.titleBar}\r\n        >\r\n          <Grid item>\r\n            <Typography variant='h2'>bLCAd Tool - GUI</Typography>\r\n          </Grid>\r\n\r\n          <Grid item>\r\n            <HelpButton />\r\n          </Grid>\r\n        </Grid>\r\n\r\n        {/* TODO: use flexbox or something to make height stretch all the way to bottom of viewport */}\r\n        <div style={{ height: \"80vh\" }}>\r\n          <BuildingsTable />\r\n        </div>\r\n      </ReflexElement>\r\n\r\n      <ReflexSplitter />\r\n\r\n      <ReflexElement minSize={400}>\r\n        <div>\r\n          <BuildingDetails />\r\n        </div>\r\n      </ReflexElement>\r\n    </ReflexContainer>\r\n  );\r\n}\r\n\r\nexport default HomePage;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\n\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport MuiLink from \"@material-ui/core/Link\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Container from \"@material-ui/core/Container\";\r\n\r\nimport { Router, RouteComponentProps, Link } from \"@reach/router\";\r\nimport firebase from \"firebase/app\";\r\nimport { auth } from \"services/firebase\";\r\nimport allActions from \"redux/actions\";\r\n\r\nfunction Copyright() {\r\n  return (\r\n    <Typography variant='body2' color='textSecondary' align='center'>\r\n      {\"Copyright © \"}\r\n      <MuiLink color='inherit' href='https://github.com/ericvel'>\r\n        Eric Veliyulin\r\n      </MuiLink>{\" \"}\r\n      {new Date().getFullYear()}\r\n      {\".\"}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main,\r\n  },\r\n  form: {\r\n    width: \"100%\", // Fix IE 11 issue.\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n}));\r\n\r\nfunction SignIn() {\r\n  const dispatch = useDispatch();\r\n\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const signInWithEmailAndPasswordHandler = (\r\n    event: any,\r\n    email: string,\r\n    password: string\r\n  ) => {\r\n    event.preventDefault();\r\n\r\n    firebase\r\n      .auth()\r\n      .setPersistence(firebase.auth.Auth.Persistence.SESSION)\r\n      .then(() => {\r\n        // Existing and future Auth states are now persisted in the current\r\n        // session only. Closing the window would clear any existing state even\r\n        // if a user forgets to sign out.\r\n        // ...\r\n        // New sign-in will be persisted with session persistence.\r\n        return firebase.auth().signInWithEmailAndPassword(email, password);\r\n      })\r\n      .catch((error) => {\r\n        switch (error.code) {\r\n          case \"auth/invalid-email\":\r\n            setError(\"The email address is invalid\");\r\n            break;\r\n          case \"auth/wrong-password\": {\r\n            setError(\"The password is invalid\");\r\n            break;\r\n          }\r\n          case \"auth/user-not-found\": {\r\n            setError(\"The user does not exist\");\r\n            break;\r\n          }\r\n        }\r\n        console.error(\"Error signing in: \", error);\r\n      });\r\n  };\r\n\r\n  const onChangeHandler = (event: any) => {\r\n    const { name, value } = event.currentTarget;\r\n\r\n    if (name === \"email\") {\r\n      setEmail(value);\r\n    } else if (name === \"password\") {\r\n      setPassword(value);\r\n    }\r\n  };\r\n\r\n  function handleSubmit(event: any) {\r\n    event.preventDefault();\r\n  }\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Container component='main' maxWidth='xs'>\r\n      <CssBaseline />\r\n      <div className={classes.paper}>\r\n        <Avatar className={classes.avatar}>\r\n          <LockOutlinedIcon />\r\n        </Avatar>\r\n        <Typography component='h1' variant='h5'>\r\n          Sign in\r\n        </Typography>\r\n        {error !== null && (\r\n          <Typography color='error'>Error: {error}</Typography>\r\n        )}\r\n        <form className={classes.form} noValidate onSubmit={handleSubmit}>\r\n          <TextField\r\n            variant='outlined'\r\n            margin='normal'\r\n            required\r\n            fullWidth\r\n            id='email'\r\n            label='Email Address'\r\n            name='email'\r\n            autoComplete='email'\r\n            autoFocus\r\n            onChange={(event) => onChangeHandler(event)}\r\n          />\r\n          <TextField\r\n            variant='outlined'\r\n            margin='normal'\r\n            required\r\n            fullWidth\r\n            name='password'\r\n            label='Password'\r\n            type='password'\r\n            id='password'\r\n            autoComplete='current-password'\r\n            onChange={(event) => onChangeHandler(event)}\r\n          />\r\n          <Button\r\n            type='submit'\r\n            fullWidth\r\n            variant='contained'\r\n            color='primary'\r\n            className={classes.submit}\r\n            onClick={(event) => {\r\n              signInWithEmailAndPasswordHandler(event, email, password);\r\n            }}\r\n          >\r\n            Sign In\r\n          </Button>\r\n        </form>\r\n      </div>\r\n      <Box mt={8}>\r\n        <Copyright />\r\n      </Box>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default SignIn;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport allActions from \"redux/actions\";\r\nimport { IRootState } from \"redux/reducers\";\r\n\r\nimport firebase from \"firebase/app\";\r\n\r\nimport \"devextreme/dist/css/dx.common.css\";\r\nimport \"devextreme/dist/css/dx.material.blue.light.css\";\r\n\r\nimport { ThemeProvider } from \"@material-ui/core/styles\";\r\nimport theme from \"styles/theme\";\r\n\r\nimport HomePage from \"components/HomePage\";\r\nimport SignIn from \"components/SignIn\";\r\n\r\nfunction App() {\r\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\r\n  firebase.auth().onAuthStateChanged(function (user) {\r\n    if (user) {\r\n      // User is signed in.\r\n      setIsAuthenticated(true);\r\n    } else {\r\n      // No user is signed in.\r\n      setIsAuthenticated(false);\r\n    }\r\n  });\r\n\r\n  return isAuthenticated ? (\r\n    <ThemeProvider theme={theme}>\r\n      <HomePage />\r\n    </ThemeProvider>\r\n  ) : (\r\n    <SignIn />\r\n  );\r\n  /*  <ThemeProvider theme={theme}>\r\n      {isAuthenticated ? <HomePage /> : <SignIn />}\r\n    </ThemeProvider> */\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === \"localhost\" ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === \"[::1]\" ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener(\"load\", () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            \"This web app is being served cache-first by a service \" +\r\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then((registration) => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === \"installed\") {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                \"New content is available and will be used when all \" +\r\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log(\"Content is cached for offline use.\");\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch((error) => {\r\n      console.error(\"Error during service worker registration:\", error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { \"Service-Worker\": \"script\" },\r\n  })\r\n    .then((response) => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get(\"content-type\");\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then((registration) => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        \"No internet connection found. App is running in offline mode.\"\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if (\"serviceWorker\" in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then((registration) => {\r\n        registration.unregister();\r\n      })\r\n      .catch((error) => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import {\r\n  BuildingElementActionTypes,\r\n  MaterialInventoryActionTypes,\r\n  SelectBuildingElementAction,\r\n  ElementRouteActionTypes,\r\n  HoverBuildingElementActionTypes,\r\n  SimulatedDataActionTypes,\r\n  MaterialProductsActionTypes,\r\n  SimulatedMaterialProductsActionTypes,\r\n  SET_BUILDING_ELEMENTS,\r\n  SET_MATERIAL_INVENTORY,\r\n  SELECT_BUILDING_ELEMENT,\r\n  ADD_TO_ELEMENT_ROUTE,\r\n  SET_BUILDING_ELEMENT_ROUTE,\r\n  HOVER_BUILDING_ELEMENT,\r\n  STOP_HOVER_BUILDING_ELEMENT,\r\n  SET_SIMULATED_DATA,\r\n  SET_MATERIAL_PRODUCTS,\r\n  SET_SIMULATED_MATERIAL_PRODUCTS,\r\n} from \"../actions/types\";\r\n\r\nexport const buildingElements = (\r\n  state: IBuildingElement[] = [],\r\n  action: BuildingElementActionTypes\r\n) => {\r\n  switch (action.type) {\r\n    case SET_BUILDING_ELEMENTS:\r\n      return action.payload;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport const materialInventory = (\r\n  state: IMaterialInventory[] = [],\r\n  action: MaterialInventoryActionTypes\r\n) => {\r\n  switch (action.type) {\r\n    case SET_MATERIAL_INVENTORY:\r\n      return action.payload;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst initialSelectedElementState: IBuildingElement = {\r\n  idbuilding_elements: 0,\r\n  idlevels: 0,\r\n  name: \"\",\r\n  hierarchy: 0,\r\n  A1A3: null,\r\n  A4: null,\r\n  B4_m: null,\r\n  B4_t: null,\r\n  idparent: null,\r\n};\r\n\r\nexport const selectedBuildingElement = (\r\n  state: IBuildingElement = initialSelectedElementState,\r\n  action: SelectBuildingElementAction\r\n) => {\r\n  switch (action.type) {\r\n    case SELECT_BUILDING_ELEMENT:\r\n      return action.payload;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport const buildingElementRoute = (\r\n  state: IBuildingElement[] = [],\r\n  action: ElementRouteActionTypes\r\n) => {\r\n  switch (action.type) {\r\n    case ADD_TO_ELEMENT_ROUTE:\r\n      return [...state, action.payload];\r\n    case SET_BUILDING_ELEMENT_ROUTE:\r\n      return action.payload;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport const hoveredBuildingElement = (\r\n  state: number | null = null,\r\n  action: HoverBuildingElementActionTypes\r\n) => {\r\n  switch (action.type) {\r\n    case HOVER_BUILDING_ELEMENT:\r\n      return action.payload;\r\n    case STOP_HOVER_BUILDING_ELEMENT:\r\n      return null;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport const simulatedData = (\r\n  state: ISimulatedData = {},\r\n  action: SimulatedDataActionTypes\r\n) => {\r\n  switch (action.type) {\r\n    case SET_SIMULATED_DATA:\r\n      return action.payload;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport const materialProducts = (\r\n  state: IMaterialTableParentRow[] = [],\r\n  action: MaterialProductsActionTypes\r\n) => {\r\n  switch (action.type) {\r\n    case SET_MATERIAL_PRODUCTS:\r\n      return action.payload;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport const simulatedMaterialProducts = (\r\n  state: IMaterialTableParentRow[] = [],\r\n  action: SimulatedMaterialProductsActionTypes\r\n) => {\r\n  switch (action.type) {\r\n    case SET_SIMULATED_MATERIAL_PRODUCTS:\r\n      return action.payload;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { SET_EE_METRIC, EEMetricActionTypes } from \"../actions/types\";\r\n\r\nconst initialEEMetric: IEEMetric = {\r\n  perSqM: true,\r\n  perYear: false,\r\n};\r\n\r\nexport const EEMetric = (\r\n  state = initialEEMetric,\r\n  action: EEMetricActionTypes\r\n) => {\r\n  switch (action.type) {\r\n    case SET_EE_METRIC:\r\n      return { ...state, [action.name]: action.checked };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { combineReducers } from \"redux\";\r\nimport { buildings, selectedBuildings } from \"./buildings\";\r\nimport { isCompareDialogOpen } from \"./flags\";\r\nimport {\r\n  buildingElements,\r\n  materialInventory,\r\n  selectedBuildingElement,\r\n  buildingElementRoute,\r\n  hoveredBuildingElement,\r\n  simulatedData,\r\n  materialProducts,\r\n  simulatedMaterialProducts,\r\n} from \"./elementsAndMaterials\";\r\nimport {\r\n  materialsGroupBy,\r\n  displayMode,\r\n  canSelectMultipleBuildings,\r\n  isSimulationModeActive,\r\n} from \"./ui\";\r\nimport { EEMetric } from \"./settings\";\r\nimport { currentUser } from \"./user\";\r\n\r\nconst rootReducer = combineReducers({\r\n  buildings,\r\n  selectedBuildings,\r\n  isCompareDialogOpen,\r\n  buildingElements,\r\n  materialInventory,\r\n  selectedBuildingElement,\r\n  buildingElementRoute,\r\n  hoveredBuildingElement,\r\n  materialsGroupBy,\r\n  displayMode,\r\n  canSelectMultipleBuildings,\r\n  isSimulationModeActive,\r\n  EEMetric,\r\n  simulatedData,\r\n  currentUser,\r\n  materialProducts,\r\n  simulatedMaterialProducts,\r\n});\r\n\r\nexport default rootReducer;\r\n\r\nexport type IRootState = ReturnType<typeof rootReducer>;\r\n","import {\r\n  BuildingActionTypes,\r\n  SET_BUILDINGS,\r\n  SelectedBuildingActionTypes,\r\n  SELECT_BUILDINGS,\r\n  DESELECT_ALL_BUILDINGS,\r\n} from \"../actions/types\";\r\n\r\nexport const buildings = (\r\n  state: IBuilding[] = [],\r\n  action: BuildingActionTypes\r\n) => {\r\n  switch (action.type) {\r\n    case SET_BUILDINGS:\r\n      return action.payload;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport const selectedBuildings = (\r\n  state: IBuilding[] = [],\r\n  action: SelectedBuildingActionTypes\r\n) => {\r\n  switch (action.type) {\r\n    case SELECT_BUILDINGS:\r\n      return action.payload;\r\n    case DESELECT_ALL_BUILDINGS:\r\n      return [];\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import {\r\n  ToggleCompareDialogOpenAction,\r\n  TOGGLE_COMPARE_DIALOG_OPEN,\r\n} from \"../actions/types\";\r\n\r\nexport const isCompareDialogOpen = (\r\n  state = false,\r\n  action: ToggleCompareDialogOpenAction\r\n) => {\r\n  switch (action.type) {\r\n    case TOGGLE_COMPARE_DIALOG_OPEN:\r\n      return !state;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import {\r\n  SET_MATERIALS_GROUP_BY,\r\n  MaterialsGroupByActionTypes,\r\n  SET_DISPLAY_MODE,\r\n  DisplayModeActionTypes,\r\n  TOGGLE_CAN_SELECT_MULTIPLE,\r\n  CanSelectMultipleActionTypes,\r\n  TOGGLE_SIMULATION_MODE,\r\n  SimulationModeActionTypes\r\n} from \"../actions/types\";\r\n\r\nimport { GroupBy } from \"interfaces/enums\";\r\n \r\nexport const materialsGroupBy = (\r\n  state = GroupBy.Product,\r\n  action: MaterialsGroupByActionTypes\r\n) => {\r\n  switch (action.type) {\r\n    case SET_MATERIALS_GROUP_BY:\r\n      return action.payload;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport const displayMode = (\r\n  state = \"table\",\r\n  action: DisplayModeActionTypes\r\n) => {\r\n  switch (action.type) {\r\n    case SET_DISPLAY_MODE:\r\n      return action.payload;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport const canSelectMultipleBuildings = (\r\n  state = false,\r\n  action: CanSelectMultipleActionTypes\r\n) => {\r\n  switch (action.type) {\r\n    case TOGGLE_CAN_SELECT_MULTIPLE:\r\n      return !state;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport const isSimulationModeActive = (\r\n  state = false,\r\n  action: SimulationModeActionTypes\r\n) => {\r\n  switch (action.type) {\r\n    case TOGGLE_SIMULATION_MODE:\r\n      return !state;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import firebase from \"firebase/app\";\r\nimport { SET_CURRENT_USER, CurrentUserActionTypes } from \"../actions/types\";\r\n\r\nexport const currentUser = (\r\n  state: firebase.User | null = null,\r\n  action: CurrentUserActionTypes\r\n) => {\r\n  switch (action.type) {\r\n    case SET_CURRENT_USER:\r\n      return action.payload;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./components/App\";\r\nimport SignIn from \"./components/SignIn\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\nimport \"fontsource-roboto\";\r\n\r\nimport { Provider } from \"react-redux\";\r\nimport { createStore, applyMiddleware } from \"redux\";\r\nimport rootReducer from \"./redux/reducers\";\r\nimport { composeWithDevTools } from \"redux-devtools-extension\";\r\nimport HomePage from \"components/HomePage\";\r\nrequire(\"dotenv\").config();\r\n\r\nconst store = createStore(\r\n  rootReducer,\r\n  window.__REDUX_DEVTOOLS_EXTENSION__ &&\r\n    window.__REDUX_DEVTOOLS_EXTENSION__()\r\n);\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <App />\r\n    {/* <HomePage /> */}\r\n  </Provider>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}
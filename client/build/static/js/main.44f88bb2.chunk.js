(this["webpackJsonplca-tool-gui"]=this["webpackJsonplca-tool-gui"]||[]).push([[0],{295:function(e,t,n){e.exports=n(457)},300:function(e,t,n){},307:function(e,t,n){},457:function(e,t,n){"use strict";n.r(t);var a,l,r=n(0),i=n.n(r),o=n(22),c=n.n(o),m=(n(300),n(12)),u=n(48),s=(n(197),n(198),n(535)),d=n(262),E=Object(d.a)({palette:{simulated:{main:"#ef6c00",light:"#ff9d3f",dark:"#b53d00"}}}),g=n(516),b=n(540),p=n(532),f=n(520),h=n(95),v=n(10),y={buildingActions:{setBuildings:function(e){return{type:"SET_BUILDINGS",payload:e}},selectBuildings:function(e){return{type:"SELECT_BUILDINGS",payload:e}},deselectAllBuildings:function(){return{type:"DESELECT_ALL_BUILDINGS"}}},uiActions:{setMaterialsGroupBy:function(e){return{type:"SET_CONTENT_TYPE",payload:e}},setDisplayMode:function(e){return{type:"SET_DISPLAY_MODE",payload:e}},toggleCanSelectMultiple:function(){return{type:"TOGGLE_CAN_SELECT_MULTIPLE"}},toggleSimulationMode:function(){return{type:"TOGGLE_SIMULATION_MODE"}}},elementAndMaterialActions:{setBuildingElements:function(e){return{type:"SET_BUILDING_ELEMENTS",payload:e}},setMaterialInventory:function(e){return{type:"SET_MATERIAL_INVENTORY",payload:e}},selectBuildingElement:function(e){return{type:"SELECT_BUILDING_ELEMENT",payload:e}},addToElementRoute:function(e){return{type:"ADD_TO_ELEMENT_ROUTE",payload:e}},setElementRoute:function(e){return{type:"SET_BUILDING_ELEMENT_ROUTE",payload:e}},hoverBuildingElement:function(e){return{type:"HOVER_BUILDING_ELEMENT",payload:e}},stopHoverBuildingElement:function(e){return{type:"STOP_HOVER_BUILDING_ELEMENT",payload:e}},setSimulatedData:function(e){return{type:"SET_SIMULATED_DATA",payload:e}},setMaterialProducts:function(e){return{type:"SET_MATERIAL_PRODUCTS",payload:e}},setSimulatedMaterialProducts:function(e){return{type:"SET_SIMULATED_MATERIAL_PRODUCTS",payload:e}}},settingsActions:{setEEMetric:function(e){return{type:"SET_EE_METRIC",name:e.name,checked:e.checked}}},userActions:{setCurrentUser:function(e){return{type:"SET_CURRENT_USER",payload:e}}}},O=n(266),A=n(518),_=n(519),S=n(9),C=n(19),j=n(2),N=n(112),B=n.n(N),w=n(37);!function(e){e.Category="category",e.BuildingElement="buildingElement",e.Product="product"}(a||(a={})),function(e){e.A1A3="Material production",e.A4="Transportation to building site",e.B4="Replacement",e.B4m="Material replacements",e.B4t="Transportation of material replacements",e.B6="Operational energy use",e.B7="Operational water use"}(l||(l={}));Object(g.a)((function(){return Object(b.a)({simulatedField:{color:E.palette.simulated.main}})}));var T=function(e){var t=e.value;return t?parseFloat(t).toLocaleString():0},I=function(e){return i.a.createElement(S.c,Object.assign({formatterComponent:T},e))},L=function(e){var t=e.value;return i.a.createElement("b",null,t)},x=function(e){return i.a.createElement(S.c,Object.assign({formatterComponent:L},e))},P=function(e){e.getMessage;var t=e.column,n=Object(w.a)(e,["getMessage","column"]),a="";switch(t.name){case"A1A3":a=l.A1A3;break;case"A4":a=l.A4;break;case"B4":a=l.B4;break;case"B4_m":a=l.B4m;break;case"B4_t":a=l.B4t;break;case"GWP_B6":a=l.B6;break;case"GWP_B7":a=l.B7;break;case"FU":a="Functional unit";break;case"RSL_mi":case"RSL":a="Reference service life";break;default:a="Sort by ".concat(t.name)}return i.a.createElement(C.i.SortLabel,Object.assign({column:t,getMessage:function(){return a}},n))},M=n(93),R=function e(){Object(M.a)(this,e)};R.columns=[{name:"building_identifier",title:"ID"},{name:"building_name",title:"Building name"},{name:"project",title:"Project"},{name:"country",title:"Country"},{name:"city",title:"City"},{name:"typology",title:"Typology"},{name:"construction_type",title:"Construction type"},{name:"built_status",title:"Built status"},{name:"energy_ambition_level",title:"Energy ambition level"},{name:"calculation_method",title:"Calculation method"},{name:"main_data_source",title:"Data source"},{name:"study_type",title:"Study type"},{name:"study_year",title:"Study year"},{name:"floor_area",title:"Floor area (m\xb2)"},{name:"lifetime",title:"Lifetime"},{name:"A1A3",title:"A1-A3"},{name:"A4",title:"A4"},{name:"B4_m",title:"B4 (m)"},{name:"B4_t",title:"B4 (t)"},{name:"GWP_B6",title:"B6"},{name:"GWP_B7",title:"B7"},{name:"heated_volume",title:"Heated volume"},{name:"area_footprint",title:"Area footprint"},{name:"area_roof",title:"Area roof"},{name:"area_wall",title:"Area wall"},{name:"area_windowAndDoor",title:"Area window and door"},{name:"heatloss_number",title:"Heatloss number"},{name:"comments",title:"Comments"}],R.columnExtensions=[{columnName:"building_identifier",width:80},{columnName:"building_name",width:200,wordWrapEnabled:!0},{columnName:"project",width:120},{columnName:"country",width:110},{columnName:"city",width:120},{columnName:"typology",width:130},{columnName:"construction_type",width:160},{columnName:"built_status",width:120},{columnName:"energy_ambition_level",width:180},{columnName:"calculation_method",width:170},{columnName:"main_data_source",width:120},{columnName:"study_type",width:160},{columnName:"study_year",width:110},{columnName:"lifetime",width:100},{columnName:"floor_area",width:150},{columnName:"heated_volume",width:150},{columnName:"area_footprint",width:150},{columnName:"area_roof",width:150},{columnName:"area_wall",width:150},{columnName:"area_windowAndDoor",width:150},{columnName:"heatloss_number",width:150},{columnName:"comments",width:400,wordWrapEnabled:!0}],R.defaultHiddenColumnNames=["country","built_status","energy_ambition_level","main_data_source","calculation_method","heated_volume","area_footprint","area_roof","area_wall","area_windowAndDoor","heatloss_number","comments"],R.tableColumnVisibilityColumnExtensions=[{columnName:"building_identifier",togglingEnabled:!1},{columnName:"building_name",togglingEnabled:!1}];var D=R,k=n(517),U=(n(307),function(){return r.createElement("div",{className:"loading-shading-mui"},r.createElement(k.a,{className:"loading-icon-mui",size:50,thickness:5}))}),F=function(e){return e[Object.keys(e)[0]]},W=function(e){return i.a.createElement(C.b.Root,Object.assign({},e,{style:{height:"100%"}}))},G=function(e){return e.map((function(e){return{columnName:e,predicate:function(){return!1}}}))};var H=function(){var e=Object(v.b)(),t=Object(v.c)((function(e){return e.buildings})),n=Object(r.useState)(D.columns),a=Object(m.a)(n,1)[0],l=Object(r.useState)(D.columnExtensions),o=Object(m.a)(l,1)[0],c=Object(r.useState)(!1),u=Object(m.a)(c,2),s=u[0],d=u[1],E=Object(r.useState)(),g=Object(m.a)(E,2),b=(g[0],g[1]),p=Object(r.useState)(D.defaultHiddenColumnNames),f=Object(m.a)(p,1)[0],h=Object(r.useState)(D.tableColumnVisibilityColumnExtensions),N=Object(m.a)(h,1)[0],w=Object(r.useState)([C.j.COLUMN_TYPE,"building_name"]),T=Object(m.a)(w,1)[0],L=Object(v.c)((function(e){return e.canSelectMultipleBuildings})),x=Object(r.useState)(["A1A3","A4","B4_t","B4_m","GWP_B6","GWP_B7"]),M=Object(m.a)(x,1)[0];Object(r.useEffect)((function(){R()}),[]);var R=function(){if(!s){d(!0);var n=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_URI+"/buildings";console.log("URL: ",n),fetch(n).then((function(e){return e.json()})).then((function(n){e(y.buildingActions.setBuildings(n)),d(!1),console.log("Fetched rows: ",t)})).catch((function(e){console.log("Error getting building data:",e),d(!1)}))}},k=Object(r.useCallback)(B.a.debounce((function(e){console.log("Changed search term: ",e),b(e)}),300),[]),H=Object(r.useState)(G(f)),V=Object(m.a)(H,2),z=V[0],q=V[1],K=Object(r.useState)([]),Y=Object(m.a)(K,2),X=Y[0],$=Y[1];return i.a.createElement(O.a,{style:{height:"600px"}},i.a.createElement(C.b,{rows:t,columns:a,getRowId:F,rootComponent:W},i.a.createElement(I,{for:M}),i.a.createElement(S.q,{onValueChange:k}),i.a.createElement(S.k,{columnExtensions:z}),i.a.createElement(S.s,null),i.a.createElement(S.m,null),i.a.createElement(S.r,{selection:X,onSelectionChange:function(n){if(L){$(n);var a=t.filter((function(e){return n.includes(e.idbuildings)}));e(y.buildingActions.selectBuildings(a))}else{var l=n.find((function(e){return-1===X.indexOf(e)}));if(void 0!==l){$([l]);var r=n[n.length-1];console.log("Selected row: ",r);var i=t.find((function(e){return e.idbuildings===r}));void 0!==i&&e(y.buildingActions.selectBuildings([i]))}else $([]),e(y.buildingActions.deselectAllBuildings())}}}),i.a.createElement(C.n,{height:"auto",columnExtensions:o}),i.a.createElement(C.i,{showSortingControls:!0,sortLabelComponent:P}),i.a.createElement(C.j,{selectByRowClick:!0,highlightRow:!0,showSelectionColumn:L}),i.a.createElement(C.g,{leftColumns:T}),i.a.createElement(C.e,{defaultHiddenColumnNames:f,columnExtensions:N,onHiddenColumnNamesChange:function(e){return q(G(e))}}),i.a.createElement(C.m,null),i.a.createElement(j.k,{name:"toolbarContent"},i.a.createElement(j.m,null),i.a.createElement(A.a,{control:i.a.createElement(_.a,{checked:L,onChange:function(){e(y.uiActions.toggleCanSelectMultiple()),e(y.buildingActions.deselectAllBuildings()),$([])},name:"checkedB",color:"primary"}),label:"Select multiple"})),i.a.createElement(C.d,null),i.a.createElement(C.a,null)),s&&i.a.createElement(U,null))},V=n(547),z=n(529),q=n(545),K={apiKey:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_FIREBASE_API_KEY,authDomain:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_FIREBASE_AUTH_DOMAIN,projectId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_FIREBASE_PROJECT_ID,storageBucket:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_FIREBASE_STORAGE_BUCKET,messagingSenderId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_FIREBASE_MESSAGING_SENDER_ID,appId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_FIREBASE_APP_ID,measurementId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_FIREBASE_MEASUREMENT_ID};n(458),n(308),n(460);u.a.initializeApp(K);u.a.auth(),u.a.firestore();var Y=u.a.firestore();function X(e){var t="anonymous",n=u.a.auth().currentUser;return n&&null!==n.email&&(t=n.email),Y.collection("users").doc(t).collection("simulatedData").doc(e).get()}var $=n(525),J=n(512),Q=n(537),Z=n(527),ee=n(524),te=n(466),ne=n(538),ae=n(543),le=n(528),re=n(6),ie=n(17),oe=n(539),ce=n(544),me=n(186),ue=n.n(me),se=n(257),de=n.n(se),Ee=n(462),ge=n(154),be=n.n(ge),pe=n(256),fe=n.n(pe),he=n(75),ve=n.n(he),ye=function e(){Object(M.a)(this,e)};ye.columns=[{name:"name",title:"Name"},{name:"A1A3",title:"A1-A3"},{name:"A4",title:"A4"},{name:"B4_m",title:"B4 (m)"},{name:"B4_t",title:"B4 (t)"}],ye.columnExtensions=[{columnName:"name",width:180,wordWrapEnabled:!0},{columnName:"A1A3",width:130},{columnName:"A4",width:130},{columnName:"B4_m",width:130},{columnName:"B4_t",width:130}],ye.defaultHiddenColumnNames=[],ye.tableColumnVisibilityColumnExtensions=[{columnName:"name",togglingEnabled:!1}];var Oe=ye,Ae=n(38),_e=function(e,t){var n=e.filter((function(e){return e.idparent===t.idlevels}));return void 0!==n?n:[]},Se=function(e,t){var n=e.filter((function(e){return e.idbuilding_elements===t.idbuilding_elements}));return void 0!==n?n:[]},Ce=function(e){if(e.value.length>15){var t=e.value.split(" ");if(t.length>2){var n=Math.ceil(t.length/2);return t.slice(0,n).join(" ")+"\n"+t.slice(n).join(" ")}return t.join("\n")}return e.value},je=function(e){return e.sort((function(e,t){return e.A1A3+e.A4+e.B4_m+e.B4_t-(t.A1A3+t.A4+t.B4_m+t.B4_t)})),e},Ne=function(e){return e.map((function(e){e.idmaterials,e.sourceType,e.RSL_mi,e.source,e.dataType,e.dataYear,e.density,e.EEf_A1A3,e.RSL,e.comments,e.parentId;return Object(w.a)(e,["idmaterials","sourceType","RSL_mi","source","dataType","dataYear","density","EEf_A1A3","RSL","comments","parentId"])}))},Be=function(e){var t=[];return e.reduce((function(e,n){return e[n.name]||(e[n.name]=Object(Ae.a)(Object(Ae.a)({},n),{},{idmaterialInventory:n.parentId,quantity:0,A1A3:0,A4:0,B4_m:0,B4_t:0,parentId:null,buildingElementName:n.buildingElementName}),t.push(e[n.name])),e[n.name].quantity+=n.quantity,e[n.name].A1A3+=n.A1A3,e[n.name].A4+=n.A4,e[n.name].B4_m+=n.B4_m,e[n.name].B4_t+=n.B4_t,e[n.name].buildingElementName!==n.buildingElementName&&(e[n.name].buildingElementName="..."),e}),{}),t},we=function(e,t){var n=[];return t&&(n=e.map((function(e){return t[e.idmaterialInventory]?Object(Ae.a)(Object(Ae.a)({},e),t[e.idmaterialInventory]):e}))),n},Te=Object(g.a)((function(e){return Object(b.a)({customRow:{"&:hover":{backgroundColor:"#F5F5F5",cursor:"pointer"}}})})),Ie=function(e){var t=Object(v.b)(),n=Object(v.c)((function(e){return e.buildingElements})),a=Object(v.c)((function(e){return e.selectedBuildingElement})),l=Object(r.useState)(Oe.columns),o=Object(m.a)(l,1)[0],c=Object(r.useState)(Oe.columnExtensions),u=Object(m.a)(c,1)[0],s=Object(r.useState)(["A1A3","A4","B4_t","B4_m"]),d=Object(m.a)(s,1)[0],E=Object(r.useState)(["name"]),g=(Object(m.a)(E,1)[0],Object(r.useState)(["name"])),b=Object(m.a)(g,1)[0],p=function(e){t(y.elementAndMaterialActions.selectBuildingElement(e)),t(y.elementAndMaterialActions.addToElementRoute(e))},f={edit:function(e){var t=e.onExecute;return i.a.createElement(ae.a,{title:"Go to sub-elements"},i.a.createElement(Ee.a,{onClick:t},i.a.createElement(ve.a,null)))}},h=_e(n,a);return i.a.createElement(C.b,{rows:h,columns:o},i.a.createElement(x,{for:b}),i.a.createElement(I,{for:d}),i.a.createElement(S.s,null),i.a.createElement(S.m,null),i.a.createElement(S.e,{onCommitChanges:function(){}}),i.a.createElement(C.n,{columnExtensions:u,rowComponent:function(e){var t=e.row,n=(e.style,Object(w.a)(e,["row","style"]));return i.a.createElement(C.n.Row,Object.assign({},n,{id:"tableRow"+t.idbuilding_elements,className:Te().customRow,onClick:function(){return p(t)}}))},height:500}),i.a.createElement(C.i,{showSortingControls:!0,sortLabelComponent:P}),i.a.createElement(C.f,{showEditCommand:!0,commandComponent:function(e){var t=e.id,n=e.onExecute,a=f[t];return i.a.createElement(a,{onExecute:n})},width:80}))},Le=n(14),xe=function(e){switch(e.seriesName){case"A1-A3":return l.A1A3;case"A4":return l.A4;case"B4":return l.B4;case"B4 (m)":return l.B4m;case"B4 (t)":return l.B4t}},Pe=Object(g.a)((function(e){return Object(b.a)({chart:{padding:e.spacing(2)},argumentAxisLabel:{fill:"#767676"}})})),Me=function(){var e=Object(v.b)(),t=Object(v.c)((function(e){return e.buildingElements})),n=Object(v.c)((function(e){return e.selectedBuildingElement})),a=Object(r.useState)([]),l=Object(m.a)(a,2),o=l[0],c=l[1];Object(r.useEffect)((function(){var e=u(n),t=[];e.forEach((function(e){var n={name:e.name,id:String(e.idbuilding_elements),A1A3:Number(e.A1A3)||0,A4:Number(e.A4)||0,B4_m:Number(e.B4_m)||0,B4_t:Number(e.B4_t)||0};t.push(n)}));var a=je(t);c(a)}),[n]);var u=function(e){var n=t.filter((function(t){return t.idparent===e.idlevels}));return void 0!==n?n:[]},s=Pe();return i.a.createElement(Le.Chart,{className:s.chart,dataSource:o,palette:"Material",rotated:!0,onPointClick:function(n){var a=n.target,l=Number(a.data.id),r=t.find((function(e){return e.idbuilding_elements===l}));void 0!==r&&(e(y.elementAndMaterialActions.selectBuildingElement(r)),e(y.elementAndMaterialActions.addToElementRoute(r)))},onDrawn:function(e){e.element.querySelectorAll(".dxc-markers rect").forEach((function(e){e.style.cursor="pointer"})),e.element.querySelector(".dxc-arg-elements").childNodes.forEach((function(e){e.style.cursor="pointer"}))}},i.a.createElement(Le.Size,{height:500}),i.a.createElement(Le.CommonSeriesSettings,{argumentField:"name",type:"stackedBar",barWidth:40,hoverMode:"allArgumentPoints"}),i.a.createElement(Le.Series,{valueField:"A1A3",name:"A1-A3"}),i.a.createElement(Le.Series,{valueField:"A4",name:"A4"}),i.a.createElement(Le.Series,{valueField:"B4_m",name:"B4 (m)"}),i.a.createElement(Le.Series,{valueField:"B4_t",name:"B4 (t)"}),i.a.createElement(Le.ValueAxis,null,i.a.createElement(Le.Title,{text:"kgCO2e",font:{size:14}})),i.a.createElement(Le.ArgumentAxis,null,i.a.createElement(Le.Label,{customizeText:Ce})),i.a.createElement(Le.Legend,{verticalAlignment:"bottom",horizontalAlignment:"center",itemTextPosition:"top",customizeHint:xe}),i.a.createElement(Le.Tooltip,{enabled:!0,location:"edge",customizeTooltip:function(e){return{text:"<b>".concat(e.seriesName,"</b>\n ").concat(e.valueText)}},zIndex:1200,arrowLength:6,format:"fixedPoint",interactive:!0}))},Re=n(153),De=n(255),ke=n.n(De),Ue=function e(){Object(M.a)(this,e)};Ue.columns=[{name:"name",title:"Name"},{name:"quantity",title:"Quantity"},{name:"FU",title:"FU"},{name:"sourceType",title:"Source type"},{name:"A1A3",title:"A1-A3"},{name:"A4",title:"A4"},{name:"B4_m",title:"B4 (m)"},{name:"B4_t",title:"B4 (t)"},{name:"RSL_mi",title:"RSL"},{name:"materialCat",title:"Category"},{name:"buildingElementName",title:"Building element"},{name:"source",title:"Source"},{name:"dataType",title:"Data type"},{name:"dataYear",title:"Data year"},{name:"density",title:"Density"},{name:"EEf_A1A3",title:"EEf_A1A3"},{name:"country",title:"Country"},{name:"city",title:"City"},{name:"comments",title:"Comments"}],Ue.columnExtensions=[{columnName:"idmaterialInventory",width:80},{columnName:"name",width:270,wordWrapEnabled:!0},{columnName:"dataType",width:120},{columnName:"sourceType",width:120},{columnName:"source",width:200,wordWrapEnabled:!0},{columnName:"dataYear",width:100},{columnName:"FU",width:70},{columnName:"EEf_A1A3",width:110},{columnName:"comments",width:400},{columnName:"materialCat",width:150},{columnName:"quantity",width:110},{columnName:"RSL_mi",width:80},{columnName:"A1A3",width:130},{columnName:"A4",width:130},{columnName:"B4_m",width:130},{columnName:"B4_t",width:130},{columnName:"buildingElementName",width:160,wordWrapEnabled:!0}],Ue.defaultHiddenColumnNames=["source","dataType","dataYear","comments","EEf_A1A3","density","country","city"],Ue.tableColumnVisibilityColumnExtensions=[{columnName:"name",togglingEnabled:!1}],Ue.decimalColumns=["quantity","EEf_A1A3","A1A3","A4","B4_t","B4_m","RSL_mi"],Ue.groupSummaryItems=[{columnName:"quantity",type:"sum",showInGroupFooter:!1,alignByColumn:!0},{columnName:"FU",type:"staticValue",showInGroupFooter:!1,alignByColumn:!0},{columnName:"sourceType",type:"staticValue",showInGroupFooter:!1,alignByColumn:!0},{columnName:"materialCat",type:"staticValue",showInGroupFooter:!1,alignByColumn:!0},{columnName:"RSL_mi",type:"avg",showInGroupFooter:!1,alignByColumn:!0},{columnName:"A1A3",type:"sum",showInGroupFooter:!1,alignByColumn:!0},{columnName:"A4",type:"sum",showInGroupFooter:!1,alignByColumn:!0},{columnName:"B4_m",type:"sum",showInGroupFooter:!1,alignByColumn:!0},{columnName:"B4_t",type:"sum",showInGroupFooter:!1,alignByColumn:!0}],Ue.editingStateColumnExtensions=[{columnName:"idmaterialInventory",editingEnabled:!1},{columnName:"name",editingEnabled:!1},{columnName:"buildingElementName",editingEnabled:!1},{columnName:"FU",editingEnabled:!1},{columnName:"materialCat",editingEnabled:!1},{columnName:"RSL_mi",editingEnabled:!1},{columnName:"dataType",editingEnabled:!1},{columnName:"dataYear",editingEnabled:!1},{columnName:"comments",editingEnabled:!1}];var Fe=Ue,We=n(94),Ge=n.n(We),He=n(514),Ve=(n(510),Object(g.a)((function(){return Object(b.a)({cell:{padding:E.spacing(1)},indentCell:{padding:0},groupButton:{height:E.spacing(4),width:E.spacing(4)},lookupEditCell:{padding:E.spacing(1)},inputRoot:{width:"100%"},selectMenu:{position:"absolute !important"},editCell:{paddingTop:E.spacing(0),paddingBottom:E.spacing(0)},simulatedField:{color:E.palette.simulated.main}})})),function(e){var t=e.children,n=e.style,a=Object(w.a)(e,["children","style"]);return i.a.createElement(C.n.Cell,Object.assign({},a,{children:null===a.row.parentId?t:null,style:Object(Ae.a)({paddingTop:"0px",paddingBottom:"0px"},n)}))}),ze=function(e){var t=e.value,n=e.style,a=Object(w.a)(e,["value","style"]);return i.a.createElement(C.n.Cell,Object.assign({},a,{style:Object(Ae.a)({},n)}),i.a.createElement(ae.a,{title:"Simulated value"},i.a.createElement("span",{style:{color:E.palette.simulated.main,fontWeight:"bold"}},"number"===typeof t?t.toLocaleString():t)))},qe=n(465),Ke=n(513),Ye=n(521),Xe=n(526),$e=n(523),Je=n(522),Qe=n(515);var Ze=function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n},et=Object(g.a)((function(){return Object(b.a)({labelAsterisk:{color:E.palette.simulated.main,fontWeight:"bolder",fontSize:"large"},subtitleAsterisk:{color:E.palette.simulated.main,fontWeight:"bolder"}})})),tt=["TestSource","EPD","Ecoinvent","Other","Custom","na","Klimatre","PEP"],nt=function(e){var t=e.row,n=e.onChange,a=e.onApplyChanges,o=e.onCancelChanges,c=e.open,u=Object(r.useState)(t),s=Object(m.a)(u,2),d=s[0],E=s[1],g=Object(r.useState)(t.sourceType),b=Object(m.a)(g,2),p=b[0],y=b[1],O=Object(r.useState)(t.A1A3),A=Object(m.a)(O,2),_=A[0],S=A[1],C=Object(v.c)((function(e){return e.materialProducts}));Object(v.c)((function(e){return e.simulatedMaterialProducts}));Object(r.useEffect)((function(){var e=C.find((function(e){return e.idmaterialInventory===t.idmaterialInventory}));void 0!==e&&(E(e),y(t.sourceType),S(t.A1A3))}),[t.idmaterialInventory]);var j=et();return i.a.createElement(Ye.a,{open:c,onClose:o},i.a.createElement(Je.a,{disableTypography:!0},i.a.createElement(h.a,{variant:"h6",component:"h2"},"Simulate material details"),i.a.createElement(h.a,{noWrap:!0,variant:"subtitle2",component:"h3"},t.name)),i.a.createElement($e.a,null,i.a.createElement(f.a,{container:!0,spacing:3},i.a.createElement(f.a,{item:!0,xs:6},i.a.createElement(qe.a,null,i.a.createElement(q.a,{select:!0,required:p!==d.sourceType,margin:"normal",name:"sourceType",label:"Source type",value:p||" ",onChange:function(e){if(y(e.target.value),"TestSource"===e.target.value){var t=(l=d.A1A3,Ze(.7*l,3));S(t),n({target:{name:"A1A3",value:t}})}else if(e.target.value===d.sourceType){S(d.A1A3);var a={target:{name:"A1A3",value:d.A1A3}};n(a)}var l;n(e)},InputLabelProps:{classes:{asterisk:j.labelAsterisk}}},tt.map((function(e){return i.a.createElement(J.a,{key:e,value:e,disabled:!(e===d.sourceType||"TestSource"===e)},e)}))),i.a.createElement(q.a,{margin:"normal",name:"materialCat",label:"Category",value:t.materialCat||" ",onChange:n,disabled:!0}),i.a.createElement(q.a,{margin:"normal",name:"quantity",label:"Quantity",value:t.quantity||"0",onChange:n,disabled:!0,InputProps:{startAdornment:i.a.createElement(Qe.a,{position:"start"},t.FU||"")}}),i.a.createElement(q.a,{margin:"normal",name:"RSL_mi",label:"RSL",value:t.RSL_mi||"0",onChange:n,disabled:!0}))),i.a.createElement(f.a,{item:!0,xs:6},i.a.createElement(qe.a,null,i.a.createElement(ae.a,{enterDelay:500,placement:"bottom",title:l.A1A3},i.a.createElement(q.a,{required:_!==d.A1A3,margin:"normal",name:"A1A3",label:"A1-A3",value:_||"0",onChange:n,disabled:!0,InputLabelProps:{classes:{asterisk:j.labelAsterisk}}})),i.a.createElement(ae.a,{enterDelay:500,placement:"bottom",title:l.A4},i.a.createElement(q.a,{margin:"normal",name:"A4",label:"A4",value:t.A4||"0",onChange:n,disabled:!0})),i.a.createElement(ae.a,{enterDelay:500,placement:"bottom",title:l.B4m},i.a.createElement(q.a,{margin:"normal",name:"B4_m",label:"B4 (m)",value:t.B4_m||"0",onChange:n,disabled:!0})),i.a.createElement(ae.a,{enterDelay:500,placement:"bottom",title:l.B4t},i.a.createElement(q.a,{margin:"normal",name:"B4_t",label:"B4 (t)",value:t.B4_t||"0",onChange:n,disabled:!0})))))),i.a.createElement(Xe.a,null,i.a.createElement(Ke.a,{onClick:o,color:"primary"},"Cancel"),i.a.createElement(Ke.a,{onClick:a,color:"primary"},"Save")))},at=i.a.memo((function(e){var t=e.popupComponent;return i.a.createElement(j.g,null,i.a.createElement(j.k,{name:"popupEditing"},i.a.createElement(j.l,null,(function(e,n){var a,l,r=e.rows,o=e.getRowId,c=e.editingRowIds,u=e.createRowChange,s=e.rowChanges,d=n.changeRow,E=n.commitChangedRows,g=n.stopEditRows,b=n.cancelChangedRows,p=Object(m.a)(c,1);l=p[0];var f=r.filter((function(e){return o(e)===l}))[0];a=Object(Ae.a)(Object(Ae.a)({},f),s[l]);var h=c,v=c.length>0;return i.a.createElement(t,{open:v,row:a,onChange:function(e){var t=e.target,n=t.name,r=t.value,i={rowId:l,change:u(a,r,n)};d(i)},onApplyChanges:function(){g({rowIds:h}),E({rowIds:h})},onCancelChanges:function(){g({rowIds:h}),b({rowIds:h})}})}))),i.a.createElement(j.k,{name:"root"},i.a.createElement(j.m,null),i.a.createElement(j.m,{name:"popupEditing"})))})),lt=function(e){return e.idmaterialInventory},rt=function(e){return e.map((function(e){return{columnName:e,predicate:function(){return!1}}}))},it={edit:function(e){var t=e.onExecute;return i.a.createElement(ae.a,{title:"Edit material"},i.a.createElement(Ee.a,{onClick:t},i.a.createElement(ke.a,null)))}},ot=function(e){var t=e.id,n=e.onExecute,a=it[t];return i.a.createElement(a,{onExecute:n})},ct=function(e){var t=e.row,n=e.style,a=Object(w.a)(e,["row","style"]);return i.a.createElement(C.l.Cell,Object.assign({},a,{style:Object(Ae.a)({fontWeight:null===t.parentId?"bold":void 0},n)}))},mt=function(e){var t=Object(v.b)(),n=Object(v.c)((function(e){return e.selectedBuildings})),a=Object(v.c)((function(e){return e.materialProducts})),l=(Object(v.c)((function(e){return e.simulatedMaterialProducts})),Object(v.c)((function(e){return e.simulatedData}))),o=Object(v.c)((function(e){return e.isSimulationModeActive})),c=Object(r.useState)([]),s=Object(m.a)(c,2),d=s[0],E=s[1],g=Object(r.useState)(Fe.columns),b=Object(m.a)(g,1)[0],p=Object(r.useState)(Fe.columnExtensions),f=Object(m.a)(p,1)[0],h=Object(r.useState)(Fe.defaultHiddenColumnNames),O=Object(m.a)(h,1)[0],A=Object(r.useState)(Fe.tableColumnVisibilityColumnExtensions),_=Object(m.a)(A,1)[0],j=Object(r.useState)(Fe.decimalColumns),N=Object(m.a)(j,1)[0];Object(r.useEffect)((function(){E(e.data)}),[e.data]);var w=Object(r.useState)(),T=Object(m.a)(w,2),L=(T[0],T[1]),x=Object(r.useCallback)(B.a.debounce((function(e){console.log("Changed search term: ",e),L(e)}),300),[]),M=Object(r.useState)(rt(O)),R=Object(m.a)(M,2),D=R[0],k=R[1],U=Object(r.useState)([]),F=Object(m.a)(U,2),W=F[0],G=F[1],H=Object(r.useState)([C.f.COLUMN_TYPE,"name"]),V=Object(m.a)(H,1)[0];return i.a.createElement(C.b,{rows:d,columns:b,getRowId:lt},i.a.createElement(S.N,{expandedRowIds:W,onExpandedRowIdsChange:G}),i.a.createElement(S.b,{getChildRows:function(e,t){var n=t.filter((function(t){return t.parentId===(e?e.idmaterialInventory:null)}));return n.length?n:null}}),i.a.createElement(S.q,{onValueChange:x}),i.a.createElement(S.k,{columnExtensions:D}),i.a.createElement(S.s,null),i.a.createElement(S.m,null),i.a.createElement(S.e,{onCommitChanges:function(e){var r=e.changed;console.log("Changed: ",r);var i=Object.keys(r)[0],o=a.find((function(e){return String(e.idmaterialInventory)===i}));if(void 0!==Object.values(r)[0]&&void 0!==o){for(var c=Object(Ae.a)(Object(Ae.a)({},l),r),s=0,d=Object.entries(c[i]);s<d.length;s++){var g=Object(m.a)(d[s],2),b=g[0];g[1]===Object(Re.getKeyValue)(b,o)&&delete c[i][b]}0===Object.keys(c[i]).length&&delete c[i];var p=we(a,c);!function(e,t){var n="anonymous",a=u.a.auth().currentUser;a&&null!==a.email&&(n=a.email),Y.collection("users").doc(n).collection("simulatedData").doc(e).set(t).then((function(){console.log("Document successfully written!")})).catch((function(e){console.error("Error writing document: ",e)}))}(String(n[0].idbuildings),c),t(y.elementAndMaterialActions.setSimulatedData(c)),t(y.elementAndMaterialActions.setSimulatedMaterialProducts(p)),E(p)}}}),i.a.createElement(C.n,{columnExtensions:f,cellComponent:o?function(e){return function(e,t){var n=e.column,a=e.row;return a.idmaterialInventory in t&&n.name in t[a.idmaterialInventory]?i.a.createElement(ze,e):i.a.createElement(C.n.Cell,e)}(e,l)}:function(e){return i.a.createElement(C.n.Cell,e)}}),i.a.createElement(I,{for:N}),i.a.createElement(C.i,{showSortingControls:!0,sortLabelComponent:P}),i.a.createElement(C.l,{for:"name",cellComponent:ct}),i.a.createElement(C.f,{showEditCommand:o,commandComponent:ot,cellComponent:Ve,width:o?70:.1}),i.a.createElement(C.g,{leftColumns:V}),i.a.createElement(at,{popupComponent:nt}),i.a.createElement(C.e,{defaultHiddenColumnNames:O,columnExtensions:_,onHiddenColumnNamesChange:function(e){return k(rt(e))}}),i.a.createElement(C.m,null),i.a.createElement(C.d,null),i.a.createElement(C.a,null))},ut=Object(g.a)((function(e){return Object(b.a)({chart:{padding:e.spacing(2)},argumentAxisLabel:{fill:"#767676"}})})),st=function(e){var t=Object(r.useState)([]),n=Object(m.a)(t,2),a=n[0],l=n[1],o=Object(v.c)((function(e){return e.isSimulationModeActive})),c=Object(v.c)((function(e){return e.simulatedData})),u=Object(v.c)((function(e){return e.simulatedMaterialProducts}));Object(r.useEffect)((function(){var t=je(e.data);l(t)}),[e.data]);var s=200+30*a.length,d=ut();return i.a.createElement(Le.Chart,{className:d.chart,dataSource:a,palette:"Material",rotated:!0,onDrawn:function(e){o&&e.element.querySelector(".dxc-arg-elements").childNodes.forEach((function(e){var t="";if(e.childNodes.length>1){var n=[];e.childNodes.forEach((function(e){n.push(e.innerHTML)})),t=n.join(" ")}else t=e.innerHTML;(function(e){var t;return(null===(t=u.find((function(t){return t.name===e})))||void 0===t?void 0:t.idmaterialInventory)||0})(t)in c&&(e.style.fill=E.palette.simulated.main,e.style.fontWeight=500)}))}},i.a.createElement(Le.Size,{height:s>500?s:500}),i.a.createElement(Le.CommonSeriesSettings,{argumentField:"name",type:"stackedBar",barWidth:40,hoverMode:"allArgumentPoints"}),i.a.createElement(Le.Series,{valueField:"A1A3",name:"A1-A3"}),i.a.createElement(Le.Series,{valueField:"A4",name:"A4"}),i.a.createElement(Le.Series,{valueField:"B4_m",name:"B4 (m)"}),i.a.createElement(Le.Series,{valueField:"B4_t",name:"B4 (t)"}),i.a.createElement(Le.ValueAxis,null,i.a.createElement(Le.Title,{text:"kgCO2e",font:{size:14}})),i.a.createElement(Le.ArgumentAxis,null,i.a.createElement(Le.Label,{customizeText:Ce})),i.a.createElement(Le.Legend,{verticalAlignment:"bottom",horizontalAlignment:"center",itemTextPosition:"top",customizeHint:xe}),i.a.createElement(Le.Tooltip,{enabled:!0,location:"edge",customizeTooltip:function(e){return{text:"<b>".concat(e.seriesName,"</b>\n ").concat(e.valueText)}},zIndex:1200,arrowLength:6,format:"fixedPoint"}))},dt=function(e){Object(v.b)();var t=Object(v.c)((function(e){return e.displayMode})),n=Object(v.c)((function(e){return e.materialInventory})),a=Object(v.c)((function(e){return e.materialProducts})),l=Object(v.c)((function(e){return e.simulatedMaterialProducts})),o=Object(v.c)((function(e){return e.isSimulationModeActive})),c=Object(v.c)((function(e){return e.simulatedData})),u=Object(r.useState)([]),s=Object(m.a)(u,2),d=s[0],E=s[1],g=Object(r.useState)([]),b=Object(m.a)(g,2),p=b[0],h=b[1];return Object(r.useEffect)((function(){var t,r;r=o?l:e.materials?Be(e.materials):a;var i=(null!==(t=e.materials)&&void 0!==t?t:n).map((function(e){return{idmaterialInventory:e.idmaterialInventory,name:"ID: "+String(e.idmaterialInventory),buildingElementName:e.buildingElementName,quantity:e.quantity,FU:e.FU,A1A3:e.A1A3||0,A4:e.A4||0,B4_m:e.B4_m||0,B4_t:e.B4_t||0,RSL_mi:e.RSL_mi,parentId:e.parentId}})),c=r.concat(i),m=Ne(r);E(c),h(m)}),[o,c]),i.a.createElement("div",null,i.a.createElement(f.a,{container:!0,spacing:3},i.a.createElement(f.a,{item:!0,xs:!0},"table"==t?i.a.createElement(O.a,null,i.a.createElement(mt,{data:d})):i.a.createElement(O.a,null,i.a.createElement(st,{data:p})))))},Et=Object(g.a)((function(e){return Object(b.a)({breadCrumbs:{marginTop:"3px"},infoIcon:{color:e.palette.text.secondary},infoContainer:{marginBottom:e.spacing(1)},infoIconGridItem:{height:"28px"}})})),gt=Object(re.a)((function(e){return{root:{backgroundColor:e.palette.grey[100],height:e.spacing(3),color:e.palette.grey[800],fontWeight:e.typography.fontWeightRegular,"&:hover, &:focus":{backgroundColor:e.palette.grey[300]},"&:active":{boxShadow:e.shadows[1],backgroundColor:Object(ie.b)(e.palette.grey[300],.12)}}}}))(ce.a),bt=Object(re.a)((function(e){return{root:{backgroundColor:e.palette.secondary.light,height:e.spacing(3),fontWeight:e.typography.fontWeightRegular,"&:hover, &:focus":{},"&:active":{boxShadow:e.shadows[1]}}}}))(ce.a),pt=function(e){var t=Object(v.b)(),n=Object(v.c)((function(e){return e.buildingElements})),a=Object(v.c)((function(e){return e.materialInventory})),l=Object(v.c)((function(e){return e.selectedBuildingElement})),o=Object(v.c)((function(e){return e.buildingElementRoute})),c=Object(v.c)((function(e){return e.displayMode}));Object(r.useEffect)((function(){var e=n.find((function(e){return 0===e.hierarchy}));void 0!==e&&(t(y.elementAndMaterialActions.selectBuildingElement(e)),t(y.elementAndMaterialActions.setElementRoute([e])))}),[]);var u=Object(r.useState)(),s=Object(m.a)(u,2),d=s[0],E=s[1],g=_e(n,l),b=Et();return i.a.createElement("div",null,i.a.createElement(f.a,{container:!0,spacing:3,alignItems:"center"},i.a.createElement(f.a,{item:!0},i.a.createElement(ae.a,{title:"Back"},i.a.createElement("span",null,i.a.createElement(Ee.a,{size:"small",onClick:function(){var e=o;E(e.pop()),t(y.elementAndMaterialActions.selectBuildingElement(e[e.length-1])),t(y.elementAndMaterialActions.setElementRoute(e))},disabled:o.length<2},i.a.createElement(be.a,null)))),i.a.createElement(ae.a,{title:"Forward"},i.a.createElement("span",null,i.a.createElement(Ee.a,{size:"small",onClick:function(){var e=o;void 0!==d&&e.push(d),t(y.elementAndMaterialActions.selectBuildingElement(e[e.length-1])),t(y.elementAndMaterialActions.setElementRoute(e))},disabled:!0},i.a.createElement(fe.a,null))))),i.a.createElement(f.a,{item:!0,xs:10},i.a.createElement(oe.a,null,o.map((function(e,n){return n!==o.length-1?i.a.createElement(gt,{className:b.breadCrumbs,key:n,label:e.name,variant:"default",icon:0===e.idlevels?i.a.createElement(ue.a,{fontSize:"small"}):void 0,color:n===o.length-1?"secondary":"default",onClick:function(){return function(e){var n=o.slice(0,e+1);t(y.elementAndMaterialActions.selectBuildingElement(n[n.length-1])),t(y.elementAndMaterialActions.setElementRoute(n))}(n)}}):i.a.createElement(bt,{className:b.breadCrumbs,key:n,label:e.name,variant:"default",icon:0===e.idlevels?i.a.createElement(ue.a,{fontSize:"small"}):void 0,color:"secondary"})})))),i.a.createElement(f.a,{item:!0,xs:12},(null===g||void 0===g?void 0:g.length)?"table"===c?i.a.createElement(i.a.Fragment,null,i.a.createElement(f.a,{container:!0,alignItems:"center",justify:"center",spacing:1,className:b.infoContainer},i.a.createElement(f.a,{item:!0,className:b.infoIconGridItem},i.a.createElement(de.a,{className:b.infoIcon,fontSize:"small"})),i.a.createElement(f.a,{item:!0},i.a.createElement(h.a,{variant:"body2",color:"textSecondary",align:"center"},"Click on a building element to see its sub-elements"))),i.a.createElement(O.a,null,i.a.createElement(Ie,null))):i.a.createElement(O.a,null,i.a.createElement(Me,null)):i.a.createElement(dt,{materials:Se(a,l)}))))},ft=function e(){Object(M.a)(this,e)};ft.columns=[{name:"name",title:"Name"},{name:"quantity",title:"Quantity"},{name:"FU",title:"FU"},{name:"materialCat",title:"Category"},{name:"sourceType",title:"Source type"},{name:"RSL_mi",title:"RSL"},{name:"A1A3",title:"A1-A3"},{name:"A4",title:"A4"},{name:"B4_m",title:"B4 (m)"},{name:"B4_t",title:"B4 (t)"},{name:"source",title:"Source"},{name:"dataType",title:"Data type"},{name:"dataYear",title:"Data year"},{name:"density",title:"Density"},{name:"EEf_A1A3",title:"EEf_A1A3"},{name:"country",title:"Country"},{name:"city",title:"City"},{name:"comments",title:"Comments"}],ft.columnExtensions=[{columnName:"idmaterialInventory",width:80},{columnName:"name",width:270,wordWrapEnabled:!0},{columnName:"dataType",width:120},{columnName:"sourceType",width:120},{columnName:"source",width:200,wordWrapEnabled:!0},{columnName:"dataYear",width:100},{columnName:"FU",width:70},{columnName:"EEf_A1A3",width:110},{columnName:"comments",width:400},{columnName:"materialCat",width:150},{columnName:"quantity",width:130},{columnName:"RSL_mi",width:80},{columnName:"A1A3",width:130},{columnName:"A4",width:130},{columnName:"B4_m",width:130},{columnName:"B4_t",width:130},{columnName:"buildingElementName",width:160,wordWrapEnabled:!0}],ft.defaultHiddenColumnNames=["source","dataType","dataYear","comments","EEf_A1A3","density","country","city"],ft.tableColumnVisibilityColumnExtensions=[{columnName:"name",togglingEnabled:!1}],ft.decimalColumns=["quantity","EEf_A1A3","A1A3","A4","B4_t","B4_m","RSL_mi"],ft.groupSummaryItems=[{columnName:"quantity",type:"sum",showInGroupFooter:!1,alignByColumn:!0},{columnName:"FU",type:"staticValue",showInGroupFooter:!1,alignByColumn:!0},{columnName:"sourceType",type:"staticValue",showInGroupFooter:!1,alignByColumn:!0},{columnName:"RSL_mi",type:"avg",showInGroupFooter:!1,alignByColumn:!0},{columnName:"A1A3",type:"sum",showInGroupFooter:!1,alignByColumn:!0},{columnName:"A4",type:"sum",showInGroupFooter:!1,alignByColumn:!0},{columnName:"B4_m",type:"sum",showInGroupFooter:!1,alignByColumn:!0},{columnName:"B4_t",type:"sum",showInGroupFooter:!1,alignByColumn:!0}],ft.editingStateColumnExtensions=[{columnName:"idmaterialInventory",editingEnabled:!1},{columnName:"name",editingEnabled:!1},{columnName:"buildingElementName",editingEnabled:!1},{columnName:"FU",editingEnabled:!1},{columnName:"materialCat",editingEnabled:!1},{columnName:"RSL_mi",editingEnabled:!1},{columnName:"dataType",editingEnabled:!1},{columnName:"dataYear",editingEnabled:!1},{columnName:"comments",editingEnabled:!1}];var ht=ft,vt=Object(g.a)((function(e){return Object(b.a)({cell:{padding:e.spacing(1)},indentCell:{padding:0},groupButton:{height:e.spacing(4),width:e.spacing(4)},lookupEditCell:{padding:e.spacing(1)},inputRoot:{width:"100%"},selectMenu:{position:"absolute !important"}})})),yt=function(e){var t=e.style,n=e.colSpan,a=e.row,l=(e.column,e.expanded),r=e.onToggle,o=(e.classes,e.children),c=(e.className,e.tableRow,e.tableColumn,e.contentComponent,e.iconComponent,e.indentCellComponent,e.inlineSummaryComponent,e.inlineSummaryItemComponent,e.summaryCellComponent,e.summaryItemComponent,e.containerComponent,e.inlineSummaries,e.getMessage,Object(w.a)(e,["style","colSpan","row","column","expanded","onToggle","classes","children","className","tableRow","tableColumn","contentComponent","iconComponent","indentCellComponent","inlineSummaryComponent","inlineSummaryItemComponent","summaryCellComponent","summaryItemComponent","containerComponent","inlineSummaries","getMessage"])),m=vt();return i.a.createElement(He.a,Object.assign({colSpan:n,style:t,className:m.cell,onClick:function(){return r()}},c),i.a.createElement(f.a,{container:!0,alignItems:"center",justify:"space-around"},i.a.createElement(f.a,{item:!0,xs:2},i.a.createElement(Ee.a,{className:m.groupButton},l?i.a.createElement(Ge.a,null):i.a.createElement(ve.a,null))),i.a.createElement(f.a,{item:!0,xs:10},i.a.createElement("span",null,i.a.createElement("strong",null,o||a.value)))))},Ot=function(e){e.style;var t=e.colSpan,n=(e.row,e.column,e.expanded,e.onToggle),a=(e.classes,e.children),l=(e.className,e.tableRow,e.tableColumn,e.contentComponent,e.iconComponent,e.indentCellComponent,e.inlineSummaryComponent,e.inlineSummaryItemComponent,e.summaryCellComponent,e.summaryItemComponent,e.containerComponent,e.inlineSummaries,e.getMessage,Object(w.a)(e,["style","colSpan","row","column","expanded","onToggle","classes","children","className","tableRow","tableColumn","contentComponent","iconComponent","indentCellComponent","inlineSummaryComponent","inlineSummaryItemComponent","summaryCellComponent","summaryItemComponent","containerComponent","inlineSummaries","getMessage"])),r=vt(),o="";switch(a.props.columnSummaries[0].type){case"sum":o="Sum";break;case"avg":o="Average";break;case"staticValue":o="Static"}return i.a.createElement(He.a,Object.assign({colSpan:t,onClick:function(){return n()},className:r.cell},l),"Static"===o?i.a.createElement("span",null,a):i.a.createElement(ae.a,{title:o},i.a.createElement("span",null,a)))},At=function(e){return e.idmaterialInventory},_t=function(e){return e.map((function(e){return{columnName:e,predicate:function(){return!1}}}))},St=function(e){Object(v.b)();var t=Object(r.useState)(ht.columns),n=Object(m.a)(t,1)[0],a=Object(r.useState)(ht.columnExtensions),l=Object(m.a)(a,1)[0],o=Object(r.useState)(ht.defaultHiddenColumnNames),c=Object(m.a)(o,1)[0],u=Object(r.useState)(ht.tableColumnVisibilityColumnExtensions),s=Object(m.a)(u,1)[0],d=Object(r.useState)(ht.decimalColumns),E=Object(m.a)(d,1)[0],g=Object(r.useState)(),b=Object(m.a)(g,2),p=(b[0],b[1]),f=Object(r.useCallback)(B.a.debounce((function(e){console.log("Changed search term: ",e),p(e)}),300),[]),h=Object(r.useState)(_t(c)),y=Object(m.a)(h,2),O=y[0],A=y[1],_=Object(r.useState)([]),j=Object(m.a)(_,2),N=(j[0],j[1],Object(r.useState)(["name"])),w=Object(m.a)(N,1)[0],T=Object(r.useState)([{columnName:"materialCat"}]),L=Object(m.a)(T,1)[0],x=Object(r.useState)(ht.groupSummaryItems),M=Object(m.a)(x,1)[0];return i.a.createElement(C.b,{rows:e.materials,columns:n,getRowId:At},i.a.createElement(I,{for:E}),i.a.createElement(S.q,{onValueChange:f}),i.a.createElement(S.k,{columnExtensions:O}),i.a.createElement(S.s,null),i.a.createElement(S.m,null),i.a.createElement(S.i,{grouping:L}),i.a.createElement(S.u,{groupItems:M}),i.a.createElement(S.l,null),i.a.createElement(S.n,{calculator:function(e,t,n){if("staticValue"===e){if(!t.length)return null;var a=n(t[0]);return t.every((function(e){return n(e)===a}))?a:"..."}return S.n.defaultCalculator(e,t,n)}}),i.a.createElement(C.n,{columnExtensions:l}),i.a.createElement(C.i,{showSortingControls:!0,sortLabelComponent:P}),i.a.createElement(C.h,{cellComponent:yt,summaryCellComponent:Ot,summaryItemComponent:function(e){var t,n=e.value;return t="string"===typeof n?n:n&&n>0?parseFloat(n).toLocaleString():"0",i.a.createElement("strong",null,t)}}),i.a.createElement(C.k,null),i.a.createElement(C.g,{leftColumns:w}),i.a.createElement(C.e,{defaultHiddenColumnNames:c,columnExtensions:s,onHiddenColumnNamesChange:function(e){return A(_t(e))}}),i.a.createElement(C.m,null),i.a.createElement(C.c,{showSortingControls:!0}),i.a.createElement(C.d,null),i.a.createElement(C.a,null))},Ct=n(156),jt=Object(g.a)((function(e){return Object(b.a)({container:{position:"relative"},chart:{overflowX:"hidden"},argumentAxisLabel:{fill:"#767676"},button:{position:"absolute",top:"12px",left:"18px"}})})),Nt=function(e){var t=Object(r.useState)([]),n=Object(m.a)(t,2),a=n[0],l=n[1],o=Object(r.useState)(!0),c=Object(m.a)(o,2),u=c[0],s=c[1],d=Object(r.useState)(""),E=Object(m.a)(d,2),g=E[0],b=E[1],p=Object(r.useState)(0),f=Object(m.a)(p,2),h=f[0],v=f[1];Object(r.useEffect)((function(){var e=y("");l(e),v(30*e.length+200)}),[e.data]);var y=function(t){return e.data.filter((function(e){return e.materialCat===t}))},O=jt();return i.a.createElement("div",{className:O.container},i.a.createElement(ae.a,{title:"Back"},i.a.createElement("span",null,i.a.createElement(Ee.a,{className:O.button,onClick:function(){u||(s(!0),b(""),l(y("")))},disabled:u},i.a.createElement(be.a,null)))),i.a.createElement(Le.Chart,{className:O.chart,dataSource:a,palette:"Material",rotated:!0,onPointClick:function(e){u&&(s(!1),b(e.target.originalArgument),l(y(e.target.originalArgument)))},onDrawn:function(e){u&&(e.element.querySelectorAll(".dxc-markers rect").forEach((function(e){e.style.cursor="pointer"})),e.element.querySelector(".dxc-arg-elements").childNodes.forEach((function(e){e.style.cursor="pointer"})))}},""===g?i.a.createElement(Le.Title,{text:"Click on a bar to see materials",horizontalAlignment:"center",font:{size:16,color:Ct.a[500],weight:400}}):i.a.createElement(Le.Title,{text:g,horizontalAlignment:"center",font:{size:18,color:"black",weight:500,family:'Roboto, "Segoe UI Light", "Helvetica Neue Light", "Segoe UI", "Helvetica Neue", "Trebuchet MS", Verdana, sans-serif'}}),i.a.createElement(Le.Size,{height:h>600?h:600}),i.a.createElement(Le.Margin,{top:10,bottom:10,left:30,right:30}),i.a.createElement(Le.CommonSeriesSettings,{argumentField:"name",type:"stackedBar",barWidth:50,hoverMode:"allArgumentPoints"}),i.a.createElement(Le.Series,{valueField:"A1A3",name:"A1-A3"}),i.a.createElement(Le.Series,{valueField:"A4",name:"A4"}),i.a.createElement(Le.Series,{valueField:"B4_m",name:"B4 (m)"}),i.a.createElement(Le.Series,{valueField:"B4_t",name:"B4 (t)"}),i.a.createElement(Le.ValueAxis,null,i.a.createElement(Le.Title,{text:"kgCO2e",font:{size:14}})),i.a.createElement(Le.ArgumentAxis,null,i.a.createElement(Le.Label,{customizeText:Ce})),i.a.createElement(Le.Legend,{verticalAlignment:"bottom",horizontalAlignment:"center",itemTextPosition:"top",customizeHint:xe}),i.a.createElement(Le.Tooltip,{enabled:!0,location:"edge",customizeTooltip:function(e){return{text:"<b>".concat(e.seriesName,"</b>\n ").concat(e.valueText)}},zIndex:1200,arrowLength:6,format:"fixedPoint"})))},Bt=(Object(g.a)((function(e){return Object(b.a)({breadCrumbs:{marginBottom:e.spacing(2)},chart:{padding:e.spacing(2)},elementTable:{padding:e.spacing(2)}})})),function(e){Object(v.b)();var t=Object(v.c)((function(e){return e.displayMode})),n=(Object(v.c)((function(e){return e.materialInventory})),Object(r.useState)([])),a=Object(m.a)(n,2),l=a[0],o=a[1],c=Object(r.useState)([]),u=Object(m.a)(c,2),s=u[0],d=u[1];return Object(r.useEffect)((function(){var t=Be(e.materials),n=Ne(t),a=function(e){var t=[];return e.reduce((function(e,n){return e[n.materialCat]||(e[n.materialCat]={name:n.materialCat,A1A3:0,A4:0,B4_m:0,B4_t:0,materialCat:""},t.push(e[n.materialCat])),e[n.materialCat].A1A3+=n.A1A3,e[n.materialCat].A4+=n.A4,e[n.materialCat].B4_m+=n.B4_m,e[n.materialCat].B4_t+=n.B4_t,e}),{}),t}(n),l=n.concat(a),r=je(l);o(t),d(r)}),[]),i.a.createElement("div",null,i.a.createElement(f.a,{container:!0,spacing:3},i.a.createElement(f.a,{item:!0,xs:!0},"table"===t?i.a.createElement(O.a,null,i.a.createElement(St,{materials:l})):i.a.createElement(O.a,null,i.a.createElement(Nt,{data:s})))))}),wt=Object(g.a)((function(e){return Object(b.a)({formControl:{marginRight:e.spacing(2),minWidth:180}})})),Tt=function(e){var t=Object(v.b)(),n=Object(v.c)((function(e){return e.selectedBuildings})),l=Object(v.c)((function(e){return e.materialInventory})),o=Object(v.c)((function(e){return e.isSimulationModeActive})),u=Object(v.c)((function(e){return e.materialsGroupBy})),s=Object(v.c)((function(e){return e.displayMode})),d=Object(r.useState)(!1),E=Object(m.a)(d,2),g=E[0],b=E[1],p=Object(r.useState)(!1),O=Object(m.a)(p,2),_=(O[0],O[1]),S=function(e){_(e)};Object(r.useEffect)((function(){n.length&&C()}),[n]);var C=function(){var e=n[0].idbuildings,a=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_URI,l="".concat(a,"/building_elements/").concat(e),r="".concat(a,"/material_inventory/").concat(e);g||(b(!0),Promise.all([fetch(l),fetch(r)]).then((function(e){return Promise.all(e.map((function(e){return e.json()})))})).then((function(n){X(String(e)).then((function(e){var a,l={};e.exists&&(l=null!==(a=e.data())&&void 0!==a?a:{});var r=n[0],i=n[1],o=Be(i),m=we(o,l);c.a.unstable_batchedUpdates((function(){t(y.elementAndMaterialActions.setBuildingElements(r)),t(y.elementAndMaterialActions.setMaterialInventory(i)),t(y.elementAndMaterialActions.setMaterialProducts(o)),t(y.elementAndMaterialActions.setSimulatedData(l)),t(y.elementAndMaterialActions.setSimulatedMaterialProducts(m)),b(!1)}))})).catch((function(e){console.log("Error getting simulation data:",e),b(!1)}))})).catch((function(){return b(!1)}))),X(String(e))},j=wt();return i.a.createElement("div",null,i.a.createElement(f.a,{container:!0,spacing:3,alignItems:"center",justify:"space-between"},i.a.createElement(f.a,{item:!0},i.a.createElement(h.a,{variant:"h5",color:"textSecondary",gutterBottom:!0},"Materials")),i.a.createElement(f.a,{item:!0},i.a.createElement(ae.a,{title:"Disable simulation mode to select different grouping",disableFocusListener:!o,disableHoverListener:!o,disableTouchListener:!o},i.a.createElement(ee.a,{className:j.formControl,variant:"outlined"},i.a.createElement($.a,null,"Group by"),i.a.createElement(ne.a,{displayEmpty:!0,value:u,label:"Group by",onChange:function(e){t(y.uiActions.setMaterialsGroupBy(e.target.value))},onMouseEnter:function(){return S(!0)},onMouseLeave:function(){return S(!1)},onOpen:function(){return S(!1)}},i.a.createElement(J.a,{value:a.Product},"Product"),i.a.createElement(J.a,{value:a.BuildingElement,disabled:o},"Building element"),i.a.createElement(J.a,{value:a.Category,disabled:o},"Category")))),i.a.createElement(ee.a,{component:"fieldset"},i.a.createElement(te.a,{component:"legend",color:"secondary"},"Display mode"),i.a.createElement(Z.a,{value:s,onChange:function(e){t(y.uiActions.setDisplayMode(e.target.value))},row:!0},i.a.createElement(A.a,{value:"table",control:i.a.createElement(Q.a,null),label:"Table"}),i.a.createElement(A.a,{value:"chart",control:i.a.createElement(Q.a,null),label:"Chart"}))))),g||e.parentIsLoading?i.a.createElement(le.a,{style:{marginTop:"65px"},variant:"rect",height:350}):u===a.BuildingElement?i.a.createElement(pt,null):u===a.Product?i.a.createElement(dt,{materials:l}):i.a.createElement(Bt,{materials:l}))},It=Object(g.a)((function(e){return Object(b.a)({chart:{height:200,padding:e.spacing(2)}})})),Lt=function(){var e=Object(v.c)((function(e){return e.selectedBuildings})),t=Object(v.c)((function(e){return e.simulatedMaterialProducts})),n=Object(v.c)((function(e){return e.isSimulationModeActive})),a=Object(v.c)((function(e){return e.simulatedData})),l=Object(v.c)((function(e){return e.EEMetric})),o=Object(r.useState)([]),c=Object(m.a)(o,2),u=c[0],s=c[1];Object(r.useEffect)((function(){var t,a,r,i,o={A1A3:Number(e[0].A1A3)||0,A4:Number(e[0].A4)||0,B4_m:Number(e[0].B4_m)||0,B4_t:Number(e[0].B4_t)||0};n?(t=d("A1A3")?g("A1A3"):o.A1A3,a=d("A4")?g("A4"):o.A4,r=d("B4_m")?g("B4_m"):o.B4_m,i=d("B4_t")?g("B4_t"):o.B4_t):(t=Number(e[0].A1A3)||0,a=Number(e[0].A4)||0,r=Number(e[0].B4_m)||0,i=Number(e[0].B4_t)||0),l.perSqM&&(t/=e[0].floor_area,a/=e[0].floor_area,r/=e[0].floor_area,i/=e[0].floor_area),l.perYear&&(t/=e[0].lifetime,a/=e[0].lifetime,r/=e[0].lifetime,i/=e[0].lifetime),s([{lcaPhase:"A1-A3",gwp:t},{lcaPhase:"A4",gwp:a},{lcaPhase:"B4 (m)",gwp:r},{lcaPhase:"B4 (t)",gwp:i}])}),[e[0],n,a,l]);var d=function(e){return Object.values(a).some((function(t){return e in t}))},g=function(e){return t.reduce((function(t,n){return t+(Number(Object(Re.getKeyValue)(e,n))||0)}),0)},b=function(e){switch(e){case"A1-A3":return"A1A3";case"A4":return"A4";case"B4 (m)":return"B4_m";case"B4 (t)":return"B4_t";default:return""}},p="kgCO2e";l.perSqM&&(p+="/m\xb2"),l.perYear&&(p+="/year");var f=It();return i.a.createElement(O.a,null,i.a.createElement(Le.Chart,{className:f.chart,dataSource:u,palette:"Material",onDrawn:function(e){n&&e.element.querySelector(".dxc-arg-elements").childNodes.forEach((function(e){var t=b(e.innerHTML);d(t)&&(e.style.fill=E.palette.simulated.main,e.style.fontWeight=500)}))}},i.a.createElement(Le.CommonSeriesSettings,{argumentField:"lcaPhase",valueField:"gwp",type:"bar",showInLegend:!1,ignoreEmptyPoints:!0}),i.a.createElement(Le.ValueAxis,null,i.a.createElement(Le.Title,{text:p,font:{size:12}})),i.a.createElement(Le.ArgumentAxis,null),i.a.createElement(Le.SeriesTemplate,{nameField:"lcaPhase"}),i.a.createElement(Le.Tooltip,{enabled:!0,zIndex:1200,arrowLength:6,format:"fixedPoint",interactive:!0})))},xt=Object(re.a)({switchBase:{"&$checked":{color:E.palette.simulated.main},"&$checked + $track":{backgroundColor:E.palette.simulated.main}},checked:{},track:{}})(_.a),Pt=function(){var e=Object(v.b)(),t=Object(v.c)((function(e){return e.isSimulationModeActive})),n=Object(v.c)((function(e){return e.materialsGroupBy}));return i.a.createElement(A.a,{control:i.a.createElement(xt,{checked:t,onChange:function(){e(y.uiActions.toggleSimulationMode()),n!==a.Product&&e(y.uiActions.setMaterialsGroupBy(a.Product))},name:"simulationChecked",color:"primary"}),label:"Simulation mode"})},Mt=Object(g.a)((function(e){return Object(b.a)({buildingSection:{marginBottom:e.spacing(2)},divider:{marginBottom:e.spacing(2)},elementSection:{marginTop:e.spacing(2)},buildingInfoLabels:{fontWeight:"bold"},content:{padding:e.spacing(2)}})}));var Rt=function(){Object(v.b)();var e=Object(v.c)((function(e){return e.selectedBuildings})),t=(Object(v.c)((function(e){return e.isSimulationModeActive})),e[0]),n=t.building_identifier,a=t.building_name,l=t.project,r=t.typology,o=t.construction_type,c=t.floor_area,m=(t.A1A3,t.A4,t.B4_m,t.B4_t,Mt());return i.a.createElement("div",{className:m.content},i.a.createElement(f.a,{container:!0,spacing:3,className:m.buildingSection},i.a.createElement(f.a,{item:!0,container:!0,alignItems:"flex-start",justify:"space-between"},i.a.createElement(f.a,{item:!0,xs:8},i.a.createElement(h.a,{variant:"h4",color:"textPrimary"},a),i.a.createElement(h.a,{variant:"subtitle1",color:"textSecondary",gutterBottom:!0},n)),i.a.createElement(f.a,{item:!0},i.a.createElement(Pt,null))),i.a.createElement(f.a,{item:!0,xs:6},i.a.createElement(h.a,{variant:"h5",color:"textSecondary",gutterBottom:!0},"General info"),i.a.createElement("div",null,i.a.createElement(q.a,{key:l||"project",inputProps:{readOnly:!0,disabled:!0},InputProps:{disableUnderline:!0},fullWidth:!0,label:"Project",name:"project",margin:"dense",defaultValue:l||"nil"}),i.a.createElement(q.a,{key:r||"typology",inputProps:{readOnly:!0,disabled:!0},InputProps:{disableUnderline:!0},fullWidth:!0,label:"Typology",name:"typology",margin:"dense",defaultValue:r||"nil"}),i.a.createElement(q.a,{key:o||"c_type",inputProps:{readOnly:!0,disabled:!0},InputProps:{disableUnderline:!0},fullWidth:!0,label:"Construction type",name:"construction_type",margin:"dense",defaultValue:o||"nil"}),i.a.createElement(q.a,{key:c||"f_area",inputProps:{readOnly:!0,disabled:!0},InputProps:{disableUnderline:!0},fullWidth:!0,label:"Floor area",name:"floor_area",margin:"dense",defaultValue:c+" m\xb2"||!1}))),i.a.createElement(f.a,{item:!0,xs:6},i.a.createElement(h.a,{variant:"h5",color:"textSecondary",gutterBottom:!0},"Embodied emissions"),i.a.createElement(Lt,null))),i.a.createElement(f.a,{container:!0,spacing:3},i.a.createElement(f.a,{item:!0,xs:!0},i.a.createElement(z.a,{variant:"middle",light:!0,className:m.divider}),i.a.createElement(Tt,null))))},Dt=Object(g.a)((function(e){return Object(b.a)({chart:{padding:e.spacing(2)}})})),kt=function(){var e=Object(v.c)((function(e){return e.selectedBuildings})),t=Object(v.c)((function(e){return e.EEMetric})),n=Object(r.useState)([]),a=Object(m.a)(n,2),l=a[0],o=a[1];Object(r.useEffect)((function(){var n=[];e.forEach((function(e){var a=Number(e.A1A3)||0,l=Number(e.A4)||0,r=Number(e.B4_m)||0,i=Number(e.B4_t)||0;t.perSqM&&(a/=e.floor_area,l/=e.floor_area,r/=e.floor_area,i/=e.floor_area),t.perYear&&(a/=e.lifetime,l/=e.lifetime,r/=e.lifetime,i/=e.lifetime);var o={name:e.building_name,identifier:e.building_identifier,a1a3:a,a4:l,b4m:r,b4t:i};n.push(o)})),o(n.reverse())}),[e,t]);var c="kgCO2e";t.perSqM&&(c+="/m\xb2"),t.perYear&&(c+="/year");var u=Dt();return i.a.createElement(O.a,null,i.a.createElement(Le.Chart,{className:u.chart,dataSource:l,palette:"Material",rotated:!0},i.a.createElement(Le.Size,{height:500}),i.a.createElement(Le.CommonSeriesSettings,{argumentField:"name",type:"stackedBar",barWidth:60}),i.a.createElement(Le.Series,{valueField:"a1a3",name:"A1-A3"}),i.a.createElement(Le.Series,{valueField:"a4",name:"A4"}),i.a.createElement(Le.Series,{valueField:"b4m",name:"B4 (m)"}),i.a.createElement(Le.Series,{valueField:"b4t",name:"B4 (t)"}),i.a.createElement(Le.ValueAxis,null,i.a.createElement(Le.Title,{text:c,font:{size:14}})),i.a.createElement(Le.ArgumentAxis,null,i.a.createElement(Le.Label,{customizeText:function(e){if(e.value.length>17){var t=e.value.split(" ");return t.length>2?t.slice(0,2).join(" ")+"\n"+t.slice(2).join(" "):t.join("\n")}return e.value}})),i.a.createElement(Le.Legend,{verticalAlignment:"bottom",horizontalAlignment:"center",itemTextPosition:"top"}),i.a.createElement(Le.Tooltip,{enabled:!0,location:"edge",customizeTooltip:function(e){return{text:"<b>".concat(e.seriesName,"</b>\n ").concat(e.valueText)}},zIndex:1200,arrowLength:6,format:"fixedPoint"})))},Ut=Object(g.a)((function(e){return Object(b.a)({buildingSection:{marginBottom:e.spacing(2)},divider:{marginBottom:e.spacing(2)},elementSection:{marginTop:e.spacing(2)},content:{padding:e.spacing(2)},formControl:{margin:e.spacing(3)}})})),Ft=function(){Object(v.b)(),Object(v.c)((function(e){return e.selectedBuildings}));var e=Ut();return i.a.createElement("div",{className:e.content},i.a.createElement(f.a,{container:!0},i.a.createElement(f.a,{item:!0,xs:12},i.a.createElement(h.a,{variant:"h5",color:"textSecondary",gutterBottom:!0},"Embodied emissions"),i.a.createElement(kt,null))))},Wt=Object(g.a)((function(e){return Object(b.a)({buildingSection:{marginBottom:e.spacing(2)},divider:{marginBottom:e.spacing(2)},elementSection:{marginTop:e.spacing(2)},buildingInfoLabels:{fontWeight:"bold"},noSelectionContainer:{height:"100vh"},drawer:{width:"50vw",flexShrink:0},drawerPaper:{width:"50vw",overflowY:"scroll"},content:{padding:e.spacing(2)}})})),Gt=function(){Object(v.b)();var e=Object(v.c)((function(e){return e.selectedBuildings})),t=Object(v.c)((function(e){return e.canSelectMultipleBuildings})),n=Wt();return i.a.createElement(V.a,{className:n.drawer,variant:"permanent",classes:{paper:n.drawerPaper},anchor:"right"},e.length?t?i.a.createElement(Ft,null):i.a.createElement(Rt,null):i.a.createElement(f.a,{container:!0,justify:"center",alignItems:"center",className:n.noSelectionContainer},i.a.createElement(f.a,{item:!0,xs:12},i.a.createElement(h.a,{variant:"h5",color:"textSecondary",align:"center"},"Select a building"))))},Ht=n(259),Vt=n.n(Ht),zt=n(258),qt=n.n(zt),Kt=n(508),Yt=n(463),Xt=Object(re.a)((function(e){return Object(b.a)({root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}})}))((function(e){var t=e.children,n=e.classes,a=e.onClose,l=Object(w.a)(e,["children","classes","onClose"]);return i.a.createElement(Je.a,Object.assign({disableTypography:!0,className:n.root},l),i.a.createElement(h.a,{variant:"h6"},t),a?i.a.createElement(Ee.a,{"aria-label":"close",className:n.closeButton,onClick:a},i.a.createElement(qt.a,null)):null)})),$t=Object(re.a)((function(e){return{root:{padding:e.spacing(2)}}}))($e.a),Jt=Object(re.a)((function(e){return{root:{margin:0,padding:e.spacing(1)}}}))(Xe.a),Qt=[{term:"A1-A3",definition:"Material production"},{term:"A4",definition:"Transportation of materials to the building site"},{term:"B4 (m)",definition:"Material replacements throughout the study lifetime period"},{term:"B4 (t)",definition:"Transportation of material replacements"}];var Zt=function(){var e=i.a.useState(!1),t=Object(m.a)(e,2),n=t[0],a=t[1],l=function(){a(!1)};return i.a.createElement("div",null,i.a.createElement(ae.a,{title:"Help"},i.a.createElement(Ee.a,{"aria-label":"help",onClick:function(){a(!0)}},i.a.createElement(Vt.a,{fontSize:"large"}))),i.a.createElement(Ye.a,{onClose:l,open:n},i.a.createElement(Xt,{id:"customized-dialog-title",onClose:l},"Help"),i.a.createElement($t,{dividers:!0},i.a.createElement(h.a,{variant:"h6"},"How to use"),i.a.createElement(h.a,null,i.a.createElement("ul",null,i.a.createElement("li",null,"Click on a row to see more details about the building, including its ",i.a.createElement("b",null,"materials")," and ",i.a.createElement("b",null,"building elements"),"."),i.a.createElement("li",null,"Turn on ",i.a.createElement("b",null,"simulation mode")," (",i.a.createElement("i",null,"top-right in building details"),") to edit a building's materials and see how the changes affect the rest of the building."),i.a.createElement("li",null,"Select multiple rows to ",i.a.createElement("b",null,"compare")," the emission values of different buildings."))),i.a.createElement(h.a,{variant:"h6"},"Terminology"),i.a.createElement(Kt.a,null,Qt.map((function(e,t){return i.a.createElement(Yt.a,{divider:t<Qt.length-1},i.a.createElement(f.a,{container:!0,spacing:1,alignItems:"center"},i.a.createElement(f.a,{item:!0,xs:2},i.a.createElement(h.a,{variant:"body1"},i.a.createElement("b",null,e.term))),i.a.createElement(f.a,{item:!0,xs:10},i.a.createElement(h.a,{variant:"body1"},e.definition))))})))),i.a.createElement(Jt,null,i.a.createElement(Ke.a,{autoFocus:!0,onClick:l,color:"primary"},"OK"))))},en=n(260),tn=n.n(en),nn=n(531),an=n(509),ln=n(530),rn=Object(g.a)((function(e){return Object(b.a)({root:{width:"100%",maxWidth:360,minWidth:220},content:{width:350,padding:e.spacing(2)},formControl:{marginTop:e.spacing(3)}})}));var on=function(e){var t=Object(v.b)(),n=Object(v.c)((function(e){return e.EEMetric})),a=Object(r.useState)(!1),l=Object(m.a)(a,2),o=l[0],c=l[1],u=function(e){t(y.settingsActions.setEEMetric({name:e.target.name,checked:e.target.checked}))},s=n.perSqM,d=n.perYear,E=rn();return i.a.createElement("div",null,i.a.createElement(ae.a,{title:"Settings"},i.a.createElement(Ee.a,{"aria-label":"help",onClick:function(){c(!0)}},i.a.createElement(tn.a,{fontSize:e.iconSize}))),i.a.createElement(V.a,{anchor:"right",open:o,onClose:function(){c(!1)}},i.a.createElement(f.a,{container:!0,className:E.content},i.a.createElement(h.a,{variant:"h4",color:"textPrimary",gutterBottom:!0},"Settings"),i.a.createElement(Kt.a,{subheader:i.a.createElement(ln.a,null,"Embodied emissions metric"),className:E.root},i.a.createElement(Yt.a,null,i.a.createElement(an.a,{id:"switch-list-label-sqm",primary:"Per m\xb2"}),i.a.createElement(nn.a,null,i.a.createElement(_.a,{edge:"end",checked:s,onChange:u,name:"perSqM"}))),i.a.createElement(Yt.a,null,i.a.createElement(an.a,{id:"switch-list-label-year",primary:"Per year"}),i.a.createElement(nn.a,null,i.a.createElement(_.a,{edge:"end",checked:d,onChange:u,name:"perYear"})))))))},cn=Object(g.a)((function(e){return Object(b.a)({container:{width:"50vw",marginTop:e.spacing(2)},mainContent:{width:"90%"},titleBar:{marginBottom:e.spacing(2)}})}));var mn=function(){var e=cn();return i.a.createElement(p.a,{maxWidth:"xl"},i.a.createElement(f.a,{container:!0,spacing:3,justify:"center",className:e.container},i.a.createElement(f.a,{container:!0,className:e.mainContent},i.a.createElement(f.a,{container:!0,item:!0,alignItems:"center",justify:"space-around",spacing:2,className:e.titleBar},i.a.createElement(f.a,{item:!0,xs:10},i.a.createElement(h.a,{variant:"h2"},"bLCAd Tool - GUI")),i.a.createElement(f.a,{item:!0,xs:1},i.a.createElement(Zt,null)),i.a.createElement(f.a,{item:!0,xs:1},i.a.createElement(on,{iconSize:"large"}))),i.a.createElement(f.a,{item:!0,xs:12},i.a.createElement(H,null)))),i.a.createElement(Gt,null))},un=n(546),sn=n(534),dn=n(533),En=n(536),gn=n(261),bn=n.n(gn);function pn(){return i.a.createElement(h.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",i.a.createElement(dn.a,{color:"inherit",href:"https://github.com/ericvel"},"Eric Veliyulin")," ",(new Date).getFullYear(),".")}var fn=Object(g.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));var hn=function(){Object(v.b)();var e=Object(r.useState)(""),t=Object(m.a)(e,2),n=t[0],a=t[1],l=Object(r.useState)(""),o=Object(m.a)(l,2),c=o[0],s=o[1],d=Object(r.useState)(null),E=Object(m.a)(d,2),g=E[0],b=E[1],f=function(e){var t=e.currentTarget,n=t.name,l=t.value;"email"===n?a(l):"password"===n&&s(l)},y=fn();return i.a.createElement(p.a,{component:"main",maxWidth:"xs"},i.a.createElement(sn.a,null),i.a.createElement("div",{className:y.paper},i.a.createElement(un.a,{className:y.avatar},i.a.createElement(bn.a,null)),i.a.createElement(h.a,{component:"h1",variant:"h5"},"Sign in"),null!==g&&i.a.createElement(h.a,{color:"error"},"Error: ",g),i.a.createElement("form",{className:y.form,noValidate:!0,onSubmit:function(e){e.preventDefault()}},i.a.createElement(q.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,onChange:function(e){return f(e)}}),i.a.createElement(q.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:function(e){return f(e)}}),i.a.createElement(Ke.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:y.submit,onClick:function(e){!function(e,t,n){e.preventDefault(),u.a.auth().setPersistence(u.a.auth.Auth.Persistence.SESSION).then((function(){return u.a.auth().signInWithEmailAndPassword(t,n)})).catch((function(e){switch(e.code){case"auth/invalid-email":b("The email address is invalid");break;case"auth/wrong-password":b("The password is invalid");break;case"auth/user-not-found":b("The user does not exist")}console.error("Error signing in: ",e)}))}(e,n,c)}},"Sign In"))),i.a.createElement(En.a,{mt:8},i.a.createElement(pn,null)))};var vn=function(){var e=Object(r.useState)(!1),t=Object(m.a)(e,2),n=t[0],a=t[1];return u.a.auth().onAuthStateChanged((function(e){a(!!e)})),n?i.a.createElement(s.a,{theme:E},i.a.createElement(mn,null)):i.a.createElement(hn,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(452);var yn=n(101),On=n(263),An={idbuilding_elements:0,idlevels:0,name:"",hierarchy:0,A1A3:null,A4:null,B4_m:null,B4_t:null,idparent:null},_n=n(152),Sn={perSqM:!1,perYear:!1},Cn=Object(yn.combineReducers)({buildings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BUILDINGS":return t.payload;default:return e}},selectedBuildings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_BUILDINGS":return t.payload;case"DESELECT_ALL_BUILDINGS":return[];default:return e}},isCompareDialogOpen:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_COMPARE_DIALOG_OPEN":return!e;default:return e}},buildingElements:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BUILDING_ELEMENTS":return t.payload;default:return e}},materialInventory:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MATERIAL_INVENTORY":return t.payload;default:return e}},selectedBuildingElement:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:An,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_BUILDING_ELEMENT":return t.payload;default:return e}},buildingElementRoute:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TO_ELEMENT_ROUTE":return[].concat(Object(On.a)(e),[t.payload]);case"SET_BUILDING_ELEMENT_ROUTE":return t.payload;default:return e}},hoveredBuildingElement:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"HOVER_BUILDING_ELEMENT":return t.payload;case"STOP_HOVER_BUILDING_ELEMENT":return null;default:return e}},materialsGroupBy:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.Product,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CONTENT_TYPE":return t.payload;default:return e}},displayMode:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"table",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DISPLAY_MODE":return t.payload;default:return e}},canSelectMultipleBuildings:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_CAN_SELECT_MULTIPLE":return!e;default:return e}},isSimulationModeActive:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_SIMULATION_MODE":return!e;default:return e}},EEMetric:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_EE_METRIC":return Object(Ae.a)(Object(Ae.a)({},e),{},Object(_n.a)({},t.name,t.checked));default:return e}},simulatedData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SIMULATED_DATA":return t.payload;default:return e}},currentUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER":return t.payload;default:return e}},materialProducts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MATERIAL_PRODUCTS":return t.payload;default:return e}},simulatedMaterialProducts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SIMULATED_MATERIAL_PRODUCTS":return t.payload;default:return e}}});n(453);n(454).config();var jn=Object(yn.createStore)(Cn,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());c.a.render(i.a.createElement(v.a,{store:jn},i.a.createElement(vn,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[295,1,2]]]);
//# sourceMappingURL=main.44f88bb2.chunk.js.map